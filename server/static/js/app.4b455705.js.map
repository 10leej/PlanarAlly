{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/shapes/text.ts","webpack:///./src/game/ui/selection/shapecontext.vue","webpack:///./src/App.vue?5b85","webpack:///./src/core/components/modals/prompt.vue?d33d","webpack:///./src/core/components/colorpicker.vue?4d88","webpack:///./src/game/game.vue","webpack:///./src/game/api/socket.ts","webpack:///./src/assetManager/manager.vue?5633","webpack:///./src/game/ui/menu/asset_node.vue","webpack:///./src/game/ui/tools/selectcontext.vue?02dc","webpack:///./src/auth/login.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?9216","webpack:///./src/game/ui/tools/createtoken_modal.vue?3856","webpack:///./src/game/ui/tools/tool.vue?5b17","webpack:///./src/game/shapes/circulartoken.ts","webpack:///./src/assetManager/manager.vue?aaaa","webpack:///./src/assetManager/manager.vue?1f53","webpack:///./src/game/ui/annotation.ts","webpack:///./src/core/components/colorpicker.vue?8070","webpack:///./src/game/ui/menu/menu.vue","webpack:///./src/core/components/contextmenu.vue","webpack:///./src/game/ui/note.vue?49b7","webpack:///./src/auth/login.vue?c159","webpack:///./src/game/shapes/utils.ts","webpack:///./src/core/components/modals/confirm.vue?e6fb","webpack:///./src/game/shapes/shape.ts","webpack:///./src/core/components/modals/prompt.vue?d457","webpack:///./src/game/ui/note.vue?8ce6","webpack:///./src/game/ui/note.vue?23aa","webpack:///./src/core/components/modals/modal.vue?33b9","webpack:///./src/game/ui/tools/select.vue?49f9","webpack:///./src/game/ui/tools/utils.ts","webpack:///./src/game/ui/note.vue?a508","webpack:///./src/game/api/utils.ts","webpack:///./src/game/ui/menu/asset_node.vue?f519","webpack:///./src/game/game.vue?aa40","webpack:///./src/game/game.vue?94fe","webpack:///./src/core/components/contextmenu.vue?06bc","webpack:///./src/core/components/contextmenu.vue?7efa","webpack:///./src/assetManager/store.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?03e8","webpack:///./src/core/components/contextmenu.vue?50e1","webpack:///./src/game/ui/selection/shapecontext.vue?1cf6","webpack:///./src/game/ui/selection/selection_info.vue?996c","webpack:///./src/game/ui/selection/selection_info.vue?8aba","webpack:///./src/game/ui/tools/map.vue?284a","webpack:///./src/game/layers/grid.ts","webpack:///./src/store.ts","webpack:///./src/core/components/colorpicker.vue","webpack:///./src/game/game.vue?e1c7","webpack:///./src/App.vue?d2ea","webpack:///./src/App.vue","webpack:///./src/game/layers/fow.ts","webpack:///./src/core/components/load.vue?18c2","webpack:///./src/game/shapes/circle.ts","webpack:///./src/game/ui/tools/map.vue?a3ab","webpack:///./src/core/components/load.vue","webpack:///./src/game/ui/tools/pan.ts","webpack:///./src/game/ui/tools/selectcontext.vue","webpack:///./src/core/utils.ts","webpack:///./src/assetManager/contextMenu.vue","webpack:///./src/game/ui/selection/edit_dialog.vue?cf9a","webpack:///./src/game/ui/selection/edit_dialog.vue?057b","webpack:///./src/game/ui/menu/asset_node.vue?1f27","webpack:///./src/game/ui/selection/shapecontext.vue?13ec","webpack:///./src/game/ui/selection/shapecontext.vue?3b0d","webpack:///./src/core/components/modals/modal.vue?44ae","webpack:///./src/assetManager/socket.ts","webpack:///./src/game/ui/tools/tools.vue?c96e","webpack:///./src/game/game.vue?5550","webpack:///./src/game/shapes/multiline.ts","webpack:///./src/core/components/colorpicker.vue?242f","webpack:///./src/core/components/colorpicker.vue?8615","webpack:///./src/game/ui/tools/draw.vue","webpack:///./src/game/utils.ts","webpack:///./src/game/ui/tools/createtoken_modal.vue?d0df","webpack:///./src/game/ui/note.vue?f9bd","webpack:///./src/game/ui/initiative.vue?f4e1","webpack:///./src/game/ui/tools/draw.vue?b96d","webpack:///./src/game/bvh/node.ts","webpack:///./src/game/shapes/line.ts","webpack:///./src/router.ts","webpack:///./src/game/ui/tools/tool.vue?d136","webpack:///./src/game/ui/tools/tools.vue","webpack:///./src/game/ui/tools/tool.vue?8ce3","webpack:///./src/game/shapes/asset.ts","webpack:///./src/game/ui/tools/draw.vue?1261","webpack:///./src/game/layers/manager.ts","webpack:///./src/game/ui/initiative.vue?c7e1","webpack:///./src/game/ui/tools/createtoken_modal.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?f918","webpack:///./src/game/events/keyboard.ts","webpack:///./src/assetManager/manager.vue?433f","webpack:///./src/game/ui/tools/tools.vue?25b2","webpack:///./src/game/ui/selection/selection_info.vue?2310","webpack:///./src/core/components/modals/modal.vue?09d2","webpack:///./src/core/components/contextmenu.vue?a0a2","webpack:///./src/game/ui/selection/selection_info.vue?b9a9","webpack:///./src/core/components/modals/prompt.vue?4e1b","webpack:///./src/game/ui/menu/asset_node.vue?8ac0","webpack:///./src/game/ui/menu/asset_node.vue?fc27","webpack:///./src/core/components/load.vue?141a","webpack:///./src/core/components/load.vue?0f87","webpack:///./src/game/ui/tools/tools.vue?78f7","webpack:///./src/game/ui/tools/tools.vue?35df","webpack:///./src/game/ui/menu/menu.vue?8b23","webpack:///./src/game/shapes/boundingrect.ts","webpack:///./src/dashboard/main.vue?7896","webpack:///./src/dashboard/main.vue?94d1","webpack:///./src/game/geom.ts","webpack:///./src/game/game.vue?5592","webpack:///./src/game/units.ts","webpack:///./src/game/ui/menu/menu.vue?ae57","webpack:///./src/game/ui/tools/draw.vue?c2fe","webpack:///./src/core/components/colorpicker.vue?1682","webpack:///./src/game/ui/tools/selectcontext.vue?46f1","webpack:///./src/game/ui/tools/selectcontext.vue?758c","webpack:///./src/game/ui/selection/shapecontext.vue?6173","webpack:///./src/game/manager.ts","webpack:///./src/game/ui/initiative.vue?c807","webpack:///./src/game/ui/initiative.vue?ca6b","webpack:///./src/core/components/load.vue?8cd0","webpack:///./src/dashboard/main.vue?3f72","webpack:///./src/core/components/modals/confirm.vue","webpack:///./src/game/ui/selection/shapecontext.vue?aac0","webpack:///./src/assetManager/manager.vue?a11e","webpack:///./src/game/ui/tools/draw.vue?c7ee","webpack:///./src/game/ui/tools/draw.vue?789d","webpack:///./src/game/event-bus.ts","webpack:///./src/dashboard/main.vue?d5a9","webpack:///./src/game/ui/menu/menu.vue?4372","webpack:///./src/game/ui/menu/menu.vue?90cd","webpack:///./src/game/shapes/rect.ts","webpack:///./src/game/ui/tools/selectcontext.vue?6f66","webpack:///./src/game/layers/fowplayers.ts","webpack:///./src/game/layers/layer.ts","webpack:///./src/game/events/mouse.ts","webpack:///./src/game/ui/menu/asset_node.vue?be10","webpack:///./src/game/shapes/baserect.ts","webpack:///./src/game/ui/tools/select.vue","webpack:///./src/dashboard/main.vue","webpack:///./src/game/ui/tools/select.vue?c408","webpack:///./src/game/ui/tools/select.vue?226c","webpack:///./src/game/bvh/bvh.ts","webpack:///./src/game/ui/tools/selectcontext.vue?d61f","webpack:///./src/auth/logout.ts","webpack:///./src/core/store.ts","webpack:///./src/main.ts","webpack:///./src/core/components/contextmenu.vue?f402","webpack:///./src/invitation/invitation.ts","webpack:///./src/core/components/modals/prompt.vue","webpack:///./src/auth/login.vue?5f02","webpack:///./src/game/ui/selection/edit_dialog.vue","webpack:///./src/game/settings.ts","webpack:///./src/auth/login.vue?283c","webpack:///./src/game/ui/tools/tool.vue?d6e5","webpack:///./src/game/ui/tools/tool.vue?f5ba","webpack:///./src/core/components/modals/modal.vue?dad5","webpack:///./src/core/components/modals/modal.vue?e329","webpack:///./src/game/game.vue?d01c","webpack:///./src/game/ui/tools/ruler.ts","webpack:///./src/game/ui/menu/menu.vue?f9de","webpack:///./src/core/components/modals/modal.vue","webpack:///./src/game/ui/tools/createtoken_modal.vue?41c9","webpack:///./src/dashboard/main.vue?1359","webpack:///./src/auth/login.vue?6585","webpack:///./src/auth/login.vue?7cce","webpack:///./src/game/ui/selection/edit_dialog.vue?9a84","webpack:///./src/core/components/modals/confirm.vue?f9ee","webpack:///./src/game/ui/tools/map.vue","webpack:///./src/assetManager/contextMenu.vue?b02b","webpack:///./src/assetManager/contextMenu.vue?b4b1","webpack:///./src/core/components/modals/confirm.vue?85a0","webpack:///./src/core/components/modals/confirm.vue?be48","webpack:///./src/assetManager/contextMenu.vue?1b1b","webpack:///./src/game/ui/tools/select.vue?b7fd","webpack:///./src/assetManager/manager.vue","webpack:///./src/game/ui/tools/tools.vue?fa4a","webpack:///./src/game/ui/tools/tool.vue","webpack:///./src/core/components/modals/prompt.vue?5578","webpack:///./src/core/components/modals/prompt.vue?36e2","webpack:///./src/game/ui/initiative.vue?36c8","webpack:///./src/game/ui/selection/selection_info.vue","webpack:///./src/game/store.ts","webpack:///./src/core/components/modals/confirm.vue?a22f","webpack:///./src/game/comm/conversion/aura.ts","webpack:///./src/assetManager/contextMenu.vue?1e9a","webpack:///./src/game/ui/note.vue","webpack:///./src/game/ui/initiative.vue","webpack:///./src/game/layers/utils.ts","webpack:///./src/game/ui/selection/edit_dialog.vue?3800","webpack:///./src/game/ui/tools/map.vue?5515","webpack:///./src/game/ui/tools/map.vue?9024","webpack:///./src/game/ui/selection/selection_info.vue?5d62","webpack:///./src/game/api/events.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","boundingrect_1","shape_1","units_1","Text","Shape","[object Object]","position","text","font","angle","fillColour","strokeColour","uuid","super","this","type","assign","getBaseDict","BoundingRect","refPoint","ctx","draw","fillStyle","save","dest","g2l","translate","x","y","rotate","textAlign","getLines","map","line","fillText","restore","point","centerPoint","canvas","resizeDir","lines","lineHeight","widths","measureText","width","Math","max","split","allLines","maxWidth","targetLine","words","word","testLine","metrics","testWidth","__webpack_exports__","_shapecontext_vue_vue_type_template_id_7111f3f6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_style_index_0_id_0602c2e6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor2_1","tslib_1","__importDefault","vue_1","vue_class_component_1","vue_color_1","vue_property_decorator_1","ColorPicker","default","display","left","top","transparent","$refs","chromePicker","val","rgba","a","setPosition","$nextTick","$children","$el","focus","newColor","toRgbString","$emit","color","rect","getBoundingClientRect","right","innerWidth","bottom","innerHeight","__decorate","Prop","String","components","chrome-picker","Chrome","_game_vue_vue_type_template_id_256b40b9_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","socket_io_client_1","createConnection","route","socket","io","opts","query","params","creator","room","connect","location","protocol","host","autoConnect","contextMenu_vue_1","confirm_vue_1","prompt_vue_1","socket_1","store_1","utils_1","AssetManager","path","draggingSelection","folders","assetStore","files","selected","idMap","currentFolder","root","parentFolder","parent","undefined","firstSelectedFile","sel","file_hash","nextFolder","pop","clearSelected","emit","prompt","inode","target","isFile","indexOf","delete","event","shiftKey","inodes","start","end","ctrlKey","file","dataTransfer","setData","dropEffect","includes","classList","contains","add","remove","moveInode","upload","document","getElementById","click","fls","CHUNK_SIZE","uuidv4","slices","ceil","size","fr","FileReader","readAsArrayBuffer","min","onload","e","directory","totalSlices","Prompt","ConfirmDialog","AssetContextMenu","to","from","next","disconnect","_asset_node_vue_vue_type_template_id_62c91cd3_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_style_index_0_id_44a31e42_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_login_vue_vue_type_template_id_6bbf3b79_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","render","_vm","_h","$createElement","_c","_self","attrs","visible","on","close","$event","scopedSlots","_u","fn","staticClass","draggable","dragstart","dragStart","dragend","dragEnd","_v","for","directives","rawName","expression","id","domProps","input","composing","update:color","borderColour","ref","height","submit","staticRenderFns","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","tinycolor","__importStar","circle_1","CircularToken","Circle","center","radius","fromDict","textBaseline","xs","calcFontScale","g2lz","ys","transform","mostReadable","toHexString","gameStore","IS_DM","group","source","has_img","effects","index","Infinity","dragover","preventDefault","moveDrag","drop","stopPropagation","stopDrag","_l","dir","_s","multiple","hidden","change","title","createDirectory","prepareUpload","dblclick","changeDirectory","dragleave","leaveDrag","staticStyle","font-size","_e","class","inode-selected","select","contextmenu","cm","open","startDrag","src","geom_1","manager_1","rect_1","text_1","AnnotationManager","shown","origin","GlobalPoint","annotationText","annotationRect","Rect","layer","layerManager","hasLayer","console","warn","getLayer","addShape","l2g","LocalPoint","getMaxWidth","getMaxHeight","w","zoomFactor","h","invalidate","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_style_index_0_id_b4f2c0b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_menu_vue_vue_type_template_id_081515c4_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_contextmenu_vue_vue_type_template_id_256dde9c___WEBPACK_IMPORTED_MODULE_0__","_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","asset_1","circulartoken_1","line_1","multiline_1","createShapeFromDict","shape","dummy","UUIDMap","has","sh","type_","fill_colour","stroke_colour","circ","token","Line","x2","y2","line_width","multiline","MultiLine","points","asset","img","Image","startsWith","URL","pathname","Asset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_style_index_0_id_1883e207_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","aura_1","trackers","auras","owners","visionObstruction","movementObstruction","isToken","showHighlight","annotation","globalCompositeOperation","Map","skipLightUpdate","self","obstructionIndex","visionBlockers","changeBV","recalculateBV","forEach","au","ls","visionSources","findIndex","aura","visionSource","some","blocksMovement","movementblockers","ownedBy","ownedtokens","username","draw_operator","movement_obstruction","vision_obstruction","aurasToServer","is_token","JSON","stringify","aurasFromServer","parse","bbox","getBoundingBox","strokeStyle","strokeRect","g2lx","topLeft","g2ly","dim","beginPath","loc","innerRange","g2lr","colour","gradient","createRadialGradient","tc","addColorStop","setAlpha","lastPath","fill","arc","PI","sync","oldLayer","newLayer","shapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","note","mask","updateNote","$set","style","calcHeight","removeNote","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_style_index_0_id_12ed61ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","selectcontext_vue_1","tool_vue_1","utils_2","utils_3","SelectOperations","SelectTool","showContextMenu","active","Noop","resizeDirection","deltaChanged","dragRay","Ray","Vector","selectionStartPoint","selectionHelper","log","mouse","getMouse","globalMouse","selectionStack","hit","selection","concat","corner","getCorner","getRef","Resize","Drag","localRefPoint","subtract","GroupSelect","endPoint","abs","og","direction","delta","multiply","ogDelta","calculateDelta","asDict","redraw","temporary","resize","bb","gm","inCorner","body","cursor","clearSelection","topRight","botLeft","useGrid","altKey","snapToGrid","resizeToGrid","$parent","shapecontext","selectcontext","SelectContext","done","ogSelBBox","newSelBBox","offset","refine","movementBlocker","blocker","blockerBBox","found","intersectsWithInner","ray","fromPoints","normalize","invDir","inverse","dirIsNegative","intersectP","bCenter","sCenter","ux","uy","dx","dot","dy","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_note_vue_vue_type_style_index_0_id_7a3669fd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","sendClientOptions","locationOptions","panX","panY","AssetNode","showImage","keys","filter","el","sort","alphSort","__files","b","toLowerCase","children","imageSource","querySelector","setDragImage","mouseleave","ready","mousedown","mouseup","mousemove","layers","layer-selected","selectedLayer","selectLayer","href","interval","dot-width","dot-height","tooltip-dir","tooltip","formatter","toFixed","slider-style","border-radius","bg-style","background-color","box-shadow","process-style","model","callback","$$v","tabindex","blur","_t","vuex_module_decorators_1","AssetStore","VuexModule","Mutation","Module","dynamic","store","rootStore","namespaced","getModule","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_style_index_0_id_078b3b76_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","contextmenu_vue_1","ShapeContext","activeLayer","pageX","pageY","selectable","playerEditable","moveLayer","getActiveLayer","moveShapeOrder","initiative","addInitiative","getInitiativeRepr","ContextMenu","openEditDialog","tracker","changeValue","maxvalue","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","layer_1","GridLayer","Layer","valid","doClear","drawGrid","clear","gs","gridSize","moveTo","lineTo","gridColour","lineWidth","stroke","vuex_1","use","Store","_colorpicker_vue_vue_type_template_id_b4f2c0b0_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_256b40b9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_1_id_256b40b9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","script","componentNormalizer","settings_1","FOWLayer","isVisionLayer","preFogShapes","idx","removeShape","Settings","skipLightFOW","clearRect","originalOperation","dctx","drawAngleLines","drawFirstLightHit","fullFOW","lcenter","alm","light","find","auraLength","getUnitDistance","auraCircle","visibleInCanvas","lastArcAngle","Path2D","firstPoint","angleSteps","anglePoint","cos","sin","lightRay","hitResult","BV","intersect","fowLOS","drawImage","preShape","ogComposite","getFogColour","fillRect","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","pow","targetX","targetY","round","resizedir","diff","sqrt","baserect_1","MapTool","xCount","yCount","startPoint","clone","BaseRect","_load_vue_vue_type_template_id_ff095222___WEBPACK_IMPORTED_MODULE_0__","_load_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__","PanTool","panStart","distance","increasePanX","increasePanY","_selectcontext_vue_vue_type_template_id_44a31e42_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","main_1","replace","random","v","toString","capitalize","charAt","toUpperCase","getHTMLFont","element","parentElement","getComputedStyle","getPropertyValue","getHTMLTextWidth","fakeElement","createElement","appendChild","getContext","partition","arr","predicate","ret","Number","fontWidth","fixedEncodeURIComponent","str","encodeURIComponent","charCodeAt","OrderedMap","values","getComponent","activeComponent","_contextMenu_vue_vue_type_template_id_d4f084a4___WEBPACK_IMPORTED_MODULE_0__","_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","grid-column","updateShape","grid-column-start","checked","setToken","Array","isArray","_i","$$a","$$el","$$c","$$i","setVisionBlocker","setMovementBlocker","owner","placeholder","updateOwner","removeOwner","modifiers","number","_n","$forceUpdate","opacity","removeTracker","updateAuraColour","updateAuraVisionSource","removeAura","updateAnnotation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","getLayers","setLayer","moveToBack","moveToFront","getInitiativeWord","Modal","positioned","offsetX","offsetY","screenX","screenY","dragging","updatePosition","container","offsetWidth","offsetHeight","clientX","clientY","parseInt","Boolean","destination","setRoot","folder","child","set","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_style_index_0_id_1fee50f5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","minx","maxx","miny","maxy","lineCap","lineJoin","currentTarget","closePicker","z-index","updateColor","_draw_vue_vue_type_template_id_5c4191ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","opposite","fowColour","fowOpacity","colorpicker_vue_1","modal_vue_1","CreateTokenModal","updatePreview","newValue","oldValue","unitSize","Watch","color-picker","computed","mapState","NoteDialog","textarea","scrollHeight","then","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_style_index_0_id_ccaf03d6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","DrawTool","brushHelper","shapeSelect","modeSelect","modes","brushSize","helperSize","onModeChange","fowLayer","normalLayer","setupBrush","onDeselect","onSelect","BoundingNode","nPrimitives","LeafNode","first","firstPrimOffset","InteriorNode","dimension","c1","c2","union","axios_1","vue_router_1","manager_vue_1","login_vue_1","logout_1","load_vue_1","main_vue_1","game_vue_1","invitation_1","router","base","routes","redirect","meta","auth","template","beforeEach","coreStore","initialized","matched","record","authenticated","response","setAuthenticated","setUsername","setInitialized","catch","error","Tool","detailRight","mid","detailArrow","$on","tool","onMouseDown","onMouseUp","onMouseMove","onContextMenu","_tools_vue_vue_type_template_id_1fee50f5_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","topleft","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","LayerManager","drawLoop","requestAnimationFrame","addLayer","globalAlpha","getSelection","image","getData","l2gx","l2gy","l2gz","lm","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_createtoken_modal_vue_vue_type_template_id_66ccc134_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","event_bus_1","onKeyUp","HTMLInputElement","HTMLTextAreaElement","selectTool","EventBus","onKeyDown","keyCode","hasSelection","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","shapecontext_vue_1","createtoken_modal_vue_1","draw_vue_1","map_vue_1","pan_1","select_vue_1","manager_2","ruler_1","Tools","currentTool","tools","dmTools","currentToolComponent","tagName","targetTool","button","buttons","annotations","gameManager","annotationManager","setActiveText","select-tool","pan-tool","draw-tool","ruler-tool","RulerTool","map-tool","shape-menu","createtoken-dialog","watch","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextmenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selection_info_vue_vue_type_style_index_0_id_32cec914_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","question","answer","resolve","reject","Promise","toggle","mouseover","hash","mouseout","message","refInFor","tool-selected","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","botRight","vector","other","xmin","xmax","ymin","ymax","botright","dirIsNeg","txmin","getDiagCorner","txmax","tymin","tymax","tMax","sw","owned","joined","_m","createRoom","newSessionName","tag","getPointDistance","p1","p2","Point","vec","scale","maxT","t1","t2","vue_slider_component_1","lodash_1","initiative_vue_1","menu_vue_1","note_vue_1","selection_info_vue_1","tools_vue_1","keyboard_1","mouse_1","Game","manager","updateZoom","newZoomValue","zoomLocation","addEventListener","setWidth","setHeight","throttle","scrollZoom","confirm","dropAsset","tool-bar","selection-info","prompt-dialog","confirm-dialog","menu-bar","initiative-dialog","zoom-slider","note-dialog","obj","z","l2gr","asset_node_vue_1","MenuBar","settings","locations","setUseGrid","setFullFOW","setFOWOpacity","setLineOfSight","setUnitSize","setGridSize","setGridColour","setFOWColour","rulerColour","setRulerColour","nextElementSibling","newNote","openNote","asset-node","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_5c4191ca_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_draw_vue_vue_type_style_index_0_id_5c4191ca_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_colorpicker_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","bringPlayers","createToken","showInitiative","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_style_index_0_id_7111f3f6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","annotation_1","GameManager","selectedTool","oldShape","redrawInitiative","checkVisionSources","setMovementBlock","setIsToken","move","localPos","fakeSetData","disabled","$store","state","game","updateOrder","actor","flex-direction","align-items","initiative-selected","currentActor","mouseenter","toggleHighlight","lazy","notAllowed","owns","syncInitiative","createEffect","getDefaultEffect","toggleOption","removeInitiative","effect","updateEffect","turns","roundCounter","setRound","setTurn","nextTurn","LoadComponent","registerHooks","Dashboard","vm","err","post","$router","_confirm_vue_vue_type_template_id_1883e207_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shapecontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","--detailRight","--detailArrow","option-selected","max-width","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","rm-list-dm","enter","rm","transition","settingsClick","overflow-y","overflow-x","assets","createNote","notes","step","readonly","invitationCode","text-decoration","changeLocation","createLocation","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_selectcontext_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","FOWPlayersLayer","skipPlayerFOW","maxLength","tokenId","closePath","selectionColor","selectionWidth","invalidateLight","serverShape","lsI","lbI","mbI","anI","annotationIndex","ownedIndex","ogOP","drawAuras","destinationIndex","oldIdx","sign","deltaY","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_asset_node_vue_vue_type_style_index_0_id_62c91cd3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","coreVisible","mx","my","_select_vue_vue_type_template_id_da20cb86___WEBPACK_IMPORTED_MODULE_0__","_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_main_vue_vue_type_template_id_61eb1455_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_main_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","node_1","BoundingVolume","totalNodes","buildData","orderedPrims","nodes","_a","Error","recursiveBuild","compact","node","createLeaf","centroidBbox","getMaxExtent","pMid","partitionedData","flattened","stopOnFirstHit","tMin","todoOffset","nodeNum","todo","secondChildOffset","flatten","myOffset","secondOffset","primitivesOffset","createtokendialog","Logout","CoreStore","init","App_vue_1","router_1","config","productionTip","devtools","performance","$mount","props","Initiative","code","sessionUrl","_prompt_vue_vue_type_template_id_0602c2e6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_prompt_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_6bbf3b79_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_edit_dialog_vue_vue_type_template_id_078b3b76_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","tempFill","Login","password","$route","statusText","span","modal-mask","dialog-mask","dragOver","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_game_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","ruler","diffsign","xdiff","ydiff","label","atan2","xmid","ymid","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_081515c4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_menu_vue_vue_type_style_index_0_id_081515c4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_modal_vue_vue_type_template_id_12ed61ba_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_modal_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_createtoken_modal_vue_vue_type_style_index_0_id_66ccc134_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_61eb1455_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","focusin","focusout","login","required","visibility","register","EditDialog","addEmpty","hadAnnotation","an","ownerIndex","tr","yes","no","ok","_map_vue_vue_type_template_id_f93438ce___WEBPACK_IMPORTED_MODULE_0__","_map_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","rename","deny","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_select_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_manager_vue_vue_type_template_id_d1ce9748___WEBPACK_IMPORTED_MODULE_0__","_manager_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_tools_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_tool_vue_vue_type_template_id_1e034b42___WEBPACK_IMPORTED_MODULE_0__","_tool_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","keyup","_k","vuedraggable_1","getActor","$off","actorId","order","show","option","effectIndex","syncEffect","_selection_info_vue_vue_type_template_id_32cec914_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_selection_info_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","bvh_1","GameStore","selectedLayerIndex","boardInitialized","roomName","roomCreator","locationName","freeze","isDM","success","tries","oldLoc","newLoc","getGridLayer","increase","unit_size","gridLayer","use_grid","full_fow","fow_opacity","fow_los","actualNote","context","commit","Action","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_confirm_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","vision_source","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_contextMenu_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","_note_vue_vue_type_template_id_7a3669fd_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_note_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","_initiative_vue_vue_type_template_id_ccaf03d6_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_initiative_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_1__","fow_1","fowplayers_1","grid_1","createLayer","layerInfo","zIndex","player_editable","setShapes","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0__","_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_thread_loader_dist_cjs_js_node_modules_ts_loader_index_js_ref_12_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_dialog_vue_vue_type_script_lang_ts___WEBPACK_IMPORTED_MODULE_0___default","edit_dialog_vue_1","SelectionInfo","editDialog","ogValue","isNaN","edit-dialog","setRoomName","setRoomCreator","setInvitationCode","setDM","grid_colour","fow_colour","ruler_colour","setPanX","pan_x","setPanY","pan_y","setZoomFactor","zoom_factor","active_layer","setLocationName","setCenterPosition","setAssets","locationInfo","setLocations","innerHTML","resetLayerInfo","reset","setBoardInitialized","realShape"],"mappings":"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","file":"static/js/app.4b455705.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2l } from \"@/game/units\";\n\nexport class Text extends Shape {\n    type = \"text\";\n    text: string;\n    font: string;\n    angle: number;\n    constructor(\n        position: GlobalPoint,\n        text: string,\n        font: string,\n        angle?: number,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(position, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n        this.angle = angle || 0;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            text: this.text,\n            font: this.font,\n            angle: this.angle,\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(this.refPoint, 5, 5); // TODO: fix this bounding box\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.fillStyle = this.fillColour;\n        ctx.save();\n        const dest = g2l(this.refPoint);\n        ctx.translate(dest.x, dest.y);\n        ctx.rotate(this.angle);\n        ctx.textAlign = \"center\";\n        this.getLines(ctx).map(line => ctx.fillText(line.text, line.x, line.y));\n        ctx.restore();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n\n    getMaxHeight(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const lineHeight = 30;\n        return lineHeight * lines.length;\n    }\n\n    getMaxWidth(ctx: CanvasRenderingContext2D) {\n        const lines = this.getLines(ctx);\n        const widths = lines.map(line => ctx.measureText(line.text).width);\n        return Math.max(...widths);\n    }\n\n    private getLines(ctx: CanvasRenderingContext2D) {\n        const lines = this.text.split(\"\\n\");\n        const allLines: { text: string; x: number; y: number }[] = [];\n        const maxWidth = ctx.canvas.width;\n        const lineHeight = 30;\n        const x = 0; // this.refPoint.x;\n        let y = 0; // this.refPoint.y;\n\n        for (const line of lines) {\n            let targetLine = \"\";\n            const words = line.split(\" \");\n            for (const word of words) {\n                const testLine = targetLine + word + \" \";\n                const metrics = ctx.measureText(testLine);\n                const testWidth = metrics.width;\n                if (testWidth > maxWidth) {\n                    ctx.fillText(targetLine, x, y);\n                    allLines.push({ text: targetLine, x, y });\n                    targetLine = word + \" \";\n                    y += lineHeight;\n                } else {\n                    targetLine = testLine;\n                }\n            }\n            allLines.push({ text: targetLine, x, y });\n            y += lineHeight;\n        }\n        return allLines;\n    }\n}\n","import { render, staticRenderFns } from \"./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"\nimport script from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./shapecontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7111f3f6\",\n  null\n  \n)\n\ncomponent.options.__file = \"shapecontext.vue\"\nexport default component.exports","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { Chrome } from \"vue-color\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component<ColorPicker>({\n    components: {\n        \"chrome-picker\": Chrome,\n    },\n})\nexport default class ColorPicker extends Vue {\n    @Prop(String) color!: string;\n\n    display = false;\n    left = 0;\n    top = 0;\n    transparent = false;\n\n    mounted() {\n        this.transparent = (<any>this.$refs.chromePicker).val.rgba.a === 0;\n        this.setPosition();\n    }\n\n    open() {\n        if (this.display) return; // click on the picker itself\n        this.setPosition();\n        this.display = true;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    updateColor(value: { rgba: { r: number; g: number; b: number; a: number } }) {\n        this.transparent = value.rgba.a === 0;\n        const newColor = tinycolor(value.rgba).toRgbString();\n        this.$emit(\"update:color\", newColor);\n        this.$emit(\"input\", newColor);\n    }\n    closePicker() {\n        this.display = false;\n        this.$emit(\"change\", this.color);\n    }\n    setPosition() {\n        const rect = this.$el.getBoundingClientRect();\n        // 224 is the width of the picker, 242 the height\n        if (rect.right + 224 > window.innerWidth) this.left = rect.left - 224;\n        else this.left = rect.right;\n        if (rect.bottom + 242 > window.innerHeight) this.top = rect.top - 242;\n        else this.top = rect.bottom;\n    }\n}\n","import { render, staticRenderFns } from \"./game.vue?vue&type=template&id=256b40b9&scoped=true&\"\nimport script from \"./game.vue?vue&type=script&lang=ts&\"\nexport * from \"./game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./game.vue?vue&type=style&index=1&id=256b40b9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"256b40b9\",\n  null\n  \n)\n\ncomponent.options.__file = \"game.vue\"\nexport default component.exports","import io from \"socket.io-client\";\nimport { Route } from \"vue-router\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/planarally\", { autoConnect: false });\n\nexport function createConnection(route: Route) {\n    socket.io.opts.query = `user=${route.params.creator}&room=${route.params.room}`;\n    socket.connect();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport AssetContextMenu from \"@/assetManager/contextMenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { Asset } from \"@/core/comm/types\";\nimport { uuidv4 } from \"@/core/utils\";\n\n@Component({\n    components: {\n        Prompt,\n        ConfirmDialog,\n        AssetContextMenu,\n    },\n    beforeRouteEnter(to, from, next) {\n        socket.connect();\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class AssetManager extends Vue {\n    path: number[] = [];\n    draggingSelection = false;\n\n    get folders(): number[] {\n        return assetStore.folders;\n    }\n\n    get files(): number[] {\n        return assetStore.files;\n    }\n\n    get selected(): number[] {\n        return assetStore.selected;\n    }\n\n    get idMap() {\n        return assetStore.idMap;\n    }\n\n    get currentFolder(): number {\n        if (this.path.length) return this.path[this.path.length - 1];\n        return assetStore.root;\n    }\n    get parentFolder(): number {\n        let parent = this.path[this.path.length - 2];\n        if (parent === undefined) parent = assetStore.root;\n        return parent;\n    }\n    get firstSelectedFile(): Asset | null {\n        for (const sel of assetStore.selected) {\n            if (assetStore.idMap.get(sel)!.file_hash) {\n                return assetStore.idMap.get(sel)!;\n            }\n        }\n        return null;\n    }\n    changeDirectory(nextFolder: number) {\n        if (nextFolder < 0) this.path.pop();\n        else this.path.push(nextFolder);\n        assetStore.clearSelected();\n        socket.emit(\"Folder.Get\", this.currentFolder);\n    }\n    createDirectory() {\n        const name = window.prompt(\"New folder name\");\n        if (name !== null) {\n            socket.emit(\"Folder.Create\", { name, parent: this.currentFolder });\n        }\n    }\n    moveInode(inode: number, target: number) {\n        if (assetStore.isFile(inode)) assetStore.files.splice(assetStore.files.indexOf(inode), 1);\n        else assetStore.folders.splice(assetStore.folders.indexOf(inode), 1);\n        assetStore.idMap.delete(inode);\n        socket.emit(\"Inode.Move\", { inode, target });\n    }\n    select(event: MouseEvent, inode: number) {\n        if (event.shiftKey && assetStore.selected.length > 0) {\n            const inodes = [...assetStore.files, ...assetStore.folders];\n            const start = inodes.indexOf(assetStore.selected[assetStore.selected.length - 1]);\n            const end = inodes.indexOf(inode);\n            for (let i = start; i !== end; start < end ? i++ : i--) assetStore.selected.push(inodes[i]);\n            assetStore.selected.push(inodes[end]);\n        } else {\n            if (!event.ctrlKey) {\n                assetStore.clearSelected();\n            }\n            assetStore.selected.push(inode);\n        }\n    }\n    startDrag(event: DragEvent, file: number) {\n        if (event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"ittyHack\");\n        event.dataTransfer.dropEffect = \"move\";\n        if (!assetStore.selected.includes(file)) assetStore.selected.push(file);\n        this.draggingSelection = true;\n    }\n    moveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.add(\"inode-selected\");\n    }\n    leaveDrag(event: DragEvent) {\n        if ((<HTMLElement>event.target).classList.contains(\"folder\"))\n            (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n    }\n    stopDrag(event: DragEvent, target: number) {\n        (<HTMLElement>event.target).classList.remove(\"inode-selected\");\n        if (this.draggingSelection) {\n            if (\n                (target === assetStore.root || assetStore.folders.includes(target)) &&\n                !assetStore.selected.includes(target)\n            ) {\n                for (const inode of assetStore.selected) {\n                    this.moveInode(inode, target);\n                }\n            }\n            assetStore.clearSelected();\n        } else if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n            this.upload(event.dataTransfer.files, target);\n        }\n        this.draggingSelection = false;\n    }\n    prepareUpload() {\n        document.getElementById(\"files\")!.click();\n    }\n    upload(fls?: FileList, target?: number) {\n        const files = (<HTMLInputElement>document.getElementById(\"files\")!).files;\n        if (fls === undefined) {\n            if (files) fls = files;\n            else return;\n        }\n        if (target === undefined) target = this.currentFolder;\n        const CHUNK_SIZE = 100000;\n        for (const file of fls) {\n            const uuid = uuidv4();\n            const slices = Math.ceil(file.size / CHUNK_SIZE);\n            for (let slice = 0; slice < slices; slice++) {\n                const fr = new FileReader();\n                fr.readAsArrayBuffer(\n                    file.slice(\n                        slice * CHUNK_SIZE,\n                        slice * CHUNK_SIZE + Math.min(CHUNK_SIZE, file.size - slice * CHUNK_SIZE),\n                    ),\n                );\n                fr.onload = e => {\n                    socket.emit(\"Asset.Upload\", {\n                        name: file.name,\n                        directory: target,\n                        data: fr.result,\n                        slice,\n                        totalSlices: slices,\n                        uuid,\n                    });\n                };\n            }\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"\nimport script from \"./asset_node.vue?vue&type=script&lang=ts&\"\nexport * from \"./asset_node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62c91cd3\",\n  null\n  \n)\n\ncomponent.options.__file = \"asset_node.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=ts&\"\nexport * from \"./login.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bbf3b79\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(\"Create basic token\")])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"createtokendialog-text\"}},[_vm._v(\"Text\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\",\"id\":\"createtokendialog-name\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('label',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"colours\"},[_c('span',[_vm._v(\"Fill:\")]),_c('color-picker',{attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('span',[_vm._v(\"Border:\")]),_c('color-picker',{attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"100px\",\"height\":\"100px\"}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=style&index=0&lang=css&\"","import * as tinycolor from \"tinycolor2\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerCircularToken } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lz } from \"@/game/units\";\n\nexport class CircularToken extends Circle {\n    type = \"circulartoken\";\n    text: string;\n    font: string;\n    constructor(\n        center: GlobalPoint,\n        r: number,\n        text: string,\n        font: string,\n        fillColour?: string,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(center, r, fillColour, strokeColour, uuid);\n        this.text = text;\n        this.font = font;\n    }\n    asDict(): ServerCircularToken {\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n            text: this.text,\n            font: this.font,\n        });\n    }\n    fromDict(data: ServerCircularToken) {\n        super.fromDict(data);\n        this.r = data.radius;\n        this.text = data.text;\n        this.font = data.font;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.font = this.font;\n        ctx.save();\n        const dest = g2l(this.center());\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, g2lz(this.r), g2lz(this.r));\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name === \"\" || this.name === \"Unknown shape\" ? this.text : this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"AssetManager\"}},[_c('div',{attrs:{\"id\":\"titlebar\"}},[_vm._v(\"Asset Manager\")]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"assets\"},on:{\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.currentFolder)}}},[_c('div',{attrs:{\"id\":\"breadcrumbs\"}},[_c('div',[_vm._v(\"/\")]),_vm._l((_vm.path),function(dir){return _c('div',{key:dir},[_vm._v(_vm._s(_vm.idMap.get(dir).name))])})],2),_c('div',{attrs:{\"id\":\"actionbar\"}},[_c('input',{attrs:{\"id\":\"files\",\"type\":\"file\",\"multiple\":\"\",\"hidden\":\"\"},on:{\"change\":function($event){_vm.upload()}}}),_c('div',{attrs:{\"title\":\"Create folder\"},on:{\"click\":_vm.createDirectory}},[_c('i',{staticClass:\"fas fa-plus-square\"})]),_c('div',{attrs:{\"title\":\"Upload files\"},on:{\"click\":_vm.prepareUpload}},[_c('i',{staticClass:\"fas fa-upload\"})])]),_c('div',{attrs:{\"id\":\"explorer\"}},[(_vm.path.length)?_c('div',{staticClass:\"inode folder\",on:{\"dblclick\":function($event){_vm.changeDirectory(-1)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, _vm.parentFolder)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(\"..\")])]):_vm._e(),_vm._l((_vm.folders),function(key){return _c('div',{key:key,staticClass:\"inode folder\",class:{'inode-selected': _vm.selected.includes(key)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, key)},\"dblclick\":function($event){_vm.changeDirectory(key)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, key)},\"dragstart\":function($event){_vm.startDrag($event, key)},\"dragover\":function($event){$event.preventDefault();return _vm.moveDrag($event)},\"dragleave\":function($event){$event.preventDefault();return _vm.leaveDrag($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.stopDrag($event, key)}}},[_c('i',{staticClass:\"fas fa-folder\",staticStyle:{\"font-size\":\"50px\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(key).name))])])}),_vm._l((_vm.files),function(file){return _c('div',{key:file,staticClass:\"inode file\",class:{'inode-selected': _vm.selected.includes(file)},attrs:{\"draggable\":\"true\"},on:{\"click\":function($event){_vm.select($event, file)},\"contextmenu\":function($event){$event.preventDefault();_vm.$refs.cm.open($event, file)},\"dragstart\":function($event){_vm.startDrag($event, file)}}},[_c('img',{attrs:{\"src\":'/static/assets/' + _vm.idMap.get(file).file_hash,\"width\":\"50\"}}),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.idMap.get(file).name))])])})],2)]),(_vm.firstSelectedFile)?_c('div',{attrs:{\"id\":\"asset-details\"}},[_c('div',{attrs:{\"id\":\"asset-detail-title\"}},[_vm._v(_vm._s(_vm.firstSelectedFile.name))]),_c('img',{attrs:{\"src\":'/static/assets/' + _vm.firstSelectedFile.file_hash}})]):_vm._e()]),_c('AssetContextMenu',{ref:\"cm\"}),_c('Prompt',{ref:\"prompt\"}),_c('ConfirmDialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=template&id=d1ce9748&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\n\nexport class AnnotationManager {\n    annotationText: Text;\n    annotationRect: Rect;\n    layer: Layer | undefined;\n    shown: boolean = false;\n\n    constructor() {\n        const origin = new GlobalPoint(0, 0);\n        this.annotationText = new Text(origin, \"\", \"bold 20px serif\", 0, \"rgba(230, 230, 230, 1)\");\n        this.annotationRect = new Rect(origin, 0, 0, \"rgba(0, 0, 0, 0.6)\");\n    }\n\n    setActiveText(text: string) {\n        if (this.layer === undefined) {\n            if (layerManager.hasLayer(\"draw\")) {\n                this.layer = layerManager.getLayer(\"draw\")!;\n                this.layer.addShape(this.annotationRect, false);\n                this.layer.addShape(this.annotationText, false);\n            } else {\n                console.warn(\"There is no draw layer to draw annotations on!\");\n                return;\n            }\n        }\n        this.shown = text !== \"\";\n        this.annotationText.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2, 50));\n        this.annotationText.text = text;\n        const width = this.shown ? this.annotationText.getMaxWidth(this.layer.ctx) + 10 : 0;\n        const height = this.shown ? this.annotationText.getMaxHeight(this.layer.ctx) + 10 : 0;\n        this.annotationRect.refPoint = l2g(new LocalPoint(this.layer.canvas.width / 2 - width / 2, 30));\n        this.annotationRect.w = width / gameStore.zoomFactor;\n        this.annotationRect.h = height / gameStore.zoomFactor;\n        this.layer.invalidate(true);\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=081515c4&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=ts&\"\nexport * from \"./menu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=081515c4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"081515c4\",\n  null\n  \n)\n\ncomponent.options.__file = \"menu.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./contextmenu.vue?vue&type=template&id=256dde9c&\"\nimport script from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextmenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./contextmenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextmenu.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=ts&\"","import {\n    ServerAsset,\n    ServerCircle,\n    ServerCircularToken,\n    ServerLine,\n    ServerMultiLine,\n    ServerRect,\n    ServerShape,\n    ServerText,\n} from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { Line } from \"@/game/shapes/line\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { Text } from \"@/game/shapes/text\";\n\nexport function createShapeFromDict(shape: ServerShape, dummy?: boolean) {\n    // TODO: is this dummy stuff actually needed, do we ever want to return the local shape?\n    if (dummy === undefined) dummy = false;\n    if (!dummy && layerManager.UUIDMap.has(shape.uuid)) return layerManager.UUIDMap.get(shape.uuid);\n\n    let sh: Shape;\n\n    // A fromJSON and toJSON on Shape would be cleaner but ts does not allow for static abstracts so yeah.\n\n    // Shape Type specifics\n\n    const refPoint = new GlobalPoint(shape.x, shape.y);\n    if (shape.type_ === \"rect\") {\n        const rect = <ServerRect>shape;\n        sh = new Rect(refPoint, rect.width, rect.height, rect.fill_colour, rect.stroke_colour, rect.uuid);\n    } else if (shape.type_ === \"circle\") {\n        const circ = <ServerCircle>shape;\n        sh = new Circle(refPoint, circ.radius, circ.fill_colour, circ.stroke_colour, circ.uuid);\n    } else if (shape.type_ === \"circulartoken\") {\n        const token = <ServerCircularToken>shape;\n        sh = new CircularToken(\n            refPoint,\n            token.radius,\n            token.text,\n            token.font,\n            token.fill_colour,\n            token.stroke_colour,\n            token.uuid,\n        );\n    } else if (shape.type_ === \"line\") {\n        const line = <ServerLine>shape;\n        sh = new Line(refPoint, new GlobalPoint(line.x2, line.y2), line.line_width, line.stroke_colour, line.uuid);\n    } else if (shape.type_ === \"multiline\") {\n        const multiline = <ServerMultiLine>shape;\n        sh = new MultiLine(\n            refPoint,\n            multiline.points.map(p => new GlobalPoint(p.x, p.y)),\n            multiline.line_width,\n            multiline.stroke_colour,\n            multiline.uuid,\n        );\n    } else if (shape.type_ === \"text\") {\n        const text = <ServerText>shape;\n        sh = new Text(refPoint, text.text, text.font, text.angle, text.fill_colour, text.stroke_colour, text.uuid);\n    } else if (shape.type_ === \"assetrect\") {\n        const asset = <ServerAsset>shape;\n        const img = new Image(asset.width, asset.height);\n        if (asset.src.startsWith(\"http\")) img.src = new URL(asset.src).pathname;\n        else img.src = asset.src;\n        sh = new Asset(img, refPoint, asset.width, asset.height, asset.uuid);\n        img.onload = () => {\n            layerManager.getLayer(shape.layer)!.invalidate(false);\n        };\n    } else {\n        return undefined;\n    }\n    sh.fromDict(shape);\n    return sh;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"","import tinycolor from \"tinycolor2\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { aurasFromServer, aurasToServer } from \"@/game/comm/conversion/aura\";\nimport { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport abstract class Shape {\n    // Used to create class instance from server shape data\n    abstract type: string;\n    // The unique ID of this shape\n    uuid: string;\n    // The layer the shape is currently on\n    layer!: string;\n\n    // A reference point regarding that specific shape's structure\n    refPoint: GlobalPoint;\n\n    // Fill colour of the shape\n    fillColour: string = \"#000\";\n    strokeColour: string = \"rgba(0,0,0,0)\";\n    // The optional name associated with the shape\n    name = \"Unknown shape\";\n\n    // Associated trackers/auras/owners\n    trackers: Tracker[] = [];\n    auras: Aura[] = [];\n    owners: string[] = [];\n\n    // Block light sources\n    visionObstruction = false;\n    // Prevent shapes from overlapping with this shape\n    movementObstruction = false;\n    // Does this shape represent a playable token\n    isToken = false;\n    // Show a highlight box\n    showHighlight = false;\n\n    // Mouseover annotation\n    annotation: string = \"\";\n\n    // Draw modus to use\n    globalCompositeOperation: string = \"source-over\";\n\n    // Additional options for specialized uses\n    options: Map<string, any> = new Map();\n\n    constructor(refPoint: GlobalPoint, fillColour?: string, strokeColour?: string, uuid?: string) {\n        this.refPoint = refPoint;\n        this.uuid = uuid || uuidv4();\n        if (fillColour !== undefined) this.fillColour = fillColour;\n        if (strokeColour !== undefined) this.strokeColour = strokeColour;\n    }\n\n    abstract getBoundingBox(): BoundingRect;\n\n    // If inWorldCoord is\n    abstract contains(point: GlobalPoint): boolean;\n\n    abstract center(): GlobalPoint;\n    abstract center(centerPoint: GlobalPoint): void;\n    abstract getCorner(point: GlobalPoint): string | undefined;\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        // for (const aura of this.auras) {\n        //     if (aura.value > 0) {\n        //         const auraCircle = new Circle(this.center(), aura.value);\n        //         if (auraCircle.visibleInCanvas(canvas)) return true;\n        //     }\n        // }\n        return false;\n    }\n\n    // Code to snap a shape to the grid\n    // This is shape dependent as the shape refPoints are shape specific in\n    abstract snapToGrid(): void;\n    abstract resizeToGrid(): void;\n    abstract resize(resizeDir: string, point: LocalPoint): void;\n\n    invalidate(skipLightUpdate: boolean) {\n        const l = layerManager.getLayer(this.layer);\n        if (l) l.invalidate(skipLightUpdate);\n    }\n\n    checkVisionSources() {\n        const self = this;\n        const obstructionIndex = gameStore.visionBlockers.indexOf(this.uuid);\n        let changeBV = false;\n        if (this.visionObstruction && obstructionIndex === -1) {\n            gameStore.visionBlockers.push(this.uuid);\n            changeBV = true;\n        } else if (!this.visionObstruction && obstructionIndex >= 0) {\n            gameStore.visionBlockers.splice(obstructionIndex, 1);\n            changeBV = true;\n        }\n        if (changeBV) gameStore.recalculateBV();\n\n        // Check if the visionsource auras are in the gameManager\n        this.auras.forEach(au => {\n            const ls = gameStore.visionSources;\n            const i = ls.findIndex(o => o.aura === au.uuid);\n            if (au.visionSource && i === -1) {\n                ls.push({ shape: self.uuid, aura: au.uuid });\n            } else if (!au.visionSource && i >= 0) {\n                ls.splice(i, 1);\n            }\n        });\n        // Check if anything in the gameManager referencing this shape is in fact still a visionsource\n        for (let i = gameStore.visionSources.length - 1; i >= 0; i--) {\n            const ls = gameStore.visionSources[i];\n            if (ls.shape === self.uuid) {\n                if (!self.auras.some(a => a.uuid === ls.aura && a.visionSource)) gameStore.visionSources.splice(i, 1);\n            }\n        }\n    }\n\n    setMovementBlock(blocksMovement: boolean) {\n        this.movementObstruction = blocksMovement || false;\n        const obstructionIndex = gameStore.movementblockers.indexOf(this.uuid);\n        if (this.movementObstruction && obstructionIndex === -1) gameStore.movementblockers.push(this.uuid);\n        else if (!this.movementObstruction && obstructionIndex >= 0)\n            gameStore.movementblockers.splice(obstructionIndex, 1);\n    }\n\n    setIsToken(isToken: boolean) {\n        this.isToken = isToken;\n        if (this.ownedBy()) {\n            const i = gameStore.ownedtokens.indexOf(this.uuid);\n            if (this.isToken && i === -1) gameStore.ownedtokens.push(this.uuid);\n            else if (!this.isToken && i >= 0) gameStore.ownedtokens.splice(i, 1);\n        }\n    }\n\n    ownedBy(username?: string) {\n        if (username === undefined) username = gameStore.username;\n        return gameStore.IS_DM || this.owners.includes(username);\n    }\n\n    abstract asDict(): ServerShape;\n    getBaseDict(): ServerShape {\n        return {\n            type_: this.type,\n            uuid: this.uuid,\n            x: this.refPoint.x,\n            y: this.refPoint.y,\n            layer: this.layer,\n            draw_operator: this.globalCompositeOperation,\n            movement_obstruction: this.movementObstruction,\n            vision_obstruction: this.visionObstruction,\n            auras: aurasToServer(this.auras),\n            trackers: this.trackers,\n            owners: this.owners,\n            fill_colour: this.fillColour,\n            stroke_colour: this.strokeColour,\n            name: this.name,\n            annotation: this.annotation,\n            is_token: this.isToken,\n            options: JSON.stringify([...this.options]),\n        };\n    }\n    fromDict(data: ServerShape) {\n        this.layer = data.layer;\n        this.globalCompositeOperation = data.draw_operator;\n        this.movementObstruction = data.movement_obstruction;\n        this.visionObstruction = data.vision_obstruction;\n        this.auras = aurasFromServer(data.auras);\n        this.trackers = data.trackers;\n        this.owners = data.owners;\n        this.isToken = data.is_token;\n        if (data.annotation) this.annotation = data.annotation;\n        if (data.name) this.name = data.name;\n        if (data.options) this.options = new Map(JSON.parse(data.options));\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        if (this.globalCompositeOperation !== undefined) ctx.globalCompositeOperation = this.globalCompositeOperation;\n        else ctx.globalCompositeOperation = \"source-over\";\n        if (this.showHighlight) {\n            const bbox = this.getBoundingBox();\n            ctx.strokeStyle = \"red\";\n            ctx.strokeRect(g2lx(bbox.topLeft.x) - 5, g2ly(bbox.topLeft.y) - 5, g2lz(bbox.w) + 10, g2lz(bbox.h) + 10);\n        }\n    }\n\n    drawAuras(ctx: CanvasRenderingContext2D) {\n        for (const aura of this.auras) {\n            if (aura.value === 0 && aura.dim === 0) return;\n            ctx.beginPath();\n\n            const loc = g2l(this.center());\n            const innerRange = g2lr(aura.value + aura.dim);\n\n            if (aura.dim === 0) ctx.fillStyle = aura.colour;\n            else {\n                const gradient = ctx.createRadialGradient(\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value),\n                    loc.x,\n                    loc.y,\n                    g2lr(aura.value + aura.dim),\n                );\n                const tc = tinycolor(aura.colour);\n                ctx.fillStyle = gradient;\n                gradient.addColorStop(0, aura.colour);\n                gradient.addColorStop(1, tc.setAlpha(0).toRgbString());\n            }\n            if (!aura.visionSource || aura.lastPath === undefined) {\n                ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                ctx.fill();\n            } else {\n                try {\n                    ctx.fill(aura.lastPath);\n                } catch (e) {\n                    ctx.arc(loc.x, loc.y, innerRange, 0, 2 * Math.PI);\n                    ctx.fill();\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.name,\n            has_img: false,\n            effects: [],\n            index: Infinity,\n        };\n    }\n\n    moveLayer(layer: string, sync: boolean) {\n        const oldLayer = layerManager.getLayer(this.layer);\n        const newLayer = layerManager.getLayer(layer);\n        if (oldLayer === undefined || newLayer === undefined) return;\n        this.layer = layer;\n        // Update layer shapes\n        oldLayer.shapes.splice(oldLayer.shapes.indexOf(this), 1);\n        newLayer.shapes.push(this);\n        // Revalidate layers  (light should at most be redone once)\n        oldLayer.invalidate(true);\n        newLayer.invalidate(false);\n        // Sync!\n        if (sync) socket.emit(\"Shape.Layer.Change\", { uuid: this.uuid, layer });\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.note !== null)?_c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('span',{on:{\"click\":function($event){_vm.$refs.title.select()}}},[_c('i',{staticClass:\"fas fa-pencil-alt\",staticStyle:{\"font-size\":\"15px\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.title),expression:\"note.title\"}],ref:\"title\",domProps:{\"value\":(_vm.note.title)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"title\", $event.target.value)}}}),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note.text),expression:\"note.text\"}],ref:\"textarea\",style:({'height': _vm.calcHeight()}),domProps:{\"value\":(_vm.note.text)},on:{\"change\":_vm.updateNote,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.note, \"text\", $event.target.value)}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.removeNote}},[_c('i',{staticClass:\"far fa-trash-alt\"}),_vm._v(\" Remove\\n    \")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"","\n\n\n\n\nimport SelectContext from \"@/game/ui/tools/selectcontext.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\nimport SelectionInfo from \"../selection/selection_info.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint, LocalPoint, Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lx, g2ly, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\nexport enum SelectOperations {\n    Noop,\n    Resize,\n    Drag,\n    GroupSelect,\n}\n\nconst start = new GlobalPoint(-1000, -1000);\n\n@Component({\n    components: {\n        SelectContext,\n    },\n})\nexport default class SelectTool extends Tool {\n    name = \"Select\";\n    showContextMenu = false;\n    active = false;\n\n    mode = SelectOperations.Noop;\n    resizeDirection = \"\";\n    deltaChanged = false;\n    // Because we never drag from the asset's (0, 0) coord and want a smoother drag experience\n    // we keep track of the actual offset within the asset.\n    dragRay = new Ray<LocalPoint>(new LocalPoint(0, 0), new Vector(0, 0));\n    selectionStartPoint = start;\n    selectionHelper = new Rect(start, 0, 0);\n    created() {\n        this.selectionHelper.globalCompositeOperation = \"source-over\";\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (!this.selectionHelper.owners.includes(gameStore.username)) {\n            this.selectionHelper.owners.push(gameStore.username);\n        }\n\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        let hit = false;\n        // The selectionStack allows for lower positioned objects that are selected to have precedence during overlap.\n        let selectionStack;\n        if (!layer.selection.length) selectionStack = layer.shapes;\n        else selectionStack = layer.shapes.concat(layer.selection);\n        for (let i = selectionStack.length - 1; i >= 0; i--) {\n            const shape = selectionStack[i];\n\n            if (!shape.ownedBy()) continue;\n\n            const corner = shape.getBoundingBox().getCorner(globalMouse);\n\n            // Resize case, a corner is selected\n            if (corner !== undefined) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                this.mode = SelectOperations.Resize;\n                this.resizeDirection = corner;\n                layer.invalidate(true);\n                hit = true;\n                break;\n\n                // Drag case, a shape is selected\n            } else if (shape.contains(globalMouse)) {\n                const selection = shape;\n                if (layer.selection.indexOf(selection) === -1) {\n                    layer.selection = [selection];\n                    getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n                }\n                this.mode = SelectOperations.Drag;\n                const localRefPoint = g2l(selection.refPoint);\n                this.dragRay = new Ray<LocalPoint>(localRefPoint, mouse.subtract(localRefPoint));\n                layer.invalidate(true);\n                hit = true;\n                break;\n            }\n        }\n\n        // GroupSelect case, draw a selection box to select multiple shapes\n        if (!hit) {\n            this.mode = SelectOperations.GroupSelect;\n            for (const selection of layer.selection) getRef<SelectionInfo>(\"selectionInfo\").shape = selection;\n\n            this.selectionStartPoint = globalMouse;\n\n            this.selectionHelper.refPoint = this.selectionStartPoint;\n            this.selectionHelper.w = 0;\n            this.selectionHelper.h = 0;\n\n            layer.selection = [this.selectionHelper];\n            layer.invalidate(true);\n        }\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        // if (!this.active) return;   we require mousemove for the resize cursor\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n        this.deltaChanged = false;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            // Currently draw on active layer\n            const endPoint = globalMouse;\n\n            this.selectionHelper.w = Math.abs(endPoint.x - this.selectionStartPoint.x);\n            this.selectionHelper.h = Math.abs(endPoint.y - this.selectionStartPoint.y);\n            this.selectionHelper.refPoint = new GlobalPoint(\n                Math.min(this.selectionStartPoint.x, endPoint.x),\n                Math.min(this.selectionStartPoint.y, endPoint.y),\n            );\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            const og = g2l(layer.selection[layer.selection.length - 1].refPoint);\n            const origin = og.add(this.dragRay.direction);\n            let delta = mouse.subtract(origin).multiply(1 / gameStore.zoomFactor);\n            const ogDelta = delta;\n            if (this.mode === SelectOperations.Drag) {\n                // If we are on the tokens layer do a movement block check.\n                if (layer.name === \"tokens\" && !(event.shiftKey && gameStore.IS_DM)) {\n                    for (const sel of layer.selection) {\n                        if (sel.uuid === this.selectionHelper.uuid) continue; // the selection helper should not be treated as a real shape.\n                        delta = calculateDelta(delta, sel);\n                        if (delta !== ogDelta) this.deltaChanged = true;\n                    }\n                }\n                // Actually apply the delta on all shapes\n                for (const sel of layer.selection) {\n                    sel.refPoint = sel.refPoint.add(delta);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                }\n                layer.invalidate(false);\n            } else if (this.mode === SelectOperations.Resize) {\n                for (const sel of layer.selection) {\n                    sel.resize(this.resizeDirection, mouse);\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: true });\n                    }\n                    layer.invalidate(false);\n                }\n            } else {\n                for (const sel of layer.selection) {\n                    const bb = sel.getBoundingBox();\n                    const gm = globalMouse;\n                    if (bb.inCorner(gm, \"nw\")) {\n                        document.body.style.cursor = \"nw-resize\";\n                    } else if (bb.inCorner(gm, \"ne\")) {\n                        document.body.style.cursor = \"ne-resize\";\n                    } else if (bb.inCorner(gm, \"se\")) {\n                        document.body.style.cursor = \"se-resize\";\n                    } else if (bb.inCorner(gm, \"sw\")) {\n                        document.body.style.cursor = \"sw-resize\";\n                    } else {\n                        document.body.style.cursor = \"default\";\n                    }\n                }\n            }\n        } else {\n            document.body.style.cursor = \"default\";\n        }\n    }\n    onMouseUp(e: MouseEvent): void {\n        if (!this.active) return;\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n\n        if (this.mode === SelectOperations.GroupSelect) {\n            layer.clearSelection();\n            layer.shapes.forEach(shape => {\n                if (shape === this.selectionHelper) return;\n                const bbox = shape.getBoundingBox();\n                if (!shape.ownedBy()) return;\n                if (\n                    this.selectionHelper!.refPoint.x <= bbox.topRight.x &&\n                    this.selectionHelper!.refPoint.x + this.selectionHelper!.w >= bbox.topLeft.x &&\n                    this.selectionHelper!.refPoint.y <= bbox.botLeft.y &&\n                    this.selectionHelper!.refPoint.y + this.selectionHelper!.h >= bbox.topLeft.y\n                ) {\n                    layer.selection.push(shape);\n                }\n            });\n\n            // Push the selection helper as the last element of the selection\n            // This makes sure that it will be the first one to be hit in the hit detection onMouseDown\n            if (layer.selection.length > 0) layer.selection.push(this.selectionHelper);\n\n            layer.invalidate(true);\n        } else if (layer.selection.length) {\n            layer.selection.forEach(sel => {\n                if (this.mode === SelectOperations.Drag) {\n                    if (\n                        this.dragRay.origin!.x === g2lx(sel.refPoint.x) &&\n                        this.dragRay.origin!.y === g2ly(sel.refPoint.y)\n                    )\n                        return;\n\n                    if (gameStore.useGrid && !e.altKey && !this.deltaChanged) {\n                        sel.snapToGrid();\n                    }\n\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n                if (this.mode === SelectOperations.Resize) {\n                    if (gameStore.useGrid && !e.altKey) {\n                        sel.resizeToGrid();\n                    }\n                    if (sel !== this.selectionHelper) {\n                        if (sel.visionObstruction) gameStore.recalculateBV();\n                        socket.emit(\"Shape.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                    }\n                    layer.invalidate(false);\n                }\n            });\n        }\n        this.mode = SelectOperations.Noop;\n        this.active = false;\n    }\n    onContextMenu(event: MouseEvent) {\n        if (layerManager.getLayer() === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        const layer = layerManager.getLayer()!;\n        const mouse = getMouse(event);\n        const globalMouse = l2g(mouse);\n\n        for (const shape of layer.selection) {\n            if (shape.contains(globalMouse)) {\n                layer.selection = [shape];\n                getRef<SelectionInfo>(\"selectionInfo\").shape = shape;\n                layer.invalidate(true);\n                (<any>this.$parent.$refs.shapecontext).open(event, shape);\n                return;\n            }\n        }\n        (<any>this.$refs.selectcontext).open(event);\n    }\n}\n","import { Ray, Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n// First go through each shape in the selection and see if the delta has to be truncated due to movement blockers\n\n// This is definitely super convoluted and inefficient but I was tired and really wanted the smooth wall sliding collision stuff to work\n// And it does now, so hey ¯\\_(ツ)_/¯\nexport function calculateDelta(delta: Vector, sel: Shape, done?: string[]) {\n    if (done === undefined) done = [];\n    const ogSelBBox = sel.getBoundingBox();\n    const newSelBBox = ogSelBBox.offset(delta);\n    let refine = false;\n    for (const movementBlocker of gameStore.movementblockers) {\n        if (done.includes(movementBlocker)) continue;\n        const blocker = layerManager.UUIDMap.get(movementBlocker)!;\n        const blockerBBox = blocker.getBoundingBox();\n        let found = blockerBBox.intersectsWithInner(newSelBBox);\n        if (!found) {\n            // This is an edge case, precalculating the rays is not worth in this case.\n            const ray = Ray.fromPoints(ogSelBBox.topLeft.add(delta.normalize()), newSelBBox.topLeft);\n            const invDir = ray.direction.inverse();\n            const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n            found = blockerBBox.intersectP(ray, invDir, dirIsNegative).hit;\n        }\n        // Check if the bounding box of our destination would intersect with the bounding box of the movementblocker\n        if (found) {\n            const bCenter = blockerBBox.center();\n            const sCenter = ogSelBBox.center();\n\n            const d = sCenter.subtract(bCenter);\n            const ux = new Vector(1, 0);\n            const uy = new Vector(0, 1);\n            let dx = d.dot(ux);\n            let dy = d.dot(uy);\n            if (dx > blockerBBox.w / 2) dx = blockerBBox.w / 2;\n            if (dx < -blockerBBox.w / 2) dx = -blockerBBox.w / 2;\n            if (dy > blockerBBox.h / 2) dy = blockerBBox.h / 2;\n            if (dy < -blockerBBox.h / 2) dy = -blockerBBox.h / 2;\n\n            // Closest point / intersection point between the two bboxes.  Not the delta intersect!\n            const p = bCenter.add(ux.multiply(dx)).add(uy.multiply(dy));\n\n            if (p.x === ogSelBBox.topLeft.x || p.x === ogSelBBox.topRight.x) delta = new Vector(0, delta.y);\n            else if (p.y === ogSelBBox.topLeft.y || p.y === ogSelBBox.botLeft.y) delta = new Vector(delta.x, 0);\n            else {\n                if (p.x < ogSelBBox.topLeft.x) delta = new Vector(p.x - ogSelBBox.topLeft.x, delta.y);\n                else if (p.x > ogSelBBox.topRight.x) delta = new Vector(p.x - ogSelBBox.topRight.x, delta.y);\n                else if (p.y < ogSelBBox.topLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.topLeft.y);\n                else if (p.y > ogSelBBox.botLeft.y) delta = new Vector(delta.x, p.y - ogSelBBox.botLeft.y);\n            }\n            refine = true;\n            done.push(movementBlocker);\n            break;\n        }\n    }\n    if (refine) delta = calculateDelta(delta, sel, done);\n    return delta;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"","import { socket } from \"@/game/api/socket\";\nimport { gameStore } from \"@/game/store\";\n\nexport function sendClientOptions() {\n    socket.emit(\"Client.Options.Set\", {\n        locationOptions: {\n            panX: gameStore.panX,\n            panY: gameStore.panY,\n            zoomFactor: gameStore.zoomFactor,\n        },\n    });\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetFile, AssetList } from \"@/core/comm/types\";\nimport { alphSort } from \"@/core/utils\";\n\n@Component({\n    name: \"asset-node\",\n})\nexport default class AssetNode extends Vue {\n    @Prop() asset!: AssetList;\n\n    showImage = null;\n    get folders(): string[] {\n        return Object.keys(this.asset)\n            .filter(el => ![\"__files\"].includes(el))\n            .sort(alphSort);\n    }\n\n    get files(): AssetFile[] {\n        if (this.asset.__files)\n            return (<AssetFile[]>this.asset.__files)\n                .concat()\n                .sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\n        return [];\n    }\n\n    toggle(event: { target: HTMLElement }) {\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < event.target.children.length; i++) {\n            const el = <HTMLElement>event.target.children[i];\n            el.style.display = el.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n\n    dragStart(event: DragEvent, imageSource: string) {\n        if (event === null || event.dataTransfer === null) return;\n        const img = (<HTMLElement>event.target).querySelector(\".preview\")!;\n        event.dataTransfer.setDragImage(img, 0, 0);\n        event.dataTransfer.setData(\"text/plain\", imageSource);\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"},on:{\"mouseleave\":_vm.mouseleave}},[_c('menu-bar'),_c('div',{attrs:{\"id\":\"board\"}},[(_vm.ready.manager)?[_c('tool-bar',{ref:\"tools\"})]:_vm._e(),_c('div',{attrs:{\"id\":\"layers\"},on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"mousemove\":_vm.mousemove,\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.contextmenu($event)},\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.drop}}),(_vm.layers.length > 1)?_c('div',{attrs:{\"id\":\"layerselect\"}},[_c('ul',_vm._l((_vm.layers),function(layer){return _c('li',{key:layer.name,class:{ 'layer-selected': layer === _vm.selectedLayer },on:{\"click\":function($event){_vm.selectLayer(layer)}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(layer))])])}))]):_vm._e()],2),_c('selection-info',{ref:\"selectionInfo\"}),_c('initiative-dialog',{ref:\"initiative\",attrs:{\"id\":\"initiativedialog\"}}),_c('note-dialog',{ref:\"note\"}),_c('zoom-slider',{attrs:{\"id\":\"zoomer\",\"height\":6,\"width\":200,\"min\":0.1,\"max\":5.0,\"interval\":0.1,\"dot-width\":8,\"dot-height\":20,\"tooltip-dir\":'bottom',\"tooltip\":'hover',\"formatter\":_vm.zoomFactor.toFixed(1),\"slider-style\":{'border-radius': '15%'},\"bg-style\":{'background-color': '#fff', 'box-shadow': '0.5px 0.5px 3px 1px rgba(0, 0, 0, .36)'},\"process-style\":{'background-color': '#fff'}},model:{value:(_vm.zoomFactor),callback:function ($$v) {_vm.zoomFactor=$$v},expression:\"zoomFactor\"}}),_c('prompt-dialog',{ref:\"prompt\"}),_c('confirm-dialog',{ref:\"confirm\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=template&id=256b40b9&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"ContextMenu\",style:({left:_vm.left, top:_vm.top}),attrs:{\"tabindex\":\"-1\"},on:{\"blur\":function($event){_vm.$emit('close')}}},[_c('ul',[_vm._t(\"default\")],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=template&id=256dde9c&\"","// import Vuex from \"vuex\";\nimport { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { rootStore } from \"@/store\";\n\nexport interface AssetState {\n    root: number;\n    files: number[];\n    folders: number[];\n    idMap: Map<number, Asset>;\n    selected: number[];\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"assets\", namespaced: true })\nclass AssetStore extends VuexModule {\n    root = -1;\n    files: number[] = [];\n    folders: number[] = [];\n    idMap: Map<number, Asset> = new Map();\n    selected: number[] = [];\n\n    @Mutation\n    clear() {\n        this.folders = [];\n        this.files = [];\n    }\n\n    @Mutation\n    clearSelected() {\n        this.selected = [];\n    }\n\n    @Mutation\n    setRoot(root: number) {\n        this.root = root;\n    }\n\n    @Mutation\n    isFile(inode: number): boolean {\n        return this.files.includes(inode);\n    }\n}\n\nexport const assetStore = getModule(AssetStore);\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class ShapeContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n    shape: Shape | null = null;\n    get activeLayer(): string {\n        const layer = layerManager.getLayer();\n        return layer === undefined ? \"\" : layer.name;\n    }\n    open(event: MouseEvent, shape: Shape) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.shape = shape;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n        this.shape = null;\n    }\n    getLayers() {\n        return layerManager.layers.filter(l => l.selectable && (gameStore.IS_DM || l.playerEditable));\n    }\n    getActiveLayer() {\n        return layerManager.getLayer();\n    }\n    getInitiativeWord() {\n        if (this.shape === null) return \"\";\n        return getRef<Initiative>(\"initiative\").contains(this.shape.uuid) ? \"Show\" : \"Add\";\n    }\n    setLayer(newLayer: string) {\n        if (this.shape === null) return;\n        this.shape.moveLayer(newLayer, true);\n        this.close();\n    }\n    moveToBack() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, 0, true);\n        this.close();\n    }\n    moveToFront() {\n        if (this.shape === null) return;\n        const layer = this.getActiveLayer()!;\n        layer.moveShapeOrder(this.shape, layer.shapes.length - 1, true);\n        this.close();\n    }\n    addInitiative() {\n        if (this.shape === null) return;\n        const initiative = getRef<Initiative>(\"initiative\");\n        if (!initiative.contains(this.shape.uuid)) initiative.addInitiative(this.shape.getInitiativeRepr());\n        initiative.visible = true;\n        this.close();\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shape !== null)?_c('div',[_c('div',{attrs:{\"id\":\"selection-menu\"}},[_c('div',{attrs:{\"id\":\"selection-edit-button\"},on:{\"click\":_vm.openEditDialog}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('div',{attrs:{\"id\":\"selection-name\"}},[_vm._v(_vm._s(_vm.shape.name))]),_c('div',{attrs:{\"id\":\"selection-trackers\"}},[_vm._l((_vm.shape.trackers),function(tracker){return (tracker.name !== '' || tracker.value !== 0)?[_c('div',{key:'name-' + tracker.uuid},[_vm._v(_vm._s(tracker.name))]),_c('div',{key:'value-' + tracker.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(tracker, false)}}},[(tracker.maxvalue === 0)?[_vm._v(_vm._s(tracker.value))]:[_vm._v(_vm._s(tracker.value)+\" / \"+_vm._s(tracker.maxvalue))]],2)]:_vm._e()})],2),_c('div',{attrs:{\"id\":\"selection-auras\"}},[_vm._l((_vm.shape.auras),function(aura){return (aura.name !== '' || aura.value !== 0)?[_c('div',{key:'name-' + aura.uuid},[_vm._v(_vm._s(aura.name))]),_c('div',{key:'value-' + aura.uuid,staticClass:\"selection-tracker-value\",on:{\"click\":function($event){_vm.changeValue(aura, true)}}},[(aura.dim === 0)?[_vm._v(_vm._s(aura.value))]:[_vm._v(_vm._s(aura.value)+\" / \"+_vm._s(aura.dim))]],2)]:_vm._e()})],2)]),_c('edit-dialog',{ref:\"editDialog\",attrs:{\"shape\":_vm.shape}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=ts&\"","import { Layer } from \"@/game/layers/layer\";\nimport { gameStore } from \"@/game/store\";\n\nexport class GridLayer extends Layer {\n    invalidate(): void {\n        this.valid = false;\n    }\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            this.drawGrid();\n        }\n    }\n    drawGrid(): void {\n        const ctx = this.ctx;\n        this.clear();\n        ctx.beginPath();\n\n        const gs = gameStore.gridSize;\n\n        for (let i = 0; i < this.width; i += gs * gameStore.zoomFactor) {\n            ctx.moveTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, 0);\n            ctx.lineTo(i + (gameStore.panX % gs) * gameStore.zoomFactor, this.height);\n            ctx.moveTo(0, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n            ctx.lineTo(this.width, i + (gameStore.panY % gs) * gameStore.zoomFactor);\n        }\n\n        ctx.strokeStyle = gameStore.gridColour;\n        ctx.lineWidth = 1;\n        ctx.stroke();\n        this.valid = true;\n    }\n}\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport { AssetState } from \"@/assetManager/store\";\nimport { CoreState } from \"@/core/store\";\nimport { GameState } from \"@/game/store\";\n\nVue.use(Vuex);\n\nexport interface RootState {\n    assets: AssetState;\n    core: CoreState;\n    game: GameState;\n}\n\nexport const rootStore = new Vuex.Store<RootState>({});\n","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./colorpicker.vue?vue&type=style&index=0&id=b4f2c0b0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4f2c0b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"colorpicker.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=256b40b9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=1&id=256b40b9&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{ref:\"activeComponent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=196415f0&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import { GlobalPoint, Ray } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lr, g2lx, g2ly, g2lz, getUnitDistance } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class FOWLayer extends Layer {\n    isVisionLayer: boolean = true;\n    preFogShapes: Shape[] = [];\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        super.addShape(shape, sync, temporary);\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            this.preFogShapes.push(shape);\n        }\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (shape.options.has(\"preFogShape\") && shape.options.get(\"preFogShape\")) {\n            const idx = this.preFogShapes.findIndex(s => s.uuid === shape.uuid);\n            this.preFogShapes.splice(idx, 1);\n        }\n        super.removeShape(shape, sync, temporary);\n    }\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (Settings.skipLightFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            const originalOperation = ctx.globalCompositeOperation;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            const dctx = layerManager.getLayer(\"draw\")!.ctx;\n            if (Settings.drawAngleLines || Settings.drawFirstLightHit) {\n                dctx.clearRect(0, 0, dctx.canvas.width, dctx.canvas.height);\n            }\n\n            // At all times provide a minimal vision range to prevent losing your tokens in fog.\n            if (gameStore.fullFOW && layerManager.hasLayer(\"tokens\")) {\n                layerManager.getLayer(\"tokens\")!.shapes.forEach(sh => {\n                    if (!sh.ownedBy() || !sh.isToken) return;\n                    const bb = sh.getBoundingBox();\n                    const lcenter = g2l(sh.center());\n                    const alm = 0.8 * g2lz(bb.w);\n                    ctx.beginPath();\n                    ctx.arc(lcenter.x, lcenter.y, alm, 0, 2 * Math.PI);\n                    const gradient = ctx.createRadialGradient(lcenter.x, lcenter.y, alm / 2, lcenter.x, lcenter.y, alm);\n                    gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                    gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n            }\n\n            // First cut out all the light sources\n            for (const light of gameStore.visionSources) {\n                const shape = layerManager.UUIDMap.get(light.shape);\n                if (shape === undefined) continue;\n                const aura = shape.auras.find(a => a.uuid === light.aura);\n                if (aura === undefined) continue;\n\n                const auraLength = getUnitDistance(aura.value + aura.dim);\n                const center = shape.center();\n                const lcenter = g2l(center);\n\n                const auraCircle = new Circle(center, auraLength);\n                if (!auraCircle.visibleInCanvas(ctx.canvas)) continue;\n\n                let lastArcAngle = -1;\n\n                const path = new Path2D();\n                path.moveTo(lcenter.x, lcenter.y);\n                let firstPoint: GlobalPoint;\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 180) * Math.PI) {\n                    const anglePoint = new GlobalPoint(\n                        center.x + auraLength * Math.cos(angle),\n                        center.y + auraLength * Math.sin(angle),\n                    );\n                    if (Settings.drawAngleLines) {\n                        dctx!.beginPath();\n                        dctx!.moveTo(g2lx(center.x), g2ly(center.y));\n                        dctx!.lineTo(g2lx(anglePoint.x), g2ly(anglePoint.y));\n                        dctx!.stroke();\n                    }\n\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = Ray.fromPoints(center, anglePoint);\n                    const hitResult = gameStore.BV.intersect(lightRay);\n\n                    if (angle === 0) firstPoint = hitResult.hit ? hitResult.intersect : anglePoint;\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                            // Draw a line from the last non arc location back to the arc\n                            const dest = g2l(anglePoint);\n                            ctx.lineTo(dest.x, dest.y);\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    path.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle === -1) path.lineTo(g2lx(firstPoint!.x), g2ly(firstPoint!.y));\n                else path.arc(lcenter.x, lcenter.y, g2lr(aura.value + aura.dim), lastArcAngle, 2 * Math.PI);\n\n                if (gameStore.fullFOW) {\n                    if (aura.dim > 0) {\n                        // Fill the light aura with a radial dropoff towards the outside.\n                        const gradient = ctx.createRadialGradient(\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value),\n                            lcenter.x,\n                            lcenter.y,\n                            g2lr(aura.value + aura.dim),\n                        );\n                        gradient.addColorStop(0, \"rgba(0, 0, 0, 1)\");\n                        gradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n                        ctx.fillStyle = gradient;\n                    } else {\n                        ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n                    }\n                    ctx.fill(path);\n                }\n\n                aura.lastPath = path;\n            }\n\n            // At the DM Side due to opacity of the two fow layers, it looks strange if we just render them on top of eachother like players.\n            if (gameStore.fowLOS) {\n                ctx.globalCompositeOperation = \"source-in\";\n                ctx.drawImage(layerManager.getLayer(\"fow-players\")!.canvas, 0, 0);\n            }\n\n            for (const preShape of this.preFogShapes) {\n                if (!preShape.visibleInCanvas(this.canvas)) continue;\n                const ogComposite = preShape.globalCompositeOperation;\n                if (!gameStore.fullFOW) {\n                    if (preShape.globalCompositeOperation === \"source-over\")\n                        preShape.globalCompositeOperation = \"destination-out\";\n                    else if (preShape.globalCompositeOperation === \"destination-out\")\n                        preShape.globalCompositeOperation = \"source-over\";\n                }\n                preShape.draw(ctx);\n                preShape.globalCompositeOperation = ogComposite;\n            }\n\n            if (gameStore.fullFOW) {\n                ctx.globalCompositeOperation = \"source-out\";\n                ctx.fillStyle = getFogColour();\n                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            }\n\n            super.draw(false);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=script&lang=ts&\"","import { ServerCircle } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2l, g2lz, l2g } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Circle extends Shape {\n    type = \"circle\";\n    r: number;\n    constructor(center: GlobalPoint, r: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(center, fillColour, strokeColour, uuid);\n        this.r = r || 1;\n    }\n    asDict(): ServerCircle {\n        // const base = <ServerCircle>this.getBaseDict();\n        // base.r = this.r;\n        // base.border = this.border;\n        // return base;\n        return Object.assign(this.getBaseDict(), {\n            radius: this.r,\n        });\n    }\n    fromDict(data: ServerCircle) {\n        super.fromDict(data);\n        this.r = data.radius;\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(this.refPoint.x - this.r, this.refPoint.y - this.r),\n            this.r * 2,\n            this.r * 2,\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const loc = g2l(this.refPoint);\n        ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = g2lz(5);\n            ctx.strokeStyle = this.strokeColour;\n            ctx.arc(loc.x, loc.y, g2lz(this.r), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n    }\n    contains(point: GlobalPoint): boolean {\n        return (point.x - this.refPoint.x) ** 2 + (point.y - this.refPoint.y) ** 2 < this.r ** 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        return false; // TODO\n    }\n    getCorner(point: GlobalPoint) {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint;\n        this.refPoint = centerPoint;\n    }\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        let targetX;\n        let targetY;\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetX = Math.round(this.refPoint.x / gs) * gs;\n        } else {\n            targetX = Math.round((this.refPoint.x - gs / 2) / gs) * gs + this.r;\n        }\n        if (((2 * this.r) / gs) % 2 === 0) {\n            targetY = Math.round(this.refPoint.y / gs) * gs;\n        } else {\n            targetY = Math.round((this.refPoint.y - gs / 2) / gs) * gs + this.r;\n        }\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.r = Math.max(Math.round(this.r / gs) * gs, gs / 2);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        const diff = l2g(point).subtract(this.refPoint);\n        this.r = Math.sqrt(Math.pow(diff.length(), 2) / 2);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class MapTool extends Tool {\n    name = \"Map\";\n    active = false;\n    xCount = 3;\n    yCount = 3;\n    startPoint: GlobalPoint | null = null;\n    rect: Rect | null = null;\n\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n\n        this.startPoint = l2g(getMouse(event));\n        this.rect = new Rect(this.startPoint.clone(), 0, 0, \"rgba(0,0,0,0)\", \"black\");\n        layer.addShape(this.rect, false, false);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.rect === null || this.startPoint === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        const endPoint = l2g(getMouse(event));\n\n        this.rect.w = Math.abs(endPoint.x - this.startPoint.x);\n        this.rect.h = Math.abs(endPoint.y - this.startPoint.y);\n        this.rect.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n        this.rect.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.rect === null) return;\n        const layer = layerManager.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        if (layer.selection.length !== 1) {\n            layer.removeShape(this.rect, false, false);\n            return;\n        }\n\n        const w = this.rect.w;\n        const h = this.rect.h;\n        const sel = layer.selection[0];\n\n        if (sel instanceof BaseRect) {\n            sel.w *= (this.xCount * gameStore.gridSize) / w;\n            sel.h *= (this.yCount * gameStore.gridSize) / h;\n        }\n\n        layer.removeShape(this.rect, false, false);\n    }\n}\n","import { render, staticRenderFns } from \"./load.vue?vue&type=template&id=ff095222&\"\nimport script from \"./load.vue?vue&type=script&lang=ts&\"\nexport * from \"./load.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"load.vue\"\nexport default component.exports","import Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class PanTool extends Tool {\n    name = \"Pan\";\n    panStart = new LocalPoint(0, 0);\n    active = false;\n\n    onMouseDown(event: MouseEvent) {\n        this.panStart = getMouse(event);\n        this.active = true;\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active) return;\n        const mouse = getMouse(event);\n        const distance = mouse.subtract(this.panStart).multiply(1 / gameStore.zoomFactor);\n        gameStore.increasePanX(Math.round(distance.x));\n        gameStore.increasePanY(Math.round(distance.y));\n        this.panStart = mouse;\n        layerManager.invalidate();\n    }\n    onMouseUp(event: MouseEvent) {\n        this.active = false;\n        sendClientOptions();\n    }\n}\n","import { render, staticRenderFns } from \"./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"\nimport script from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nexport * from \"./selectcontext.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selectcontext.vue?vue&type=style&index=0&id=44a31e42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a31e42\",\n  null\n  \n)\n\ncomponent.options.__file = \"selectcontext.vue\"\nexport default component.exports","import Vue from \"vue\";\n\nimport { app } from \"@/main\";\n\n// Reference: https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport function capitalize(text: string) {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\nexport function alphSort(a: string, b: string) {\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    else return 1;\n}\n\nexport function getHTMLFont(element: HTMLElement) {\n    let font = element.style.font;\n    while (font === null && element.parentElement !== null) {\n        element = element.parentElement;\n        font = element.style.font;\n    }\n    if (font === null) font = window.getComputedStyle(document.body).getPropertyValue(\"font\");\n    return font;\n}\n\nexport function getHTMLTextWidth(text: string, font: string): number {\n    let fakeElement = <HTMLCanvasElement>document.getElementById(\"emptycanvas\");\n    if (fakeElement === null) {\n        fakeElement = document.createElement(\"canvas\");\n        fakeElement.id = \"emptycanvas\";\n        fakeElement.style.display = \"\";\n        document.body.appendChild(fakeElement);\n    }\n    const ctx = fakeElement.getContext(\"2d\")!;\n    ctx.font = font;\n    return Math.ceil(ctx.measureText(text).width);\n}\n\nexport function partition<T>(arr: T[], predicate: (n: T) => boolean) {\n    const ret: T[][] = [[], []];\n    arr.forEach(n => (predicate(n) ? ret[1].push(n) : ret[0].push(n)));\n    return ret;\n}\n\nexport function calcFontScale(ctx: CanvasRenderingContext2D, text: string, width: number, height: number) {\n    const points = Number(ctx.font.split(\"px\")[0]) * 0.2;\n    const fontWidth = ctx.measureText(text).width;\n    return Math.min(width / fontWidth, height / points);\n}\n\nexport function fixedEncodeURIComponent(str: string) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, c => {\n        return \"%\" + c.charCodeAt(0).toString(16);\n    });\n}\n\nexport class OrderedMap<K, V> {\n    keys: K[] = [];\n    values: V[] = [];\n    get(key: K) {\n        return this.values[this.keys.indexOf(key)];\n    }\n    getIndexValue(idx: number) {\n        return this.values[idx];\n    }\n    getIndexKey(idx: number) {\n        return this.keys[idx];\n    }\n    set(key: K, value: V) {\n        this.keys.push(key);\n        this.values.push(value);\n    }\n    indexOf(element: K) {\n        return this.keys.indexOf(element);\n    }\n    remove(element: K) {\n        const idx = this.indexOf(element);\n        this.keys.splice(idx, 1);\n        this.values.splice(idx, 1);\n    }\n}\n\nexport function getComponent<T extends Vue>(): T {\n    return <T>app.$children[0].$refs.activeComponent;\n}\n\nexport function getRef<T extends Vue>(ref: string): T {\n    const active = <Vue>app.$children[0].$refs.activeComponent;\n    return <T>active.$refs[ref];\n}\n","import { render, staticRenderFns } from \"./contextMenu.vue?vue&type=template&id=d4f084a4&\"\nimport script from \"./contextMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./contextMenu.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"contextMenu.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Edit asset\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('label',{attrs:{\"for\":\"shapeselectiondialog-name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.name),expression:\"shape.name\"}],staticStyle:{\"grid-column\":\"numerator / end\"},attrs:{\"type\":\"text\",\"id\":\"shapeselectiondialog-name\"},domProps:{\"value\":(_vm.shape.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shape, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-istoken\"}},[_vm._v(\"Is a token\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-istoken\"},domProps:{\"checked\":_vm.shape.isToken},on:{\"click\":_vm.setToken}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-visionblocker\"}},[_vm._v(\"Blocks vision/light\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shape.visionObstruction),expression:\"shape.visionObstruction\"}],staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-visionblocker\"},domProps:{\"checked\":Array.isArray(_vm.shape.visionObstruction)?_vm._i(_vm.shape.visionObstruction,null)>-1:(_vm.shape.visionObstruction)},on:{\"change\":[function($event){var $$a=_vm.shape.visionObstruction,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.shape, \"visionObstruction\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.shape, \"visionObstruction\", $$c)}},_vm.setVisionBlocker]}}),_c('label',{attrs:{\"for\":\"shapeselectiondialog-moveblocker\"}},[_vm._v(\"Blocks movement\")]),_c('input',{staticStyle:{\"grid-column-start\":\"remove\",\"width\":\"15px\",\"height\":\"15px\"},attrs:{\"type\":\"checkbox\",\"id\":\"shapeselectiondialog-moveblocker\"},domProps:{\"checked\":_vm.shape.movementObstruction},on:{\"click\":_vm.setMovementBlocker}}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Access\")]),_vm._l((_vm.shape.owners),function(owner){return [_c('input',{key:owner,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":owner},on:{\"change\":function($event){_vm.updateOwner($event, owner)}}}),(owner !== '')?_c('div',{key:'remove-' + owner,staticStyle:{\"grid-column-start\":\"remove\"},on:{\"click\":function($event){_vm.removeOwner(owner)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Trackers\")]),_vm._l((_vm.shape.trackers),function(tracker){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(tracker.name),expression:\"tracker.name\"}],key:'name-'+tracker.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(tracker.name)},on:{\"change\":function($event){_vm.updateShape(false);},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.value),expression:\"tracker.value\",modifiers:{\"number\":true}}],key:'value-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.value)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+tracker.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(tracker.maxvalue),expression:\"tracker.maxvalue\",modifiers:{\"number\":true}}],key:'maxvalue-'+tracker.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(tracker.maxvalue)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(tracker, \"maxvalue\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'sspan-'+tracker.uuid}),_c('div',{key:'visibility-'+tracker.uuid,style:({opacity: tracker.visible ? 1.0 : 0.3}),on:{\"click\":function($event){tracker.visible = !tracker.visible;_vm.updateShape(false)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('span',{key:'tspan-'+tracker.uuid}),(tracker.name !== '' || tracker.value !== 0)?_c('div',{key:'remove-'+tracker.uuid,on:{\"click\":function($event){_vm.removeTracker(tracker.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Auras\")]),_vm._l((_vm.shape.auras),function(aura){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(aura.name),expression:\"aura.name\"}],key:'name-'+aura.uuid,staticStyle:{\"grid-column-start\":\"name\"},attrs:{\"type\":\"text\",\"placeholder\":\"name\"},domProps:{\"value\":(aura.name)},on:{\"change\":function($event){_vm.updateShape(false)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.value),expression:\"aura.value\",modifiers:{\"number\":true}}],key:'value-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Current value\"},domProps:{\"value\":(aura.value)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"value\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('span',{key:'fspan-'+aura.uuid},[_vm._v(\"/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(aura.dim),expression:\"aura.dim\",modifiers:{\"number\":true}}],key:'dimvalue-'+aura.uuid,attrs:{\"type\":\"text\",\"title\":\"Dim value\"},domProps:{\"value\":(aura.dim)},on:{\"change\":function($event){_vm.updateShape(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(aura, \"dim\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('color-picker',{key:'colour-'+aura.uuid,attrs:{\"color\":aura.colour},on:{\"update:color\":function($event){_vm.$set(aura, \"colour\", $event)},\"input\":function($event){_vm.updateAuraColour(aura, $event)},\"change\":function($event){_vm.updateShape(true)}}}),_c('div',{key:'visibility-'+aura.uuid,style:({opacity: aura.visible ? 1.0 : 0.3}),on:{\"click\":function($event){aura.visible = !aura.visible;_vm.updateShape(true)}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{key:'visionsource-'+aura.uuid,style:({opacity: aura.visionSource ? 1.0 : 0.3}),on:{\"click\":function($event){_vm.updateAuraVisionSource(aura)}}},[_c('i',{staticClass:\"fas fa-lightbulb\"})]),(aura.name !== '' || aura.value !== 0)?_c('div',{key:'remove-'+aura.uuid,on:{\"click\":function($event){_vm.removeAura(aura.uuid)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()]}),_c('div',{staticClass:\"spanrow header\"},[_vm._v(\"Annotation\")]),_c('textarea',{staticClass:\"spanrow\",domProps:{\"value\":_vm.shape.annotation},on:{\"change\":_vm.updateAnnotation}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.getActiveLayer() !== undefined)?_c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.getLayers().length > 1)?_c('li',[_vm._v(\"Layer\\n    \"),_c('ul',_vm._l((_vm.getLayers()),function(layer){return _c('li',{key:layer.name,style:([_vm.getActiveLayer().name === layer.name ? {'background-color':'#82c8a0'}: {}]),on:{\"click\":function($event){_vm.setLayer(layer.name)}}},[_vm._v(_vm._s(layer.name))])}))]):_vm._e(),_c('li',{on:{\"click\":_vm.moveToBack}},[_vm._v(\"Move to back\")]),_c('li',{on:{\"click\":_vm.moveToFront}},[_vm._v(\"Move to front\")]),_c('li',{on:{\"click\":_vm.addInitiative}},[_vm._v(_vm._s(_vm.getInitiativeWord())+\" initiative\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=template&id=7111f3f6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component\nexport default class Modal extends Vue {\n    @Prop(Boolean) visible!: boolean;\n    @Prop({ type: Boolean, default: true }) mask!: boolean;\n\n    $refs!: {\n        container: HTMLElement;\n    };\n\n    positioned = false;\n    offsetX = 0;\n    offsetY = 0;\n    screenX = 0;\n    screenY = 0;\n    dragging = false;\n\n    // Example of mounted required: opening note\n    mounted() {\n        this.updatePosition();\n    }\n    // Example of updated required: opening initiative\n    updated() {\n        this.updatePosition();\n    }\n\n    close(event: MouseEvent) {\n        this.$emit(\"close\");\n    }\n    updatePosition() {\n        if (!this.positioned) {\n            const container = <any>this.$refs.container;\n            if (container.offsetWidth === 0 && container.offsetHeight === 0) return;\n            this.$refs.container.style.left = (window.innerWidth - container.offsetWidth) / 2 + \"px\";\n            this.$refs.container.style.top = (window.innerHeight - container.offsetHeight) / 2 + \"px\";\n            this.positioned = true;\n        }\n    }\n    dragStart(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        event.dataTransfer.setData(\"Hack\", \"\");\n        // Because the drag event is happening on the header, we have to change the drag image\n        // in order to give the impression that the entire modal is dragged.\n        event.dataTransfer.setDragImage(<Element>this.$refs.container, event.offsetX, event.offsetY);\n        this.offsetX = event.offsetX;\n        this.offsetY = event.offsetY;\n        this.screenX = event.screenX;\n        this.screenY = event.screenY;\n        this.dragging = true;\n    }\n    dragEnd(event: DragEvent) {\n        this.dragging = false;\n        let left = event.clientX - this.offsetX;\n        let top = event.clientY - this.offsetY;\n        if (event.clientX === 0 && event.clientY === 0 && event.pageX === 0 && event.pageY === 0) {\n            left = parseInt(this.$refs.container.style.left!, 10) - (this.screenX - event.screenX);\n            top = parseInt(this.$refs.container.style.top!, 10) - (this.screenY - event.screenY);\n        }\n        if (left < 0) left = 0;\n        if (left > window.innerWidth - 100) left = window.innerWidth - 100;\n        if (top < 0) top = 0;\n        if (top > window.innerHeight - 100) top = window.innerHeight - 100;\n        this.$refs.container.style.left = left + \"px\";\n        this.$refs.container.style.top = top + \"px\";\n        this.$refs.container.style.display = \"block\";\n    }\n    dragOver(event: DragEvent) {\n        if (this.dragging) this.$refs.container.style.display = \"none\";\n    }\n}\n","import io from \"socket.io-client\";\n\nimport { Asset } from \"@/core/comm/types\";\nimport { assetStore } from \"./store\";\n\nexport const socket = io(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\", { autoConnect: false });\n\n// export const socket = io.connect(location.protocol + \"//\" + location.host + \"/pa_assetmgmt\");\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    window.location.href = destination;\n});\nsocket.on(\"Folder.Root.Set\", (root: number) => {\n    assetStore.setRoot(root);\n});\nsocket.on(\"Folder.Set\", (folder: Asset) => {\n    assetStore.clear();\n    if (folder.children) {\n        for (const child of folder.children) {\n            assetStore.idMap.set(child.id, child);\n            if (child.file_hash) {\n                assetStore.files.push(child.id);\n            } else {\n                assetStore.folders.push(child.id);\n            }\n        }\n    }\n});\nsocket.on(\"Folder.Create\", (folder: Asset) => {\n    assetStore.folders.push(folder.id);\n    assetStore.idMap.set(folder.id, folder);\n});\nsocket.on(\"Asset.Upload.Finish\", (asset: Asset) => {\n    assetStore.idMap.set(asset.id, asset);\n    assetStore.files.push(asset.id);\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=style&index=0&lang=css&\"","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class MultiLine extends Shape {\n    type = \"multiline\";\n    points: GlobalPoint[] = [];\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        points?: GlobalPoint[],\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.points = points || [];\n        this.lineWidth = lineWidth || 3;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            line_width: this.lineWidth,\n            points: this.points.map(p => ({ x: p.x, y: p.y })),\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        let minx: number = this.refPoint.x;\n        let maxx: number = this.refPoint.y;\n        let miny: number = this.refPoint.x;\n        let maxy: number = this.refPoint.y;\n        for (const p of this.points) {\n            if (p.x < minx) minx = p.x;\n            if (p.x > maxx) maxx = p.x;\n            if (p.y < miny) miny = p.y;\n            if (p.y > maxy) maxy = p.y;\n        }\n        return new BoundingRect(new GlobalPoint(minx, miny), maxx - minx, maxy - miny);\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.beginPath();\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        for (const p of this.points) ctx.lineTo(g2lx(p.x), g2ly(p.y));\n        if (this.strokeColour === \"fog\") ctx.strokeStyle = getFogColour();\n        else ctx.strokeStyle = this.strokeColour;\n        ctx.lineWidth = g2lz(this.lineWidth);\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return this.points.includes(point);\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}},[_c('div',{staticClass:\"current-color\",style:(_vm.transparent ? 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)' : 'background-color:' + _vm.color),on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.open($event)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],staticClass:\"mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.closePicker($event)}}}),_c('chrome-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display),expression:\"display\"}],ref:\"chromePicker\",style:({position: 'fixed', left:_vm.left + 'px', top:_vm.top + 'px', 'z-index': 9999}),attrs:{\"value\":_vm.color,\"tabindex\":\"-1\"},on:{\"input\":_vm.updateColor}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=template&id=b4f2c0b0&scoped=true&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=5c4191ca&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=ts&\"\nexport * from \"./draw.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=5c4191ca&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c4191ca\",\n  null\n  \n)\n\ncomponent.options.__file = \"draw.vue\"\nexport default component.exports","import tinycolor from \"tinycolor2\";\n\nimport { LocalPoint } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function getMouse(e: MouseEvent): LocalPoint {\n    return new LocalPoint(e.pageX, e.pageY);\n}\n\nexport function getFogColour(opposite: boolean = false): string {\n    const tc = tinycolor(gameStore.fowColour);\n    if (gameStore.IS_DM) tc.setAlpha(opposite ? 1 : gameStore.fowOpacity);\n    else tc.setAlpha(1);\n    return tc.toRgbString();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport * as tinycolor from \"tinycolor2\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { calcFontScale } from \"@/core/utils\";\nimport { LocalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { CircularToken } from \"@/game/shapes/circulartoken\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { Watch } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n    computed: {\n        ...mapState(\"game\", [\"unitSize\"]),\n    },\n})\nexport default class CreateTokenModal extends Vue {\n    x = 0;\n    y = 0;\n    visible = false;\n    text = \"X\";\n    fillColour = \"rgba(255, 255, 255, 1)\";\n    borderColour = \"rgba(0, 0, 0, 1)\";\n\n    mounted() {\n        this.updatePreview();\n    }\n\n    @Watch(\"text\")\n    onTextChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"fillColour\")\n    onFillChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n    @Watch(\"borderColour\")\n    onBorderChange(newValue: string, oldValue: string) {\n        this.updatePreview();\n    }\n\n    open(x: number, y: number) {\n        this.visible = true;\n        this.x = x;\n        this.y = y;\n    }\n    submit() {\n        const layer = layerManager.getLayer();\n        if (layer === undefined) return;\n        const token = new CircularToken(\n            l2g(new LocalPoint(this.x, this.y)),\n            getUnitDistance(gameStore.unitSize / 2),\n            this.text,\n            \"10px serif\",\n            this.fillColour,\n            this.borderColour,\n        );\n        token.owners.push(gameStore.username);\n        layer.addShape(token, true);\n        layer.invalidate(false);\n        this.visible = false;\n    }\n    updatePreview() {\n        const ctx = (<HTMLCanvasElement>this.$refs.canvas).getContext(\"2d\")!;\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        const dest = { x: ctx.canvas.width / 2, y: ctx.canvas.height / 2 };\n        const r = Math.min(dest.x, dest.y) * 0.9;\n\n        ctx.fillStyle = this.fillColour;\n\n        ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n        ctx.fill();\n        if (this.borderColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.beginPath();\n            ctx.lineWidth = 5;\n            ctx.strokeStyle = this.borderColour;\n            ctx.arc(dest.x, dest.y, r, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        ctx.save();\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        const xs = calcFontScale(ctx, this.text, r, r);\n        const ys = 0;\n        ctx.transform(xs, ys, -ys, xs, dest.x, dest.y);\n        ctx.fillStyle = tinycolor.mostReadable(this.fillColour, [\"#000\", \"#fff\"]).toHexString();\n        ctx.fillText(this.text, 0, 0);\n        ctx.restore();\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class NoteDialog extends Vue {\n    visible = false;\n    note: Note | null = null;\n\n    open(note: Note) {\n        this.visible = true;\n        this.note = note;\n    }\n    calcHeight() {\n        if (this.$refs.textarea) {\n            const el = <HTMLElement>this.$refs.textarea;\n            el.style.height = \"auto\";\n            el.style.height = el.scrollHeight + \"px\";\n            // Using the return value without the above did not achieve what I want, so hey /shrug\n            return el.scrollHeight + \"px\";\n        }\n        return \"100px\";\n    }\n    updateNote() {\n        if (this.note) gameStore.updateNote({ note: this.note, sync: true });\n    }\n    removeNote() {\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result && this.note) {\n                        gameStore.removeNote({ note: this.note, sync: true });\n                        this.visible = false;\n                    }\n                },\n                () => {},\n            );\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from \"vue-class-component\";\n\nimport { Watch } from \"vue-property-decorator\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Circle } from \"@/game/shapes/circle\";\nimport { MultiLine } from \"@/game/shapes/multiline\";\nimport { Rect } from \"@/game/shapes/rect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { getUnitDistance, l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class DrawTool extends Tool {\n    name = \"Draw\";\n    active = false;\n\n    startPoint: GlobalPoint | null = null;\n    shape: Shape | null = null;\n    brushHelper: Circle | null = null;\n\n    fillColour = \"rgba(0, 0, 0, 1)\";\n    borderColour = \"rgba(255, 255, 255, 0)\";\n\n    shapeSelect = \"square\";\n    shapes = [\"square\", \"circle\", \"paint-brush\"];\n    modeSelect = \"normal\";\n    modes = [\"normal\", \"reveal\", \"hide\"];\n\n    brushSize = getUnitDistance(gameStore.unitSize);\n\n    get helperSize(): number {\n        if (this.shapeSelect === \"paint-brush\") return this.brushSize / 2;\n        return getUnitDistance(this.unitSize) / 8;\n    }\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n\n    @Watch(\"fillColour\")\n    onFillChange() {\n        if (this.brushHelper) this.brushHelper.fillColour = this.fillColour;\n    }\n\n    @Watch(\"modeSelect\")\n    onModeUpdate(newValue: string, oldValue: string) {\n        this.onModeChange(newValue, oldValue);\n    }\n\n    setupBrush() {\n        if (this.brushHelper === null) return;\n        if (this.modeSelect === \"reveal\" || this.modeSelect === \"hide\") {\n            this.brushHelper.options.set(\"preFogShape\", true);\n            this.brushHelper.options.set(\"skipDraw\", true);\n            this.brushHelper.fillColour = \"rgba(0, 0, 0, 1)\";\n\n            if (this.modeSelect === \"reveal\") this.brushHelper.globalCompositeOperation = \"source-over\";\n            else if (this.modeSelect === \"hide\") this.brushHelper.globalCompositeOperation = \"destination-out\";\n        } else {\n            this.brushHelper.options.delete(\"preFogShape\");\n            this.brushHelper.options.delete(\"skipDraw\");\n            this.brushHelper.globalCompositeOperation = \"source-over\";\n            this.brushHelper.fillColour = this.fillColour;\n        }\n    }\n    onModeChange(newValue: string, oldValue: string) {\n        if (this.brushHelper === null) return;\n\n        const fowLayer = layerManager.getLayer(\"fow\");\n        const normalLayer = layerManager.getLayer();\n        if (fowLayer === undefined || normalLayer === undefined) return;\n\n        this.setupBrush();\n\n        if (newValue !== \"normal\" && oldValue === \"normal\") {\n            normalLayer.removeShape(this.brushHelper, false);\n            fowLayer.addShape(this.brushHelper, false);\n        } else if (newValue === \"normal\" && oldValue !== \"normal\") {\n            normalLayer.addShape(this.brushHelper, false);\n            fowLayer.removeShape(this.brushHelper, false);\n        }\n    }\n    getLayer() {\n        if (this.modeSelect === \"normal\") return layerManager.getLayer();\n        return layerManager.getLayer(\"fow\");\n    }\n    onMouseDown(event: MouseEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        if (this.shapeSelect === \"square\")\n            this.shape = new Rect(this.startPoint.clone(), 0, 0, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"circle\")\n            this.shape = new Circle(this.startPoint.clone(), this.helperSize, this.fillColour, this.borderColour);\n        else if (this.shapeSelect === \"paint-brush\") {\n            this.shape = new MultiLine(this.startPoint.clone(), [], this.brushSize);\n            this.shape.fillColour = this.fillColour;\n        } else return;\n\n        if (this.modeSelect !== \"normal\") {\n            this.shape.options.set(\"preFogShape\", true);\n            this.shape.options.set(\"skipDraw\", true);\n            this.shape.fillColour = \"rgba(0, 0, 0, 1)\";\n        }\n        if (this.modeSelect === \"reveal\") this.shape.globalCompositeOperation = \"source-over\";\n        else if (this.modeSelect === \"hide\") this.shape.globalCompositeOperation = \"destination-out\";\n\n        this.shape.owners.push(gameStore.username);\n        if (layer.name === \"fow\" && this.modeSelect === \"normal\") {\n            this.shape.visionObstruction = true;\n            this.shape.movementObstruction = true;\n        }\n        gameStore.visionBlockers.push(this.shape.uuid);\n        layer.addShape(this.shape, true, false);\n\n        // Push brushhelper to back\n        this.onDeselect();\n        this.onSelect();\n    }\n    onMouseMove(event: MouseEvent) {\n        const endPoint = l2g(getMouse(event));\n        const layer = this.getLayer();\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n\n        if (this.brushHelper !== null) {\n            this.brushHelper.r = this.helperSize;\n            this.brushHelper.refPoint = endPoint;\n            if (!this.active) layer.invalidate(false);\n        }\n\n        if (!this.active || this.startPoint === null || this.shape === null) return;\n\n        if (this.shapeSelect === \"square\") {\n            (<Rect>this.shape).w = Math.abs(endPoint.x - this.startPoint.x);\n            (<Rect>this.shape).h = Math.abs(endPoint.y - this.startPoint.y);\n            this.shape.refPoint.x = Math.min(this.startPoint.x, endPoint.x);\n            this.shape.refPoint.y = Math.min(this.startPoint.y, endPoint.y);\n        } else if (this.shapeSelect === \"circle\") {\n            (<Circle>this.shape).r = endPoint.subtract(this.startPoint).length();\n        } else if (this.shapeSelect === \"paint-brush\") {\n            (<MultiLine>this.shape).points.push(endPoint);\n        }\n        socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        if (this.shape.visionObstruction) gameStore.recalculateBV();\n        layer.invalidate(false);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (this.active && this.shape !== null && !event.altKey && this.useGrid) {\n            this.shape.resizeToGrid();\n            socket.emit(\"Shape.Update\", { shape: this.shape!.asDict(), redraw: true, temporary: false });\n        }\n        this.active = false;\n    }\n    onSelect() {\n        const layer = this.getLayer();\n        if (layer === undefined) return;\n        this.brushHelper = new Circle(new GlobalPoint(-1000, -1000), this.brushSize / 2, this.fillColour);\n        this.setupBrush();\n        layer.addShape(this.brushHelper, false); // during mode change the shape is already added\n    }\n    onDeselect() {\n        const layer = this.getLayer();\n        if (this.brushHelper !== null && layer !== undefined) layer.removeShape(this.brushHelper, false);\n    }\n}\n","import { BoundingRect } from \"@/game/shapes/boundingrect\";\n\nexport class BoundingNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n    children: BoundingNode[] = [];\n    constructor(nPrimitives: number, bbox: BoundingRect) {\n        this.nPrimitives = nPrimitives;\n        this.bbox = bbox;\n    }\n}\n\nexport class LeafNode extends BoundingNode {\n    firstPrimOffset: number;\n    constructor(first: number, n: number, bbox: BoundingRect) {\n        super(n, bbox);\n        this.firstPrimOffset = first;\n    }\n}\n\nexport class InteriorNode extends BoundingNode {\n    dimension: number;\n    constructor(dimension: number, c1: BoundingNode, c2: BoundingNode) {\n        super(0, c1.bbox.union(c2.bbox));\n        this.dimension = dimension;\n        this.children.push(c1);\n        this.children.push(c2);\n    }\n}\n","import { GlobalPoint, LocalPoint } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Line extends Shape {\n    type = \"line\";\n    endPoint: GlobalPoint;\n    lineWidth: number;\n    constructor(\n        startPoint: GlobalPoint,\n        endPoint: GlobalPoint,\n        lineWidth?: number,\n        strokeColour?: string,\n        uuid?: string,\n    ) {\n        super(startPoint, \"rgba(0, 0, 0, 0)\", strokeColour || \"#000\", uuid);\n        this.endPoint = endPoint;\n        this.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            x2: this.endPoint.x,\n            y2: this.endPoint.y,\n            line_width: this.lineWidth,\n        });\n    }\n    getBoundingBox(): BoundingRect {\n        return new BoundingRect(\n            new GlobalPoint(Math.min(this.refPoint.x, this.endPoint.x), Math.min(this.refPoint.x, this.endPoint.y)),\n            Math.abs(this.refPoint.x - this.endPoint.x),\n            Math.abs(this.refPoint.y - this.endPoint.y),\n        );\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        ctx.strokeStyle = this.strokeColour;\n        ctx.beginPath();\n        ctx.moveTo(g2lx(this.refPoint.x), g2ly(this.refPoint.y));\n        ctx.lineTo(g2lx(this.endPoint.x), g2ly(this.endPoint.y));\n        ctx.lineWidth = this.lineWidth;\n        ctx.stroke();\n    }\n    contains(point: GlobalPoint): boolean {\n        return false; // TODO\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {} // TODO\n    getCorner(point: GlobalPoint): string | undefined {\n        return \"\";\n    } // TODO\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        return true;\n    } // TODO\n    snapToGrid(): void {}\n    resizeToGrid(): void {}\n    resize(resizeDir: string, point: LocalPoint): void {}\n}\n","// import \"./class-component-hooks\";\n\nimport axios, { AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\nVue.use(Router);\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport Login from \"@/auth/login.vue\";\nimport Logout from \"@/auth/logout\";\nimport LoadComponent from \"@/core/components/load.vue\";\nimport Dashboard from \"@/dashboard/main.vue\";\nimport Game from \"@/game/game.vue\";\nimport Invitation from \"@/invitation/invitation\";\n\nimport { coreStore } from \"@/core/store\";\n// import { AssetManager } from \"./assetManager/assets\";\n// const AssetManager = () => import(\"./assetManager/assets\").then(m => m.AssetManager);\n\nexport const router = new Router({\n    mode: \"history\",\n    base: process.env.BASE_URL,\n    routes: [\n        {\n            path: \"/\",\n            redirect: \"/dashboard\",\n        },\n        {\n            path: \"/_load\",\n            name: \"load\",\n            component: LoadComponent,\n        },\n        {\n            path: \"/assets\",\n            component: AssetManager,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/auth\",\n            component: { template: \"<router-view></router-view>\" },\n            children: [{ path: \"login\", component: Login }, { path: \"logout\", component: Logout }],\n        },\n        {\n            path: \"/invite/:code\",\n            component: Invitation,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: Dashboard,\n            meta: {\n                auth: true,\n            },\n        },\n        {\n            path: \"/game/:creator/:room\",\n            component: Game,\n            meta: {\n                auth: true,\n            },\n        },\n    ],\n});\n\nrouter.beforeEach((to, from, next) => {\n    if (!coreStore.initialized && to.path !== \"/_load\") {\n        next({ path: \"/_load\" });\n        axios\n            .get(\"/api/auth\")\n            .then((response: AxiosResponse) => {\n                if (response.data.auth) {\n                    coreStore.setAuthenticated(true);\n                    coreStore.setUsername(response.data.username);\n                }\n                coreStore.setInitialized(true);\n                router.push(to.path);\n            })\n            .catch(() => {\n                console.error(\"Authentication check could not be fulfilled.\");\n            });\n    } else if (to.matched.some(record => record.meta.auth) && !coreStore.authenticated) {\n        next({ path: \"/auth/login\", query: { redirect: to.path } });\n    } else {\n        next();\n    }\n});\n","\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class Tool extends Vue {\n    name = \"\";\n    selected = false;\n    active = false;\n    get detailRight(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n\n        return `${window.innerWidth - Math.min(window.innerWidth - 25, mid + 75)}px`;\n    }\n    get detailArrow(): string {\n        const rect = (<any>this.$parent.$refs[this.name + \"-selector\"])[0].getBoundingClientRect();\n        const mid = rect.left + rect.width / 2;\n        const right = Math.min(window.innerWidth - 25, mid + 75);\n        return `${right - mid - 14}px`; // border width\n    }\n    created() {\n        this.$parent.$on(\"mousedown\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseDown(event);\n        });\n        this.$parent.$on(\"mouseup\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseUp(event);\n        });\n        this.$parent.$on(\"mousemove\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onMouseMove(event);\n        });\n        this.$parent.$on(\"contextmenu\", (event: MouseEvent, tool: string) => {\n            if (tool === this.name) this.onContextMenu(event);\n        });\n        this.$parent.$on(\"tools-select-change\", (newValue: string, oldValue: string) => {\n            if (oldValue === this.name) {\n                this.selected = false;\n                this.onDeselect();\n            } else if (newValue === this.name) {\n                this.selected = true;\n                this.onSelect();\n            }\n        });\n    }\n    onSelect() {}\n    onDeselect() {}\n    onMouseDown(event: MouseEvent) {}\n    onMouseUp(event: MouseEvent) {}\n    onMouseMove(event: MouseEvent) {}\n    onContextMenu(event: MouseEvent) {}\n}\n","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=ts&\"\nexport * from \"./tools.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=1fee50f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fee50f5\",\n  null\n  \n)\n\ncomponent.options.__file = \"tools.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=script&lang=ts&\"","import { InitiativeData } from \"@/game/comm/types/general\";\nimport { ServerAsset } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\n\nexport class Asset extends BaseRect {\n    type = \"assetrect\";\n    img: HTMLImageElement;\n    src: string = \"\";\n    constructor(img: HTMLImageElement, topleft: GlobalPoint, w: number, h: number, uuid?: string) {\n        super(topleft, w, h);\n        if (uuid !== undefined) this.uuid = uuid;\n        this.img = img;\n    }\n    asDict() {\n        return Object.assign(this.getBaseDict(), {\n            src: this.src,\n        });\n    }\n    fromDict(data: ServerAsset) {\n        super.fromDict(data);\n        this.src = data.src;\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        try {\n            ctx.drawImage(this.img, g2lx(this.refPoint.x), g2ly(this.refPoint.y), g2lz(this.w), g2lz(this.h));\n        } catch (error) {\n            console.warn(`Shape ${this.uuid} could not load the image ${this.src}`);\n        }\n    }\n    getInitiativeRepr(): InitiativeData {\n        return {\n            uuid: this.uuid,\n            visible: !gameStore.IS_DM,\n            group: false,\n            source: this.src,\n            has_img: true,\n            effects: [],\n            index: Infinity,\n        };\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=ts&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { Asset } from \"@/game/shapes/asset\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy, l2gz } from \"@/game/units\";\n\nclass LayerManager {\n    layers: Layer[] = [];\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    UUIDMap: Map<string, Shape> = new Map();\n\n    // Refresh interval and redraw setter.\n    interval = 30;\n\n    constructor() {\n        requestAnimationFrame(this.drawLoop);\n    }\n\n    reset() {\n        this.layers = [];\n        this.UUIDMap = new Map();\n    }\n\n    drawLoop = () => {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].draw();\n        }\n        requestAnimationFrame(this.drawLoop);\n    };\n\n    setWidth(width: number): void {\n        this.width = width;\n        for (const layer of this.layers) {\n            layer.canvas.width = width;\n            layer.width = width;\n        }\n    }\n\n    setHeight(height: number): void {\n        this.height = height;\n        for (const layer of this.layers) {\n            layer.canvas.height = height;\n            layer.height = height;\n        }\n    }\n\n    addLayer(layer: Layer): void {\n        this.layers.push(layer);\n        if (!gameStore.IS_DM && !layer.playerEditable) return;\n        if (layer.selectable) gameStore.addLayer(layer.name);\n    }\n\n    hasLayer(name: string): boolean {\n        return this.layers.some(l => l.name === name);\n    }\n\n    getLayer(name?: string) {\n        name = name === undefined ? gameStore.selectedLayer : name;\n        for (const layer of this.layers) {\n            if (layer.name === name) return layer;\n        }\n    }\n\n    selectLayer(name: string, sync: boolean = true): void {\n        let found = false;\n        for (const layer of this.layers) {\n            if (!layer.selectable) continue;\n            if (found && layer.name !== \"fow\") layer.ctx.globalAlpha = 0.3;\n            else layer.ctx.globalAlpha = 1.0;\n\n            if (name === layer.name) {\n                gameStore.selectLayer({ name, sync });\n                found = true;\n            }\n\n            layer.clearSelection();\n            layer.invalidate(true);\n        }\n    }\n\n    getGridLayer(): GridLayer | undefined {\n        return <GridLayer>this.getLayer(\"grid\");\n    }\n\n    hasSelection() {\n        const selection = this.getSelection();\n        return selection !== undefined && selection.length > 0;\n    }\n\n    // THIS INCLUDES POTENTIALLY THE SelectTool.SelectionHelper !!!\n    getSelection() {\n        const layer = this.getLayer();\n        if (layer === undefined) return undefined;\n        return layer.selection;\n    }\n\n    invalidate(): void {\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            this.layers[i].invalidate(true);\n        }\n    }\n\n    invalidateLight() {\n        for (let i = this.layers.length - 1; i >= 0; i--)\n            if (this.layers[i].isVisionLayer) this.layers[i].invalidate(true);\n    }\n\n    dropAsset(event: DragEvent) {\n        const layer = this.getLayer();\n        if (layer === undefined || event === null || event.dataTransfer === null) return;\n        const image = document.createElement(\"img\");\n        image.src = event.dataTransfer.getData(\"text/plain\");\n        const asset = new Asset(\n            image,\n            new GlobalPoint(l2gx(event.clientX), l2gy(event.clientY)),\n            l2gz(image.width),\n            l2gz(image.height),\n        );\n        asset.src = new URL(image.src).pathname;\n\n        if (gameStore.useGrid) {\n            const gs = gameStore.gridSize;\n            asset.refPoint.x = Math.round(asset.refPoint.x / gs) * gs;\n            asset.refPoint.y = Math.round(asset.refPoint.y / gs) * gs;\n            asset.w = Math.max(Math.round(asset.w / gs) * gs, gs);\n            asset.h = Math.max(Math.round(asset.h / gs) * gs, gs);\n        }\n\n        layer.addShape(asset, true);\n    }\n}\n\nexport const layerManager = new LayerManager();\n(<any>window).lm = layerManager;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./createtoken_modal.vue?vue&type=template&id=66ccc134&scoped=true&\"\nimport script from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./createtoken_modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66ccc134\",\n  null\n  \n)\n\ncomponent.options.__file = \"createtoken_modal.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=script&lang=ts&\"","import Tools from \"../ui/tools/tools.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { Vector } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\n\nexport function onKeyUp(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n    } else {\n        if (event.key === \"Delete\" || event.key === \"Del\" || event.key === \"Backspace\") {\n            if (layerManager.getLayer === undefined) {\n                console.log(\"No active layer selected for delete operation\");\n                return;\n            }\n            const l = layerManager.getLayer()!;\n            for (let i = l.selection.length - 1; i >= 0; i--) {\n                const sel = l.selection[i];\n                if ((<any>getRef<Tools>(\"tools\").$refs.selectTool).selectionHelper.uuid === sel.uuid) {\n                    l.selection.splice(i, 1);\n                    continue;\n                }\n                l.removeShape(sel, true, false);\n                EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n                EventBus.$emit(\"Initiative.Remove\", sel.uuid);\n            }\n        }\n    }\n}\n\nexport function onKeyDown(event: KeyboardEvent) {\n    if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\n        if (event.keyCode === 65 && event.ctrlKey) event.target!.select();\n    } else {\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n            // todo: this should already be rounded\n            const gridSize = Math.round(gameStore.gridSize);\n            let offsetX = gridSize * (event.keyCode % 2);\n            let offsetY = gridSize * (event.keyCode % 2 ? 0 : 1);\n            if (layerManager.hasSelection()) {\n                const selection = layerManager.getSelection()!;\n                offsetX *= event.keyCode <= 38 ? -1 : 1;\n                offsetY *= event.keyCode <= 38 ? -1 : 1;\n                let delta = new Vector(offsetX, offsetY);\n                if (!event.shiftKey || !gameStore.IS_DM) {\n                    // First check for collisions.  Using the smooth wall slide collision check used on mouse move is overkill here.\n                    for (const sel of selection) delta = calculateDelta(delta, sel);\n                }\n                for (const sel of selection) {\n                    sel.refPoint.x += delta.x;\n                    sel.refPoint.y += delta.y;\n                    if (sel.refPoint.x % gridSize !== 0 || sel.refPoint.y % gridSize !== 0) sel.snapToGrid();\n                    socket.emit(\"Shape.Position.Update\", { shape: sel.asDict(), redraw: true, temporary: false });\n                }\n                layerManager.getLayer()!.invalidate(false);\n            } else {\n                // The pan offsets should be in the opposite direction to give the correct feel.\n                gameStore.increasePanX(offsetX * (event.keyCode <= 38 ? 1 : -1));\n                gameStore.increasePanY(offsetY * (event.keyCode <= 38 ? 1 : -1));\n                layerManager.invalidate();\n                sendClientOptions();\n            }\n        } else if (event.keyCode === 68) {\n            const layer = layerManager.getLayer();\n            if (layer) {\n                layer.clearSelection();\n                layer.invalidate(true);\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=style&index=0&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport ShapeContext from \"@/game/ui/selection/shapecontext.vue\";\nimport CreateTokenModal from \"@/game/ui/tools/createtoken_modal.vue\";\nimport DrawTool from \"@/game/ui/tools/draw.vue\";\nimport MapTool from \"@/game/ui/tools/map.vue\";\nimport PanTool from \"@/game/ui/tools/pan\";\nimport SelectTool from \"@/game/ui/tools/select.vue\";\n\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { RulerTool } from \"@/game/ui/tools/ruler\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    components: {\n        \"select-tool\": SelectTool,\n        \"pan-tool\": PanTool,\n        \"draw-tool\": DrawTool,\n        \"ruler-tool\": RulerTool,\n        \"map-tool\": MapTool,\n        \"shape-menu\": ShapeContext,\n        \"createtoken-dialog\": CreateTokenModal,\n    },\n    watch: {\n        currentTool(newValue, oldValue) {\n            this.$emit(\"tools-select-change\", newValue, oldValue);\n        },\n    },\n})\nexport default class Tools extends Vue {\n    $refs!: {\n        selectTool: InstanceType<typeof SelectTool>;\n    };\n\n    currentTool = \"Select\";\n    tools = [\"Select\", \"Pan\", \"Draw\", \"Ruler\", \"Map\"];\n    dmTools = [\"Map\"];\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get currentToolComponent(): string {\n        return `${this.currentTool.toLowerCase()}-tool`;\n    }\n\n    mousedown(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mousedown\", event, targetTool);\n    }\n    mouseup(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if (event.button === 1) {\n            targetTool = \"Pan\";\n        } else if (event.button !== 0) {\n            return;\n        }\n\n        this.$emit(\"mouseup\", event, targetTool);\n    }\n    mousemove(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n\n        let targetTool = this.currentTool;\n        if ((event.buttons & 4) !== 0) {\n            targetTool = \"Pan\";\n        } else if ((event.button & 1) > 1) {\n            return;\n        }\n\n        this.$emit(\"mousemove\", event, targetTool);\n\n        // Annotation hover\n        let found = false;\n        for (const uuid of gameStore.annotations) {\n            if (layerManager.UUIDMap.has(uuid) && layerManager.hasLayer(\"draw\")) {\n                const shape = layerManager.UUIDMap.get(uuid)!;\n                if (shape.contains(l2g(getMouse(event)))) {\n                    found = true;\n                    gameManager.annotationManager.setActiveText(shape.annotation);\n                }\n            }\n        }\n        if (!found && gameManager.annotationManager.shown) {\n            gameManager.annotationManager.setActiveText(\"\");\n        }\n    }\n    mouseleave(event: MouseEvent) {\n        // When leaving the window while a mouse is pressed down, act as if it was released\n        if ((event.buttons & 1) !== 0) {\n            this.$emit(\"mouseup\", event, this.currentTool);\n        }\n    }\n    contextmenu(event: MouseEvent) {\n        if ((<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        if (event.button !== 2 || (<HTMLElement>event.target).tagName !== \"CANVAS\") return;\n        this.$emit(\"contextmenu\", event, this.currentTool);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextmenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class Prompt extends Vue {\n    $refs!: {\n        answer: HTMLElement;\n    };\n\n    visible = false;\n    question = \"\";\n    answer = \"\";\n    title = \"\";\n\n    resolve = (value: string) => {};\n    reject = () => {};\n\n    submit() {\n        this.resolve(this.answer);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.question = \"\";\n        this.answer = \"\";\n        this.title = \"\";\n    }\n    prompt(question: string, title: string): Promise<string> {\n        this.question = question;\n        this.title = title;\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.answer.focus();\n        });\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_vm._l((_vm.folders),function(folder){return _c('li',{key:folder,staticClass:\"folder\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle($event)}}},[_vm._v(\"\\n    \"+_vm._s(folder)+\"\\n    \"),_c('asset-node',{attrs:{\"asset\":_vm.asset[folder]}})],1)}),_vm._l((_vm.files),function(file){return _c('li',{key:file.name,staticClass:\"file draggable token\",attrs:{\"draggable\":\"true\"},on:{\"mouseover\":function($event){_vm.showImage = file.hash},\"mouseout\":function($event){_vm.showImage = null},\"dragstart\":function($event){_vm.dragStart($event, '/static/assets/' + file.hash)}}},[_vm._v(\"\\n    \"+_vm._s(file.name)+\"\\n    \"),(_vm.showImage == file.hash)?_c('div',{staticClass:\"preview\"},[_c('img',{staticClass:\"asset-preview-image\",attrs:{\"src\":'/static/assets/' + file.hash}})]):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=template&id=62c91cd3&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(_vm._s(_vm.message))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./load.vue?vue&type=template&id=ff095222&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"toolselect\"}},[_c('ul',_vm._l((_vm.tools),function(tool){return (!_vm.dmTools.includes(tool) || _vm.IS_DM)?_c('li',{key:tool,ref:tool + '-selector',refInFor:true,class:{'tool-selected': _vm.currentTool === tool},on:{\"click\":function($event){_vm.currentTool = tool}}},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(tool))])]):_vm._e()}))]),_c('div',[[_c('select-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Select'),expression:\"currentTool === 'Select'\"}],ref:\"selectTool\"}),_c('pan-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Pan'),expression:\"currentTool === 'Pan'\"}]}),_c('keep-alive',[_c('draw-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Draw'),expression:\"currentTool === 'Draw'\"}]})],1),_c('ruler-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Ruler'),expression:\"currentTool === 'Ruler'\"}]}),_c('map-tool',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTool === 'Map'),expression:\"currentTool === 'Map'\"}]}),_c('shape-menu',{ref:\"shapecontext\"}),_c('createtoken-dialog',{ref:\"createtokendialog\"})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=template&id=1fee50f5&scoped=true&\"","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=ts&\"","import { GlobalPoint, Point, Ray, Vector } from \"@/game/geom\";\n\nexport class BoundingRect {\n    readonly w: number;\n    readonly h: number;\n    readonly topLeft: GlobalPoint;\n    readonly topRight: GlobalPoint;\n    readonly botRight: GlobalPoint;\n    readonly botLeft: GlobalPoint;\n\n    constructor(topleft: GlobalPoint, w: number, h: number) {\n        this.w = w;\n        this.h = h;\n        this.topLeft = topleft;\n        this.topRight = new GlobalPoint(topleft.x + w, topleft.y);\n        this.botRight = new GlobalPoint(topleft.x + w, topleft.y + h);\n        this.botLeft = new GlobalPoint(topleft.x, topleft.y + h);\n    }\n\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.topLeft.x <= point.x &&\n            this.topRight.x >= point.x &&\n            this.topLeft.y <= point.y &&\n            this.botLeft.y >= point.y\n        );\n    }\n\n    offset(vector: Vector): BoundingRect {\n        return new BoundingRect(this.topLeft.add(vector), this.w, this.h);\n    }\n\n    union(other: BoundingRect): BoundingRect {\n        const xmin = Math.min(this.topLeft.x, other.topLeft.x);\n        const xmax = Math.max(this.topRight.x, other.topRight.x);\n        const ymin = Math.min(this.topLeft.y, other.topLeft.y);\n        const ymax = Math.max(this.botLeft.y, other.botLeft.y);\n        return new BoundingRect(new GlobalPoint(xmin, ymin), xmax - xmin, ymax - ymin);\n    }\n\n    getDiagCorner(botright: boolean) {\n        return botright ? this.botRight : this.topLeft;\n    }\n\n    intersectsWith(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x > this.topRight.x ||\n            other.topRight.x < this.topLeft.x ||\n            other.topLeft.y > this.botLeft.y ||\n            other.botLeft.y < this.topLeft.y\n        );\n    }\n\n    intersectsWithInner(other: BoundingRect): boolean {\n        return !(\n            other.topLeft.x >= this.topRight.x ||\n            other.topRight.x <= this.topLeft.x ||\n            other.topLeft.y >= this.botLeft.y ||\n            other.botLeft.y <= this.topLeft.y\n        );\n    }\n\n    intersectP(ray: Ray<Point>, invDir: Vector, dirIsNeg: boolean[]) {\n        let txmin = invDir.x * (this.getDiagCorner(dirIsNeg[0]).x - ray.origin!.x);\n        let txmax = invDir.x * (this.getDiagCorner(!dirIsNeg[0]).x - ray.origin!.x);\n        const tymin = invDir.y * (this.getDiagCorner(dirIsNeg[1]).y - ray.origin!.y);\n        const tymax = invDir.y * (this.getDiagCorner(!dirIsNeg[1]).y - ray.origin!.y);\n        if (txmin > tymax || tymin > txmax) return { hit: false, min: txmin, max: txmax };\n        if (tymin > txmin) txmin = tymin;\n        if (tymax < txmax) txmax = tymax;\n        return { hit: txmin < ray.tMax! && txmax > 0, min: txmin, max: txmax };\n    }\n\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.topLeft.add(new Vector(this.w / 2, this.h / 2));\n        this.topLeft.x = centerPoint.x - this.w / 2;\n        this.topLeft.y = centerPoint.y - this.h / 2;\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        const sw = Math.min(6, this.w / 2) / 2;\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"nw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.topLeft.y - sw <= point.y &&\n                    point.y <= this.topLeft.y + sw\n                );\n            case \"sw\":\n                return (\n                    this.topLeft.x - sw <= point.x &&\n                    point.x <= this.topLeft.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            case \"se\":\n                return (\n                    this.topRight.x - sw <= point.x &&\n                    point.x <= this.topRight.x + sw &&\n                    this.botLeft.y - sw <= point.y &&\n                    point.y <= this.botLeft.y + sw\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n\n    getMaxExtent() {\n        return this.w > this.h ? 0 : 1;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"formcontainer\"}},[(_vm.owned || _vm.joined)?_c('form',[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"Your sessions\")]),_c('div',{staticClass:\"input\"},[_vm._l((_vm.owned),function(room,i){return _c('router-link',{key:'o-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[0]))])}),_vm._l((_vm.joined),function(room,i){return _c('router-link',{key:'j-'+i,attrs:{\"to\":'/game/' + room[1] + '/' + room[0]}},[_vm._v(_vm._s(room[1])+\"/\"+_vm._s(room[0]))])})],2),(_vm.owned.length === 0)?_c('div',{staticClass:\"input\"},[_vm._v(\"No active sessions\")]):_vm._e()])]):_vm._e(),_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('fieldset',[(!_vm.owned && !_vm.joined)?_c('legend',{staticClass:\"legend\"},[_vm._v(\"Create a session\")]):_c('div',{staticClass:\"input\"},[_vm._v(\"Create a new session\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newSessionName),expression:\"newSessionName\"}],attrs:{\"type\":\"text\",\"name\":\"room_name\",\"placeholder\":\"Session Name\"},domProps:{\"value\":(_vm.newSessionName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newSessionName=$event.target.value}}}),_vm._m(1)]),_vm._m(2)])]),_c('div',{attrs:{\"id\":\"account-options\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Account Settings\",\"to\":\"/account\"}},[_c('i',{staticClass:\"fas fa-cog\"})])],1),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('router-link',{staticClass:\"submit\",attrs:{\"tag\":\"button\",\"title\":\"Logout\",\"to\":\"/auth/logout\"}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',[_c('span',[_vm._v(\"OR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fab fa-d-and-d\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"title\":\"Create\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=template&id=61eb1455&scoped=true&\"","/*\nThis module defines some Point classes.\nA strong focus is made to ensure that at no time a global and a local point are mixed up with each other.\nAt first glance this adds weird looking hacks as ts does not support nominal typing.\n*/\n\nexport function getPointDistance(p1: Point, p2: Point) {\n    const a = p1.x - p2.x;\n    const b = p1.y - p2.y;\n    return Math.sqrt(a * a + b * b);\n}\n\nexport class Point {\n    x: number;\n    y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    add(vec: Vector) {\n        return new Point(this.x + vec.x, this.y + vec.y);\n    }\n    subtract(other: Point) {\n        return new Vector(this.x - other.x, this.y - other.y);\n    }\n    clone(): Point {\n        return new Point(this.x, this.y);\n    }\n    get(dimension: 0 | 1) {\n        if (dimension === 0) return this.x;\n        return this.y;\n    }\n}\nexport class GlobalPoint extends Point {\n    // This is to differentiate with LocalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _GlobalPoint!: string;\n    add(vec: Vector): GlobalPoint {\n        return <GlobalPoint>super.add(vec);\n    }\n    subtract(other: GlobalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): GlobalPoint {\n        return <GlobalPoint>super.clone();\n    }\n}\n\nexport class LocalPoint extends Point {\n    // This is to differentiate with GlobalPoint, is actually never used\n    // We do ! to prevent errors that it never gets initialized\n    // tslint:disable-next-line:variable-name\n    _LocalPoint!: string;\n    add(vec: Vector): LocalPoint {\n        return <LocalPoint>super.add(vec);\n    }\n    subtract(other: LocalPoint): Vector {\n        return super.subtract(other);\n    }\n    clone(): LocalPoint {\n        return <LocalPoint>super.clone();\n    }\n}\n\nexport class Vector {\n    readonly x: number;\n    readonly y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    dot(other: Vector) {\n        return this.x * other.x + this.y * other.y;\n    }\n    inverse() {\n        return new Vector(1 / this.x, 1 / this.y);\n    }\n    length() {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    }\n    normalize() {\n        const l = this.length();\n        return new Vector(this.x / l, this.y / l);\n    }\n    reverse() {\n        return new Vector(-this.x, -this.y);\n    }\n    multiply(scale: number) {\n        return new Vector(this.x * scale, this.y * scale);\n    }\n}\n\nexport class Ray<T extends Point> {\n    readonly direction: Vector;\n    readonly origin: T;\n    tMax: number;\n    constructor(origin: T, direction: Vector, tMax?: number) {\n        this.direction = direction;\n        this.origin = origin;\n        if (tMax === undefined) tMax = Infinity;\n        this.tMax = tMax;\n    }\n    static fromPoints<T extends Point>(p1: T, p2: T): Ray<T> {\n        const vec = new Vector(p2.x - p1.x, p2.y - p1.y);\n        let maxT;\n        if (Math.abs(vec.x) > 0.01) maxT = (p2.x - p1.x) / vec.x;\n        else maxT = (p2.y - p1.y) / vec.y;\n        return new Ray(p1, vec, maxT);\n    }\n    get(t: number): T {\n        return <T>new Point(this.origin.x + t * this.direction.x, this.origin.y + t * this.direction.y);\n    }\n    getDistance(t1: number, t2: number) {\n        return Math.sqrt(Math.pow(t2 - t1, 2) * (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n    getT(t1: number, distance: number) {\n        return t1 + Math.sqrt(Math.pow(distance, 2) / (Math.pow(this.direction.x, 2) + Math.pow(this.direction.y, 2)));\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport vueSlider from \"vue-slider-component\";\n\nimport \"@/game/api/events\";\n\nimport { throttle } from \"lodash\";\nimport { mapGetters, mapState } from \"vuex\";\n\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport Initiative from \"@/game/ui/initiative.vue\";\nimport MenuBar from \"@/game/ui/menu/menu.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\nimport SelectionInfo from \"@/game/ui/selection/selection_info.vue\";\nimport Tools from \"@/game/ui/tools/tools.vue\";\n\nimport { createConnection, socket } from \"@/game/api/socket\";\nimport { onKeyDown, onKeyUp } from \"@/game/events/keyboard\";\nimport { scrollZoom } from \"@/game/events/mouse\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { LocalPoint } from \"./geom\";\n\n@Component({\n    components: {\n        \"tool-bar\": Tools,\n        \"selection-info\": SelectionInfo,\n        \"prompt-dialog\": Prompt,\n        \"confirm-dialog\": ConfirmDialog,\n        \"menu-bar\": MenuBar,\n        \"initiative-dialog\": Initiative,\n        \"zoom-slider\": vueSlider,\n        \"note-dialog\": NoteDialog,\n    },\n    beforeRouteEnter(to, from, next) {\n        createConnection(to);\n        next();\n    },\n    beforeRouteLeave(to, from, next) {\n        socket.disconnect();\n        next();\n    },\n})\nexport default class Game extends Vue {\n    $refs!: {\n        confirm: InstanceType<typeof ConfirmDialog>;\n        tools: InstanceType<typeof Tools>;\n    };\n\n    ready = {\n        manager: false,\n        tools: false,\n    };\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    get layers(): string[] {\n        return gameStore.layers;\n    }\n\n    get selectedLayer(): string {\n        return gameStore.selectedLayer;\n    }\n\n    get zoomFactor(): number {\n        return gameStore.zoomFactor;\n    }\n\n    set zoomFactor(value: number) {\n        gameStore.updateZoom({\n            newZoomValue: value,\n            zoomLocation: l2g(new LocalPoint(window.innerWidth / 2, window.innerHeight / 2)),\n        });\n    }\n\n    mounted() {\n        window.addEventListener(\"resize\", () => {\n            layerManager.setWidth(window.innerWidth);\n            layerManager.setHeight(window.innerHeight);\n            layerManager.invalidate();\n        });\n        window.addEventListener(\"wheel\", throttle(scrollZoom));\n        window.addEventListener(\"keyup\", onKeyUp);\n        window.addEventListener(\"keydown\", onKeyDown);\n        // // prevent double clicking text selection\n        window.addEventListener(\"selectstart\", e => {\n            e.preventDefault();\n            return false;\n        });\n        this.ready.manager = true;\n    }\n\n    mousedown(event: MouseEvent) {\n        this.$refs.tools.mousedown(event);\n    }\n    mouseup(event: MouseEvent) {\n        this.$refs.tools.mouseup(event);\n    }\n    mousemove(event: MouseEvent) {\n        this.$refs.tools.mousemove(event);\n    }\n    mouseleave(event: MouseEvent) {\n        this.$refs.tools.mouseleave(event);\n    }\n    contextmenu(event: MouseEvent) {\n        this.$refs.tools.contextmenu(event);\n    }\n    selectLayer(layer: string) {\n        layerManager.selectLayer(layer);\n    }\n    drop(event: DragEvent) {\n        if (event === null || event.dataTransfer === null) return;\n        if (event.dataTransfer.files.length > 0) {\n            this.$refs.confirm\n                .open(\"Uploading files should be done through the asset manager.\", \"Ok\", \"\")\n                .then(() => {}, () => {});\n        } else if (event.dataTransfer.getData(\"text/plain\") === \"\") {\n            return;\n        } else {\n            layerManager.dropAsset(event);\n        }\n    }\n}\n","import { GlobalPoint, LocalPoint, Ray } from \"@/game/geom\";\nimport { gameStore } from \"@/game/store\";\n\nexport function g2l(obj: GlobalPoint): LocalPoint {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    return new LocalPoint((obj.x + panX) * z, (obj.y + panY) * z);\n}\n\nexport function g2lx(x: number) {\n    return g2l(new GlobalPoint(x, 0)).x;\n}\n\nexport function g2ly(y: number) {\n    return g2l(new GlobalPoint(0, y)).y;\n}\n\nexport function g2lz(z: number) {\n    return z * gameStore.zoomFactor;\n}\n\nexport function getUnitDistance(r: number) {\n    return (r / gameStore.unitSize) * gameStore.gridSize;\n}\n\nexport function g2lr(r: number) {\n    return g2lz(getUnitDistance(r));\n}\n\nexport function l2g(obj: LocalPoint): GlobalPoint;\nexport function l2g(obj: Ray<LocalPoint>): Ray<GlobalPoint>;\nexport function l2g(obj: LocalPoint | Ray<LocalPoint>): GlobalPoint | Ray<GlobalPoint> {\n    const z = gameStore.zoomFactor;\n    const panX = gameStore.panX;\n    const panY = gameStore.panY;\n    if (obj instanceof LocalPoint) {\n        return new GlobalPoint(obj.x / z - panX, obj.y / z - panY);\n    } else {\n        return new Ray<GlobalPoint>(l2g(obj.origin), obj.direction.multiply(1 / z), obj.tMax);\n    }\n}\n\nexport function l2gx(x: number) {\n    return l2g(new LocalPoint(x, 0)).x;\n}\n\nexport function l2gy(y: number) {\n    return l2g(new LocalPoint(0, y)).y;\n}\n\nexport function l2gz(z: number) {\n    return z / gameStore.zoomFactor;\n}\n\nexport function l2gr(r: number) {\n    return l2gz(getUnitDistance(r));\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { mapState } from \"vuex\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport AssetNode from \"@/game/ui/menu/asset_node.vue\";\nimport NoteDialog from \"@/game/ui/note.vue\";\n\nimport { getRef, uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        \"color-picker\": ColorPicker,\n        \"asset-node\": AssetNode,\n    },\n    computed: {\n        ...mapState(\"game\", [\"invitationCode\", \"IS_DM\", \"locations\", \"assets\", \"notes\"]),\n    },\n})\nexport default class MenuBar extends Vue {\n    visible = {\n        settings: false,\n        locations: false,\n    };\n\n    get useGrid(): boolean {\n        return gameStore.useGrid;\n    }\n    set useGrid(value: boolean) {\n        gameStore.setUseGrid({ useGrid: value, sync: true });\n    }\n    get fullFOW(): boolean {\n        return gameStore.fullFOW;\n    }\n    set fullFOW(value: boolean) {\n        gameStore.setFullFOW({ fullFOW: value, sync: true });\n    }\n    get fowOpacity(): number {\n        return gameStore.fowOpacity;\n    }\n    set fowOpacity(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setFOWOpacity({ fowOpacity: value, sync: true });\n    }\n    get fowLOS(): boolean {\n        return gameStore.fowLOS;\n    }\n    set fowLOS(value: boolean) {\n        gameStore.setLineOfSight({ fowLOS: value, sync: true });\n    }\n    get unitSize(): number {\n        return gameStore.unitSize;\n    }\n    set unitSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setUnitSize({ unitSize: value, sync: true });\n    }\n    get gridSize(): number {\n        return gameStore.gridSize;\n    }\n    set gridSize(value: number) {\n        if (typeof value !== \"number\") return;\n        gameStore.setGridSize({ gridSize: value, sync: true });\n    }\n    get gridColour(): string {\n        return gameStore.gridColour;\n    }\n    set gridColour(value: string) {\n        gameStore.setGridColour({ colour: value, sync: true });\n    }\n    get fowColour(): string {\n        return gameStore.fowColour;\n    }\n    set fowColour(value: string) {\n        gameStore.setFOWColour({ colour: value, sync: true });\n    }\n    get rulerColour(): string {\n        return gameStore.rulerColour;\n    }\n    set rulerColour(value: string) {\n        gameStore.setRulerColour({ colour: value, sync: true });\n    }\n    settingsClick(event: { target: HTMLElement }) {\n        if (event.target.classList.contains(\"accordion\")) {\n            event.target.classList.toggle(\"accordion-active\");\n            const next = <HTMLElement>event.target.nextElementSibling;\n            if (next !== null) next.style.display = next.style.display === \"\" ? \"block\" : \"\";\n        }\n    }\n    changeLocation(name: string) {\n        socket.emit(\"Location.Change\", name);\n    }\n    createLocation() {\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New location name:`, `Create new location`)\n            .then(\n                (value: string) => {\n                    socket.emit(\"Location.New\", value);\n                },\n                () => {},\n            );\n    }\n    createNote() {\n        const note = { title: \"New note\", text: \"\", uuid: uuidv4() };\n        gameStore.newNote({ note, sync: true });\n        this.openNote(note);\n    }\n    openNote(note: Note) {\n        getRef<NoteDialog>(\"note\").open(note);\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=5c4191ca&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=style&index=0&id=5c4191ca&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.x + 'px',\"top\":_vm.y + 'px'},on:{\"close\":_vm.close}},[(_vm.IS_DM)?_c('li',{on:{\"click\":_vm.bringPlayers}},[_vm._v(\"Bring players\")]):_vm._e(),_c('li',{on:{\"click\":_vm.createToken}},[_vm._v(\"Create basic token\")]),_c('li',{on:{\"click\":_vm.showInitiative}},[_vm._v(\"Show initiative\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=template&id=44a31e42&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=style&index=0&id=7111f3f6&scoped=true&lang=css&\"","import Initiative from \"./ui/initiative.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { AnnotationManager } from \"@/game/ui/annotation\";\nimport { g2l } from \"@/game/units\";\n\nexport class GameManager {\n    selectedTool: number = 0;\n\n    annotationManager = new AnnotationManager();\n\n    addShape(shape: ServerShape): void {\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Shape with unknown layer ${shape.layer} could not be added`);\n            return;\n        }\n        const layer = layerManager.getLayer(shape.layer)!;\n        const sh = createShapeFromDict(shape);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${shape.type_} could not be added`);\n            return;\n        }\n        layer.addShape(sh, false);\n        layer.invalidate(false);\n    }\n\n    updateShape(data: { shape: ServerShape; redraw: boolean; move: boolean }): void {\n        if (!layerManager.hasLayer(data.shape.layer)) {\n            console.log(`Shape with unknown layer ${data.shape.layer} could not be added`);\n            return;\n        }\n        const sh = createShapeFromDict(data.shape, true);\n        if (sh === undefined) {\n            console.log(`Shape with unknown type ${data.shape.type_} could not be added`);\n            return;\n        }\n        const oldShape = layerManager.UUIDMap.get(data.shape.uuid);\n        if (oldShape === undefined) {\n            console.log(`Shape with unknown id could not be updated`);\n            return;\n        }\n        const redrawInitiative = sh.owners !== oldShape.owners;\n        const shape = Object.assign(oldShape, sh);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        shape.setIsToken(shape.isToken);\n        if (data.move && shape.visionObstruction) gameStore.recalculateBV();\n        if (data.redraw) layerManager.getLayer(data.shape.layer)!.invalidate(false);\n        if (redrawInitiative) getRef<Initiative>(\"initiative\").$forceUpdate();\n    }\n\n    setCenterPosition(position: GlobalPoint) {\n        const localPos = g2l(position);\n        gameStore.increasePanX((window.innerWidth / 2 - localPos.x) / gameStore.zoomFactor);\n        gameStore.increasePanY((window.innerHeight / 2 - localPos.y) / gameStore.zoomFactor);\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n}\n\nexport const gameManager = new GameManager();\n(<any>window).gameManager = gameManager;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible,\"mask\":false},on:{\"close\":function($event){_vm.visible = false}},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_c('div',[_vm._v(\"Initiative\")]),_c('div',{staticClass:\"header-close\",on:{\"click\":function($event){_vm.visible = false}}},[_c('i',{staticClass:\"far fa-window-close\"})])])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('draggable',{attrs:{\"id\":\"initiative-list\",\"options\":{setData: _vm.fakeSetData, disabled: !_vm.$store.state.game.IS_DM}},on:{\"change\":_vm.updateOrder},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}},[_vm._l((_vm.data),function(actor){return [_c('div',{key:actor.uuid,staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-end\"}},[_c('div',{staticClass:\"initiative-actor\",class:{'initiative-selected': _vm.currentActor === actor.uuid},style:({'cursor': _vm.$store.state.game.IS_DM && 'move'}),on:{\"mouseenter\":function($event){_vm.toggleHighlight(actor, true)},\"mouseleave\":function($event){_vm.toggleHighlight(actor, false)}}},[(actor.has_img)?[_c('img',{attrs:{\"src\":actor.source,\"width\":\"30px\",\"height\":\"30px\"}})]:[_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(actor.source))])],_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy.number\",value:(actor.initiative),expression:\"actor.initiative\",modifiers:{\"lazy\":true,\"number\":true}}],class:{'notAllowed': !_vm.owns(actor)},attrs:{\"type\":\"text\",\"placeholder\":\"value\",\"disabled\":!_vm.owns(actor)},domProps:{\"value\":(actor.initiative)},on:{\"change\":[function($event){_vm.$set(actor, \"initiative\", _vm._n($event.target.value))},function($event){_vm.syncInitiative(actor)}],\"blur\":function($event){_vm.$forceUpdate()}}}),_c('div',{staticClass:\"initiative-effects-icon\",class:{'notAllowed': !_vm.owns(actor)},staticStyle:{\"opacity\":\"0.6\"},on:{\"click\":function($event){_vm.createEffect(actor, _vm.getDefaultEffect(), true)}}},[_c('i',{staticClass:\"fas fa-stopwatch\"}),(actor.effects)?[_vm._v(_vm._s(actor.effects.length))]:[_vm._v(\"0\")]],2),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.visible ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'visible')}}},[_c('i',{staticClass:\"fas fa-eye\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': actor.group ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.toggleOption(actor, 'group')}}},[_c('i',{staticClass:\"fas fa-users\"})]),_c('div',{class:{'notAllowed': !_vm.owns(actor)},style:({'opacity': _vm.owns(actor) ? '1.0' : '0.3'}),on:{\"click\":function($event){_vm.removeInitiative(actor.uuid, true, true)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])],2),(actor.effects)?_c('div',{staticClass:\"initiative-effect\"},_vm._l((actor.effects),function(effect){return _c('div',{key:effect.uuid},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.name),expression:\"effect.name\"}],attrs:{\"type\":\"text\",\"size\":effect.name.length || 1},domProps:{\"value\":(effect.name)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"name\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(effect.turns),expression:\"effect.turns\"}],attrs:{\"type\":\"text\",\"size\":effect.turns.toString().length || 1},domProps:{\"value\":(effect.turns)},on:{\"change\":function($event){_vm.updateEffect(actor.uuid, effect, true)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(effect, \"turns\", $event.target.value)}}})])})):_vm._e()])]})],2),_c('div',{attrs:{\"id\":\"initiative-bar\"}},[_c('div',{attrs:{\"id\":\"initiative-round\"}},[_vm._v(\"Round \"+_vm._s(_vm.roundCounter))]),_c('div',{staticStyle:{\"display\":\"flex\"}}),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":function($event){_vm.setRound(0, true); _vm.setTurn(_vm.data[0].uuid, true)}}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',{staticClass:\"initiative-bar-button\",class:{'notAllowed': !_vm.$store.state.game.IS_DM},on:{\"click\":_vm.nextTurn}},[_c('i',{staticClass:\"fas fa-chevron-right\"})])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"","\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component\nexport default class LoadComponent extends Vue {\n    message = \"Loading...\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\nComponent.registerHooks([\"beforeRouteEnter\"]);\n\n@Component\nexport default class Dashboard extends Vue {\n    owned = [];\n    joined = [];\n    error = \"\";\n\n    newSessionName = \"\";\n\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        axios\n            .get(\"/api/rooms\")\n            .then((response: AxiosResponse) => {\n                next((vm: this) => {\n                    vm.owned = response.data.owned;\n                    vm.joined = response.data.joined;\n                });\n            })\n            .catch((err: AxiosError) => {\n                next((vm: this) => {\n                    vm.error = err.message;\n                });\n            });\n    }\n\n    createRoom(event: Event) {\n        axios\n            .post(\"/api/rooms\", {\n                name: this.newSessionName,\n            })\n            .then((response: AxiosResponse) => {\n                this.$router.push(`/game/${coreStore.username}/${this.newSessionName}`);\n            })\n            .catch((err: AxiosError) => {\n                this.error = err.message;\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=ts&\"\nexport * from \"./confirm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=1883e207&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1883e207\",\n  null\n  \n)\n\ncomponent.options.__file = \"confirm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shapecontext.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./manager.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}]},[_vm._v(\"Mode\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IS_DM),expression:\"IS_DM\"}],staticClass:\"selectgroup\"},_vm._l((_vm.modes),function(mode){return _c('div',{key:mode,staticClass:\"option\",class:{'option-selected': _vm.modeSelect === mode},on:{\"click\":function($event){_vm.modeSelect = mode}}},[_vm._v(_vm._s(mode))])})),_c('div',[_vm._v(\"Shape\")]),_c('div',{staticClass:\"selectgroup\"},_vm._l((_vm.shapes),function(shape){return _c('div',{key:shape,staticClass:\"option\",class:{'option-selected': _vm.shapeSelect === shape},on:{\"click\":function($event){_vm.shapeSelect = shape}}},[_c('i',{staticClass:\"fas\",class:'fa-' + shape})])})),_c('div',[_vm._v(\"Colours\")]),_c('div',{staticClass:\"selectgroup\"},[_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.fillColour},on:{\"update:color\":function($event){_vm.fillColour=$event}}}),_c('color-picker',{staticClass:\"option\",attrs:{\"color\":_vm.borderColour},on:{\"update:color\":function($event){_vm.borderColour=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}]},[_vm._v(\"Brush size\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.brushSize),expression:\"brushSize\"},{name:\"show\",rawName:\"v-show\",value:(_vm.shapeSelect === 'paint-brush'),expression:\"shapeSelect === 'paint-brush'\"}],staticStyle:{\"max-width\":\"100px\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.brushSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.brushSize=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./draw.vue?vue&type=template&id=5c4191ca&scoped=true&\"","import Vue from \"vue\";\nexport const EventBus = new Vue();\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuContainer\"}},[_c('div',{ref:\"rm\",style:({\n              left: _vm.visible.settings ? '200px' : '0',\n              top: _vm.visible.locations ? '100px' : '0'\n          }),attrs:{\"id\":\"radialmenu\"}},[_c('div',{staticClass:\"rm-wrapper\"},[_c('div',{staticClass:\"rm-toggler\"},[_c('ul',{staticClass:\"rm-list\",class:{ 'rm-list-dm': _vm.IS_DM }},[(_vm.IS_DM)?_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-locations\"},on:{\"click\":function($event){_vm.visible.locations = !_vm.visible.locations}}},[_vm._m(0)]):_vm._e(),_c('li',{staticClass:\"rm-item\",attrs:{\"id\":\"rm-settings\"},on:{\"click\":function($event){_vm.visible.settings = !_vm.visible.settings}}},[_vm._m(1)])])]),_vm._m(2)])]),_c('transition',{attrs:{\"name\":\"settings\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'left 500ms'}}},[(_vm.visible.settings)?_c('div',{ref:\"settings\",attrs:{\"id\":\"menu\"},on:{\"click\":_vm.settingsClick}},[_c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[(_vm.IS_DM)?[_c('button',{staticClass:\"accordion\"},[_vm._v(\"Assets\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('a',{staticClass:\"actionButton\",attrs:{\"href\":\"/assets\",\"target\":\"blank\",\"title\":\"Open asset manager\"}},[_c('i',{staticClass:\"fas fa-external-link-alt\"})]),_c('div',{staticClass:\"directory\",attrs:{\"id\":\"menu-tokens\"}},[_c('asset-node',{attrs:{\"asset\":_vm.assets}}),(!_vm.assets)?_c('div',[_vm._v(\"No assets\")]):_vm._e()],1)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Notes\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\",attrs:{\"id\":\"menu-notes\"}},[_c('a',{staticClass:\"actionButton\",on:{\"click\":_vm.createNote}},[_c('i',{staticClass:\"far fa-plus-square\"})]),_vm._l((_vm.notes),function(note){return _c('div',{key:note.uuid,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openNote(note)}}},[_vm._v(_vm._s(note.title || \"[?]\"))])}),(!_vm.notes.length)?_c('div',[_vm._v(\"No notes\")]):_vm._e()],2)]),_c('button',{staticClass:\"accordion\"},[_vm._v(\"DM Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"useGridInput\"}},[_vm._v(\"Use grid:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.useGrid),expression:\"useGrid\"}],attrs:{\"id\":\"useGridInput\",\"type\":\"checkbox\",\"checked\":\"checked\"},domProps:{\"checked\":Array.isArray(_vm.useGrid)?_vm._i(_vm.useGrid,null)>-1:(_vm.useGrid)},on:{\"change\":function($event){var $$a=_vm.useGrid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.useGrid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.useGrid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.useGrid=$$c}}}}),_c('label',{attrs:{\"for\":\"useFOWInput\"}},[_vm._v(\"Fill entire canvas with FOW:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fullFOW),expression:\"fullFOW\"}],attrs:{\"id\":\"useFOWInput\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fullFOW)?_vm._i(_vm.fullFOW,null)>-1:(_vm.fullFOW)},on:{\"change\":function($event){var $$a=_vm.fullFOW,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fullFOW=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fullFOW=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fullFOW=$$c}}}}),_c('label',{attrs:{\"for\":\"fowOpacity\"}},[_vm._v(\"FOW opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.fowOpacity),expression:\"fowOpacity\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fowOpacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.1\"},domProps:{\"value\":(_vm.fowOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fowOpacity=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fowLOS\"}},[_vm._v(\"Only show lights in LoS:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fowLOS),expression:\"fowLOS\"}],attrs:{\"id\":\"fowLOS\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.fowLOS)?_vm._i(_vm.fowLOS,null)>-1:(_vm.fowLOS)},on:{\"change\":function($event){var $$a=_vm.fowLOS,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.fowLOS=$$a.concat([$$v]))}else{$$i>-1&&(_vm.fowLOS=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.fowLOS=$$c}}}}),_c('label',{attrs:{\"for\":\"unitSizeInput\"}},[_vm._v(\"Unit Size (in ft.):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.unitSize),expression:\"unitSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"unitSizeInput\",\"type\":\"number\"},domProps:{\"value\":(_vm.unitSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"gridSizeInput\"}},[_vm._v(\"Grid Size (in pixels):\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.gridSize),expression:\"gridSize\",modifiers:{\"number\":true}}],attrs:{\"id\":\"gridSizeInput\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.gridSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gridSize=_vm._n($event.target.value)},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"invitation\"}},[_vm._v(\"Invitation Code:\")]),_c('input',{attrs:{\"id\":\"invitation\",\"type\":\"text\",\"readonly\":\"readonly\"},domProps:{\"value\":_vm.invitationCode}})])])]:_vm._e(),_c('button',{staticClass:\"accordion\"},[_vm._v(\"Client Options\")]),_c('div',{staticClass:\"accordion-panel\"},[_c('div',{staticClass:\"accordion-subpanel\"},[_c('label',{attrs:{\"for\":\"gridColour\"}},[_vm._v(\"Grid Colour:\")]),_c('color-picker',{attrs:{\"id\":\"gridColour\",\"color\":_vm.gridColour},on:{\"update:color\":function($event){_vm.gridColour=$event}}}),_c('label',{attrs:{\"for\":\"fowColour\"}},[_vm._v(\"FOW Colour:\")]),_c('color-picker',{attrs:{\"id\":\"fowColour\",\"color\":_vm.fowColour},on:{\"update:color\":function($event){_vm.fowColour=$event}}}),_c('label',{attrs:{\"for\":\"rulerColour\"}},[_vm._v(\"Ruler Colour:\")]),_c('color-picker',{attrs:{\"id\":\"rulerColour\",\"color\":_vm.rulerColour},on:{\"update:color\":function($event){_vm.rulerColour=$event}}})],1)])],2),_c('router-link',{staticClass:\"accordion\",staticStyle:{\"text-decoration\":\"none\",\"display\":\"inline-block\",\"position\":\"absolute\",\"bottom\":\"0\"},attrs:{\"to\":\"/dashboard\"}},[_vm._v(\"Exit\")])],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"locations\"},on:{\"enter\":function($event){_vm.$refs.rm.style.transition = 'top 500ms'}}},[(_vm.IS_DM && _vm.visible.locations)?_c('div',{attrs:{\"id\":\"locations-menu\"}},[_c('div',[_vm._l((_vm.locations),function(location){return _c('div',{key:location,on:{\"click\":function($event){_vm.changeLocation(location)}}},[_vm._v(_vm._s(location))])}),_c('div',{on:{\"click\":_vm.createLocation}},[_c('i',{staticClass:\"fas fa-plus\"})])],2)]):_vm._e()]),_c('img',{attrs:{\"id\":\"dragImage\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"far fa-compass\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fas fa-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"rm-topper\"},[_c('i',{staticClass:\"icon-share-alt\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=template&id=081515c4&scoped=true&\"","import { GlobalPoint } from \"@/game/geom\";\nimport { BaseRect } from \"@/game/shapes/baserect\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l } from \"@/game/units\";\nimport { getFogColour } from \"@/game/utils\";\n\nexport class Rect extends BaseRect {\n    type = \"rect\";\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, w, h, fillColour, strokeColour, uuid);\n    }\n    asDict() {\n        return super.getBaseDict();\n    }\n    draw(ctx: CanvasRenderingContext2D) {\n        super.draw(ctx);\n        if (this.fillColour === \"fog\") ctx.fillStyle = getFogColour();\n        else ctx.fillStyle = this.fillColour;\n        const z = gameStore.zoomFactor;\n        const loc = g2l(this.refPoint);\n        ctx.fillRect(loc.x, loc.y, this.w * z, this.h * z);\n        if (this.strokeColour !== \"rgba(0, 0, 0, 0)\") {\n            ctx.strokeStyle = this.strokeColour;\n            ctx.lineWidth = 5;\n            ctx.strokeRect(loc.x, loc.y, this.w * z, this.h * z);\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selectcontext.vue?vue&type=script&lang=ts&\"","import { Ray, Vector } from \"@/game/geom\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Settings } from \"@/game/settings\";\nimport { gameStore } from \"@/game/store\";\nimport { g2l, g2lx, g2ly } from \"@/game/units\";\n\nexport class FOWPlayersLayer extends Layer {\n    isVisionLayer: boolean = true;\n\n    draw(): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n\n            if (!gameStore.fowLOS || Settings.skipPlayerFOW) {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                this.valid = true;\n                return;\n            }\n\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const originalOperation = ctx.globalCompositeOperation;\n\n            ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n\n            // For the DM this is done at the end of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (!gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            // Then cut out all the player vision auras\n            const maxLength = ctx.canvas.width + ctx.canvas.height;\n            for (const tokenId of gameStore.ownedtokens) {\n                ctx.beginPath();\n                let lastArcAngle = -1;\n                const token = layerManager.UUIDMap.get(tokenId);\n                if (token === undefined) continue;\n                const center = token.center();\n                const lcenter = g2l(center);\n\n                for (let angle = 0; angle < 2 * Math.PI; angle += (Settings.angleSteps / 2 / 180) * Math.PI) {\n                    const cos = Math.cos(angle);\n                    const sin = Math.sin(angle);\n                    // Check if there is a hit with one of the nearby light blockers.\n                    const lightRay = new Ray(center, new Vector(cos, sin));\n                    const hitResult = gameStore.BV.intersect(lightRay);\n\n                    // We can move on to the next angle if nothing was hit.\n                    if (!hitResult.hit) {\n                        // If an earlier hit caused the aura to leave the arc, we need to go back to the arc\n                        if (lastArcAngle === -1) {\n                            // Draw a line from the last non arc location back to the arc\n                            ctx.lineTo(lcenter.x + maxLength * cos, lcenter.y + maxLength * sin);\n                            // Set the start of a new arc beginning at the current angle\n                            lastArcAngle = angle;\n                        }\n                        continue;\n                    }\n                    // If hit , first finish any ongoing arc, then move to the intersection point\n                    if (lastArcAngle !== -1) {\n                        ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, angle);\n                        lastArcAngle = -1;\n                    }\n                    ctx.lineTo(g2lx(hitResult.intersect.x), g2ly(hitResult.intersect.y));\n                }\n\n                // Finish the final arc.\n                if (lastArcAngle !== -1) ctx.arc(lcenter.x, lcenter.y, maxLength, lastArcAngle, 2 * Math.PI);\n                else ctx.closePath();\n                ctx.fill();\n            }\n\n            // For the players this is done at the beginning of this function.  TODO: why the split up ???\n            // This was done in commit be1e65cff1e7369375fe11cfa1643fab1d11beab.\n            if (gameStore.IS_DM) super.draw(!gameStore.fullFOW);\n\n            ctx.globalCompositeOperation = originalOperation;\n        }\n    }\n}\n","import { socket } from \"@/game/api/socket\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { createShapeFromDict } from \"@/game/shapes/utils\";\nimport { gameStore } from \"@/game/store\";\nimport { g2lx, g2ly } from \"@/game/units\";\n\nexport class Layer {\n    name: string;\n    width: number;\n    height: number;\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n\n    selectable: boolean = false;\n    playerEditable: boolean = false;\n    isVisionLayer: boolean = false;\n\n    // When set to false, the layer will be redrawn on the next tick\n    valid: boolean = false;\n    // The collection of shapes that this layer contains.\n    // These are ordered on a depth basis.\n    shapes: Shape[] = [];\n\n    // Collection of shapes that are currently selected\n    selection: Shape[] = [];\n\n    // Extra selection highlighting settings\n    selectionColor = \"#CC0000\";\n    selectionWidth = 2;\n\n    constructor(canvas: HTMLCanvasElement, name: string) {\n        this.canvas = canvas;\n        this.name = name;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.ctx = canvas.getContext(\"2d\")!;\n    }\n\n    invalidate(skipLightUpdate: boolean): void {\n        this.valid = false;\n        if (!skipLightUpdate) {\n            layerManager.invalidateLight();\n        }\n    }\n\n    addShape(shape: Shape, sync: boolean, temporary?: boolean): void {\n        if (temporary === undefined) temporary = false;\n        shape.layer = this.name;\n        this.shapes.push(shape);\n        layerManager.UUIDMap.set(shape.uuid, shape);\n        shape.checkVisionSources();\n        shape.setMovementBlock(shape.movementObstruction);\n        if (shape.ownedBy(gameStore.username) && shape.isToken) gameStore.ownedtokens.push(shape.uuid);\n        if (shape.annotation.length) gameStore.annotations.push(shape.uuid);\n        if (sync) socket.emit(\"Shape.Add\", { shape: shape.asDict(), temporary });\n        this.invalidate(!sync);\n    }\n\n    setShapes(shapes: ServerShape[]): void {\n        for (const serverShape of shapes) {\n            const shape = createShapeFromDict(serverShape);\n            if (shape === undefined) {\n                console.log(`Shape with unknown type ${serverShape.type_} could not be added`);\n                return;\n            }\n            this.addShape(shape, false, false);\n        }\n        this.clearSelection(); // TODO: Fix keeping selection on those items that are not moved.\n        this.invalidate(false);\n    }\n\n    removeShape(shape: Shape, sync: boolean, temporary?: boolean) {\n        if (temporary === undefined) temporary = false;\n        this.shapes.splice(this.shapes.indexOf(shape), 1);\n\n        if (sync) socket.emit(\"Shape.Remove\", { shape, temporary });\n        const lsI = gameStore.visionSources.findIndex(ls => ls.shape === shape.uuid);\n        const lbI = gameStore.visionBlockers.findIndex(ls => ls === shape.uuid);\n\n        const mbI = gameStore.movementblockers.findIndex(ls => ls === shape.uuid);\n        const anI = gameStore.annotations.findIndex(ls => ls === shape.uuid);\n        if (lsI >= 0) gameStore.visionSources.splice(lsI, 1);\n        if (lbI >= 0) gameStore.visionBlockers.splice(lbI, 1);\n        if (mbI >= 0) gameStore.movementblockers.splice(mbI, 1);\n        if (anI >= 0) gameStore.annotations.splice(anI, 1);\n\n        const annotationIndex = gameStore.annotations.indexOf(shape.uuid);\n        if (annotationIndex >= 0) gameStore.annotations.splice(annotationIndex, 1);\n\n        const ownedIndex = gameStore.ownedtokens.indexOf(shape.uuid);\n        if (ownedIndex >= 0) gameStore.ownedtokens.splice(ownedIndex, 1);\n\n        layerManager.UUIDMap.delete(shape.uuid);\n\n        const index = this.selection.indexOf(shape);\n        if (index >= 0) this.selection.splice(index, 1);\n        if (lbI >= 0) gameStore.recalculateBV();\n        this.invalidate(!sync);\n    }\n\n    clear(): void {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n\n    clearSelection(): void {\n        this.selection = [];\n        EventBus.$emit(\"SelectionInfo.Shape.Set\", null);\n    }\n\n    draw(doClear?: boolean): void {\n        if (!this.valid) {\n            const ctx = this.ctx;\n            const ogOP = ctx.globalCompositeOperation;\n            doClear = doClear === undefined ? true : doClear;\n\n            if (doClear) this.clear();\n\n            const state = this;\n\n            // We iteratre twice over all shapes\n            // First to draw the auras and a second time to draw the shapes themselves\n            // Otherwise auras from one shape could be overlapping another shape itself.\n\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.drawAuras(ctx);\n            });\n            this.shapes.forEach(shape => {\n                if (shape.options.has(\"skipDraw\") && shape.options.get(\"skipDraw\")) return;\n                if (layerManager.getLayer() === undefined) return;\n                if (!shape.visibleInCanvas(state.canvas)) return;\n                if (state.name === \"fow\" && shape.visionObstruction && layerManager.getLayer()!.name !== state.name)\n                    return;\n                shape.draw(ctx);\n            });\n\n            if (this.selection != null) {\n                ctx.fillStyle = this.selectionColor;\n                ctx.strokeStyle = this.selectionColor;\n                ctx.lineWidth = this.selectionWidth;\n                const z = gameStore.zoomFactor;\n                this.selection.forEach(sel => {\n                    ctx.globalCompositeOperation = sel.globalCompositeOperation;\n                    const bb = sel.getBoundingBox();\n                    // TODO: REFACTOR THIS TO Shape.drawSelection(ctx);\n                    ctx.strokeRect(g2lx(bb.topLeft.x), g2ly(bb.topLeft.y), bb.w * z, bb.h * z);\n\n                    const sw = Math.min(6, bb.w / 2);\n\n                    // topright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // topleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.topLeft.y - sw / 2), sw * z, sw * z);\n                    // botright\n                    ctx.fillRect(g2lx(bb.topRight.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                    // botleft\n                    ctx.fillRect(g2lx(bb.topLeft.x - sw / 2), g2ly(bb.botLeft.y - sw / 2), sw * z, sw * z);\n                });\n            }\n            ctx.globalCompositeOperation = ogOP;\n            this.valid = true;\n        }\n    }\n\n    moveShapeOrder(shape: Shape, destinationIndex: number, sync: boolean): void {\n        const oldIdx = this.shapes.indexOf(shape);\n        if (oldIdx === destinationIndex) return;\n        this.shapes.splice(oldIdx, 1);\n        this.shapes.splice(destinationIndex, 0, shape);\n        if (sync) socket.emit(\"Shape.Order.Set\", { shape: shape.asDict(), index: destinationIndex });\n        this.invalidate(true);\n    }\n\n    onShapeMove(shape: Shape): void {\n        shape.checkVisionSources();\n        if (shape.visionObstruction) gameStore.recalculateBV();\n        this.invalidate(false);\n    }\n}\n","import { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\nexport function scrollZoom(e: WheelEvent) {\n    if (!e.target || !(<HTMLElement>e.target).tagName || (<HTMLElement>e.target).tagName !== \"CANVAS\") return;\n    let delta: number;\n    delta = Math.sign(e.deltaY) * -1;\n    gameStore.updateZoom({ newZoomValue: gameStore.zoomFactor + 0.1 * delta, zoomLocation: l2g(getMouse(e)) });\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset_node.vue?vue&type=style&index=0&id=62c91cd3&scoped=true&lang=css&\"","import { GlobalPoint, LocalPoint, Vector } from \"@/game/geom\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { calculateDelta } from \"@/game/ui/tools/utils\";\nimport { g2lx, g2ly, l2g, l2gx, l2gy } from \"@/game/units\";\n\nexport abstract class BaseRect extends Shape {\n    w: number;\n    h: number;\n    constructor(topleft: GlobalPoint, w: number, h: number, fillColour?: string, strokeColour?: string, uuid?: string) {\n        super(topleft, fillColour, strokeColour, uuid);\n        this.w = w;\n        this.h = h;\n    }\n    getBaseDict() {\n        return Object.assign(super.getBaseDict(), {\n            width: this.w,\n            height: this.h,\n        });\n    }\n    getBoundingBox() {\n        return new BoundingRect(this.refPoint, this.w, this.h);\n    }\n    contains(point: GlobalPoint): boolean {\n        return (\n            this.refPoint.x <= point.x &&\n            this.refPoint.x + this.w >= point.x &&\n            this.refPoint.y <= point.y &&\n            this.refPoint.y + this.h >= point.y\n        );\n    }\n    inCorner(point: GlobalPoint, corner: string) {\n        switch (corner) {\n            case \"ne\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"nw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y - 3 <= point.y &&\n                    point.y <= this.refPoint.y + 3\n                );\n            case \"sw\":\n                return (\n                    this.refPoint.x - 3 <= point.x &&\n                    point.x <= this.refPoint.x + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            case \"se\":\n                return (\n                    this.refPoint.x + this.w - 3 <= point.x &&\n                    point.x <= this.refPoint.x + this.w + 3 &&\n                    this.refPoint.y + this.h - 3 <= point.y &&\n                    point.y <= this.refPoint.y + this.h + 3\n                );\n            default:\n                return false;\n        }\n    }\n    getCorner(point: GlobalPoint): string | undefined {\n        if (this.inCorner(point, \"ne\")) return \"ne\";\n        else if (this.inCorner(point, \"nw\")) return \"nw\";\n        else if (this.inCorner(point, \"se\")) return \"se\";\n        else if (this.inCorner(point, \"sw\")) return \"sw\";\n    }\n    center(): GlobalPoint;\n    center(centerPoint: GlobalPoint): void;\n    center(centerPoint?: GlobalPoint): GlobalPoint | void {\n        if (centerPoint === undefined) return this.refPoint.add(new Vector(this.w / 2, this.h / 2));\n        this.refPoint.x = centerPoint.x - this.w / 2;\n        this.refPoint.y = centerPoint.y - this.h / 2;\n    }\n\n    visibleInCanvas(canvas: HTMLCanvasElement): boolean {\n        if (super.visibleInCanvas(canvas)) return true;\n        const coreVisible = !(\n            g2lx(this.refPoint.x) > canvas.width ||\n            g2ly(this.refPoint.y) > canvas.height ||\n            g2lx(this.refPoint.x + this.w) < 0 ||\n            g2ly(this.refPoint.y + this.h) < 0\n        );\n        if (coreVisible) return true;\n        return false;\n    }\n    snapToGrid() {\n        const gs = gameStore.gridSize;\n        const center = this.center();\n        const mx = center.x;\n        const my = center.y;\n\n        let targetX;\n        let targetY;\n\n        if ((this.w / gs) % 2 === 0) {\n            targetX = Math.round(mx / gs) * gs - this.w / 2;\n        } else {\n            targetX = (Math.round((mx + gs / 2) / gs) - 1 / 2) * gs - this.w / 2;\n        }\n        if ((this.h / gs) % 2 === 0) {\n            targetY = Math.round(my / gs) * gs - this.h / 2;\n        } else {\n            targetY = (Math.round((my + gs / 2) / gs) - 1 / 2) * gs - this.h / 2;\n        }\n\n        const delta = calculateDelta(new Vector(targetX - this.refPoint.x, targetY - this.refPoint.y), this);\n        this.refPoint = this.refPoint.add(delta);\n\n        this.invalidate(false);\n    }\n    resizeToGrid() {\n        const gs = gameStore.gridSize;\n        this.refPoint.x = Math.round(this.refPoint.x / gs) * gs;\n        this.refPoint.y = Math.round(this.refPoint.y / gs) * gs;\n        this.w = Math.max(Math.round(this.w / gs) * gs, gs);\n        this.h = Math.max(Math.round(this.h / gs) * gs, gs);\n        this.invalidate(false);\n    }\n    resize(resizedir: string, point: LocalPoint) {\n        const z = gameStore.zoomFactor;\n        if (resizedir === \"nw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint = l2g(point);\n        } else if (resizedir === \"ne\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = g2ly(this.refPoint.y) + this.h * z - point.y;\n            this.refPoint.y = l2gy(point.y);\n        } else if (resizedir === \"se\") {\n            this.w = point.x - g2lx(this.refPoint.x);\n            this.h = point.y - g2ly(this.refPoint.y);\n        } else if (resizedir === \"sw\") {\n            this.w = g2lx(this.refPoint.x) + this.w * z - point.x;\n            this.h = point.y - g2ly(this.refPoint.y);\n            this.refPoint.x = l2gx(point.x);\n        }\n        this.w /= z;\n        this.h /= z;\n\n        if (this.w < 0) {\n            this.refPoint.x += this.w;\n            this.w = Math.abs(this.w);\n        }\n        if (this.h < 0) {\n            this.refPoint.y += this.h;\n            this.h = Math.abs(this.h);\n        }\n    }\n}\n","import { render, staticRenderFns } from \"./select.vue?vue&type=template&id=da20cb86&\"\nimport script from \"./select.vue?vue&type=script&lang=ts&\"\nexport * from \"./select.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"select.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=61eb1455&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=ts&\"\nexport * from \"./main.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61eb1455\",\n  null\n  \n)\n\ncomponent.options.__file = \"main.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SelectContext',{ref:\"selectcontext\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=template&id=da20cb86&\"","import { partition } from \"@/core/utils\";\nimport { BoundingNode, InteriorNode, LeafNode } from \"@/game/bvh/node\";\nimport { GlobalPoint, Ray } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { BoundingRect } from \"@/game/shapes/boundingrect\";\nimport { g2lx, g2ly, g2lz } from \"@/game/units\";\nimport { gameStore } from \"../store\";\n\ninterface BuildInfo {\n    index: number;\n    bbox: BoundingRect;\n    center: BoundingRect;\n}\ninterface LinearBHVNode {\n    bbox: BoundingRect;\n    nPrimitives: number;\n}\ninterface LinearLeafNode extends LinearBHVNode {\n    primitivesOffset: number;\n}\ninterface LinearInternalNode extends LinearBHVNode {\n    secondChildOffset: number;\n    dimension: number;\n}\n\nexport class BoundingVolume {\n    totalNodes = 0;\n    buildData: BuildInfo[] = [];\n    shapes: string[];\n    orderedPrims: string[] = [];\n    root: BoundingNode | null;\n    nodes: LinearBHVNode[] = [];\n\n    offset = 0;\n\n    constructor(shapes: string[]) {\n        this.shapes = shapes;\n        if (this.shapes.length === 0) {\n            this.root = null;\n            this.nodes = [];\n            return;\n        }\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = layerManager.UUIDMap.get(shapes[i])!;\n            try {\n                this.buildData.push({\n                    index: i,\n                    bbox: shape.getBoundingBox(),\n                    center: new BoundingRect(shape.center(), 0, 0),\n                });\n            } catch {\n                console.warn(`Shape ${shape.type} - ${shape.uuid} cannot be used for vision blocking !!!`);\n                shape.visionObstruction = false;\n                gameStore.visionBlockers.splice(i, 1);\n                throw new Error();\n            }\n        }\n        this.root = this.recursiveBuild(0, shapes.length);\n        this.compact();\n    }\n\n    draw() {\n        const ctx = layerManager.getLayer(\"draw\")!.ctx;\n        for (const node of this.nodes) {\n            const b = node.bbox;\n            ctx.strokeRect(g2lx(b.topLeft.x), g2ly(b.topLeft.y), g2lz(b.w), g2lz(b.h));\n        }\n    }\n\n    recursiveBuild(start: number, end: number): BoundingNode {\n        this.totalNodes++;\n        let bbox = this.buildData[start].bbox;\n        for (let i = start + 1; i < end; i++) bbox = bbox.union(this.buildData[i].bbox);\n        const nPrimitives = end - start;\n        if (nPrimitives === 1) {\n            return this.createLeaf(start, end, nPrimitives, bbox);\n        } else {\n            let centroidBbox = this.buildData[start].center;\n            for (let i = start; i < end; i++) centroidBbox = centroidBbox.union(this.buildData[i].center);\n            const dimension = centroidBbox.getMaxExtent();\n            if (centroidBbox.botRight.get(dimension) === centroidBbox.topLeft.get(dimension)) {\n                return this.createLeaf(start, end, nPrimitives, bbox);\n            }\n            // Use shitty Middle thingy until an introselect js algo is added\n            const pMid = 0.5 * (centroidBbox.topLeft.get(dimension) + centroidBbox.botRight.get(dimension));\n            const partitionedData = partition(\n                this.buildData.slice(start, end),\n                (n: BuildInfo) => n.center.center().get(dimension) < pMid,\n            );\n            const flattened = (<BuildInfo[]>[]).concat.apply([], partitionedData);\n            if (partitionedData[0].length === 0 || partitionedData[1].length === 0) console.log(\"EMPTY\");\n            this.buildData.splice(start, flattened.length, ...flattened);\n            const mid = partitionedData[0].length + start;\n            return new InteriorNode(dimension, this.recursiveBuild(start, mid), this.recursiveBuild(mid, end));\n        }\n    }\n\n    intersect(ray: Ray<GlobalPoint>, stopOnFirstHit?: boolean) {\n        if (this.nodes.length === 0) return { hit: false, intersect: ray.get(0), tMin: 0, tMax: ray.tMax };\n        if (stopOnFirstHit === undefined) stopOnFirstHit = false;\n        // Initialize return values\n        let hit = false;\n        let tMin = 0;\n        let tMax = ray.tMax;\n\n        // Initialize work variables\n        let todoOffset = 0;\n        let nodeNum = 0;\n        const todo: number[] = [];\n\n        // Precalculate intersection vectors\n        const invDir = ray.direction.inverse();\n        const dirIsNegative = [invDir.x < 0, invDir.y < 0];\n\n        while (true) {\n            const node = this.nodes[nodeNum];\n\n            const i = node.bbox.intersectP(ray, invDir, dirIsNegative);\n            if (i.hit) {\n                if (node.nPrimitives > 0) {\n                    // TODO: nPrimitives is currently always 1 , this could be generalised\n                    // for (let i=0; i < node.nPrimitives; i++) {\n                    //     if (this.shapes[(<LinearLeafNode>node).primitivesOffset + i])\n                    // }\n                    hit = true;\n                    tMin = ray.tMax = i.min;\n                    tMax = i.max;\n                    if (todoOffset === 0 || stopOnFirstHit) break;\n                    nodeNum = todo[--todoOffset];\n                } else {\n                    if (dirIsNegative[(<LinearInternalNode>node).dimension]) {\n                        todo[todoOffset++] = nodeNum + 1;\n                        nodeNum = (<LinearInternalNode>node).secondChildOffset;\n                    } else {\n                        todo[todoOffset++] = (<LinearInternalNode>node).secondChildOffset;\n                        nodeNum++;\n                    }\n                }\n            } else {\n                if (todoOffset === 0) break;\n                nodeNum = todo[--todoOffset];\n            }\n        }\n        return { hit, intersect: ray.get(tMin), tMin, tMax };\n    }\n\n    private compact() {\n        this.offset = 0;\n        if (this.root !== null) this.flatten(this.root);\n    }\n\n    private flatten(node: BoundingNode) {\n        const index = this.offset;\n        const myOffset = this.offset++;\n        if (node.nPrimitives === 0) {\n            this.flatten(node.children[0]);\n            const secondOffset = this.flatten(node.children[1]);\n            this.nodes[index] = <LinearInternalNode>{\n                bbox: node.bbox,\n                dimension: (<InteriorNode>node).dimension,\n                nPrimitives: 0,\n                secondChildOffset: secondOffset,\n            };\n        } else {\n            this.nodes[index] = <LinearLeafNode>{\n                bbox: node.bbox,\n                primitivesOffset: (<LeafNode>node).firstPrimOffset,\n                nPrimitives: node.nPrimitives,\n            };\n        }\n        return myOffset;\n    }\n\n    private createLeaf(start: number, end: number, nPrimitives: number, bbox: BoundingRect) {\n        const size = this.orderedPrims.length;\n        for (let i = start; i < end; i++) this.orderedPrims.push(this.shapes[this.buildData[i].index]);\n        return new LeafNode(size, nPrimitives, bbox);\n    }\n}\n","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { gameStore } from \"@/game/store\";\nimport { l2gx, l2gy } from \"@/game/units\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class SelectContext extends Vue {\n    visible = false;\n    x = 0;\n    y = 0;\n\n    get IS_DM(): boolean {\n        return gameStore.IS_DM;\n    }\n\n    open(event: MouseEvent) {\n        this.visible = true;\n        this.x = event.pageX;\n        this.y = event.pageY;\n        this.$nextTick(() => this.$children[0].$el.focus());\n    }\n    close() {\n        this.visible = false;\n    }\n    bringPlayers() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Players.Bring\", { x: l2gx(this.x), y: l2gy(this.y) });\n        this.close();\n    }\n    createToken() {\n        (<any>this.$parent.$parent.$refs.createtokendialog).open(this.x, this.y);\n        this.close();\n    }\n    showInitiative() {\n        EventBus.$emit(\"Initiative.Show\");\n        this.close();\n    }\n}\n","import Axios from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component({ template: \"\" })\nexport default class Logout extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/logout\").then(() => {\n            coreStore.setAuthenticated(false);\n            coreStore.setUsername(\"\");\n            next({ path: \"/auth/login\" });\n        });\n    }\n}\n","import { getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { rootStore } from \"@/store\";\n\nexport interface CoreState {\n    authenticated: boolean;\n    initialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"core\" })\nclass CoreStore extends VuexModule {\n    authenticated = false;\n    initialized = false;\n    username = \"\";\n\n    @Mutation\n    setAuthenticated(auth: boolean) {\n        this.authenticated = auth;\n    }\n\n    @Mutation\n    setInitialized(init: boolean) {\n        this.initialized = init;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n}\n\nexport const coreStore = getModule(CoreStore);\n","import Vue from \"vue\";\n\nimport App from \"@/App.vue\";\nimport { router } from \"@/router\";\nimport { rootStore } from \"@/store\";\n\nVue.config.productionTip = false;\nVue.config.devtools = true;\nVue.config.performance = true;\n\nexport const app = new Vue({\n    router,\n    store: rootStore,\n    render: h => h(App),\n}).$mount(\"#app\");\n\n(<any>window).app = app;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({\n    props: [\"visible\", \"left\", \"top\"],\n})\nexport default class ContextMenu extends Vue {}\n","import Axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Route } from \"vue-router\";\n\n@Component({ template: \"\" })\nexport default class Initiative extends Vue {\n    beforeRouteEnter(to: Route, from: Route, next: ({}) => {}) {\n        Axios.post(\"/api/invite\", {\n            code: to.params.code,\n        })\n            .then((response: AxiosResponse) => {\n                next({ path: response.data.sessionUrl });\n            })\n            .catch((error: AxiosError) => {\n                console.error(\"Invitation code could not be redeemed\");\n                next({ path: \"/dashboard\" });\n            });\n    }\n}\n","import { render, staticRenderFns } from \"./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"\nimport script from \"./prompt.vue?vue&type=script&lang=ts&\"\nexport * from \"./prompt.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./prompt.vue?vue&type=style&index=0&id=0602c2e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0602c2e6\",\n  null\n  \n)\n\ncomponent.options.__file = \"prompt.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6bbf3b79&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./edit_dialog.vue?vue&type=template&id=078b3b76&scoped=true&\"\nimport script from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit_dialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./edit_dialog.vue?vue&type=style&index=0&id=078b3b76&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"078b3b76\",\n  null\n  \n)\n\ncomponent.options.__file = \"edit_dialog.vue\"\nexport default component.exports","export class Settings {\n    static angleSteps = 4;\n    static drawAngleLines = false;\n    static drawFirstLightHit = false;\n    static skipPlayerFOW = false;\n    static skipLightFOW = false;\n\n    static tempFill: string = \"fog\";\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport { coreStore } from \"@/core/store\";\n\n@Component\nexport default class Login extends Vue {\n    username = \"\";\n    password = \"\";\n    error = \"\";\n\n    login() {\n        axios\n            .post(\"/api/login\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    register() {\n        axios\n            .post(\"/api/register\", {\n                username: this.username,\n                password: this.password,\n            })\n            .then((response: AxiosResponse) => {\n                coreStore.setUsername(this.username);\n                coreStore.setAuthenticated(true);\n                this.$router.push(<string>this.$route.query.redirect || \"/\");\n            })\n            .catch((error: AxiosError) => {\n                if (error.response) this.error = error.response.statusText;\n                else this.error = \"Unknown error occured\";\n            });\n    }\n\n    focusin(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"0\";\n        }\n    }\n\n    focusout(event: { target?: { nextElementSibling?: HTMLElement } }) {\n        if (event.target && event.target.nextElementSibling) {\n            const span = event.target.nextElementSibling;\n            span.style.opacity = \"1\";\n        }\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tool.vue?vue&type=template&id=1e034b42&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"mask\",class:{'modal-mask': _vm.mask, 'dialog-mask': !_vm.mask},on:{\"click\":_vm.close,\"dragover\":function($event){$event.preventDefault();return _vm.dragOver($event)}}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"header\",null,{dragStart:_vm.dragStart,dragEnd:_vm.dragEnd}),_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./game.vue?vue&type=script&lang=ts&\"","import Component from \"vue-class-component\";\n\nimport Tool from \"@/game/ui/tools/tool.vue\";\n\nimport { socket } from \"@/game/api/socket\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Line } from \"@/game/shapes/line\";\nimport { Text } from \"@/game/shapes/text\";\nimport { gameStore } from \"@/game/store\";\nimport { l2g } from \"@/game/units\";\nimport { getMouse } from \"@/game/utils\";\n\n@Component\nexport class RulerTool extends Tool {\n    name = \"Ruler\";\n    active = false;\n    startPoint: GlobalPoint | null = null;\n    ruler: Line | null = null;\n    text: Text | null = null;\n    onMouseDown(event: MouseEvent) {\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        this.active = true;\n        this.startPoint = l2g(getMouse(event));\n        this.ruler = new Line(this.startPoint, this.startPoint, 3, gameStore.rulerColour);\n        this.text = new Text(this.startPoint.clone(), \"\", \"bold 20px serif\");\n        this.ruler.owners.push(gameStore.username);\n        this.text.owners.push(gameStore.username);\n        layer.addShape(this.ruler, true, true);\n        layer.addShape(this.text, true, true);\n    }\n    onMouseMove(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No draw layer!\");\n            return;\n        }\n        const endPoint = l2g(getMouse(event));\n\n        this.ruler.endPoint = endPoint;\n        socket.emit(\"Shape.Update\", { shape: this.ruler!.asDict(), redraw: true, temporary: true });\n\n        const diffsign = Math.sign(endPoint.x - this.startPoint.x) * Math.sign(endPoint.y - this.startPoint.y);\n        const xdiff = Math.abs(endPoint.x - this.startPoint.x);\n        const ydiff = Math.abs(endPoint.y - this.startPoint.y);\n        const label =\n            Math.round((Math.sqrt(xdiff ** 2 + ydiff ** 2) * gameStore.unitSize) / gameStore.gridSize) + \" ft\";\n        const angle = Math.atan2(diffsign * ydiff, xdiff);\n        const xmid = Math.min(this.startPoint.x, endPoint.x) + xdiff / 2;\n        const ymid = Math.min(this.startPoint.y, endPoint.y) + ydiff / 2;\n        this.text.refPoint.x = xmid;\n        this.text.refPoint.y = ymid;\n        this.text.text = label;\n        this.text.angle = angle;\n        socket.emit(\"Shape.Update\", { shape: this.text.asDict(), redraw: true, temporary: true });\n        layer.invalidate(true);\n    }\n    onMouseUp(event: MouseEvent) {\n        if (!this.active || this.ruler === null || this.startPoint === null || this.text === null) return;\n\n        const layer = layerManager.getLayer(\"draw\");\n        if (layer === undefined) {\n            console.log(\"No active layer!\");\n            return;\n        }\n        this.active = false;\n\n        layer.removeShape(this.ruler, true, true);\n        layer.removeShape(this.text, true, true);\n        layer.invalidate(true);\n        this.ruler = this.startPoint = this.text = null;\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=081515c4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=081515c4&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=12ed61ba&scoped=true&\"\nimport script from \"./modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&id=12ed61ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12ed61ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"modal.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createtoken_modal.vue?vue&type=style&index=0&id=66ccc134&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=61eb1455&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"focusin\":_vm.focusin,\"focusout\":_vm.focusout,\"submit\":function($event){$event.preventDefault();return _vm.login($event)}}},[_c('fieldset',[_c('legend',{staticClass:\"legend\"},[_vm._v(\"PlanarAlly\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"name\":\"username\",\"placeholder\":\"Username\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"placeholder\":\"Password\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._m(1)]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('button',{staticStyle:{\"visibility\":\"hidden\",\"display\":\"none\"},attrs:{\"type\":\"submit\",\"name\":\"login\"}}),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"name\":\"register\",\"title\":\"Register\"},on:{\"click\":_vm.register}},[_c('i',{staticClass:\"fas fa-plus\"})]),_vm._m(2)])]),(_vm.error)?_c('div',{staticClass:\"feedback\"},[_c('p',{staticClass:\"error\"},[_c('strong',[_vm._v(\"Error:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.error)+\"\\n    \")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-user-circle\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('i',{staticClass:\"fas fa-lock\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"login\",\"title\":\"Login\"}},[_c('i',{staticClass:\"fas fa-arrow-right\"})])}]\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=6bbf3b79&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport ColorPicker from \"@/core/components/colorpicker.vue\";\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\nimport { gameStore } from \"@/game/store\";\nimport { Prop } from \"vue-property-decorator\";\n\n@Component({\n    components: {\n        Modal,\n        \"color-picker\": ColorPicker,\n    },\n})\nexport default class EditDialog extends Vue {\n    @Prop() shape!: Shape;\n\n    visible = false;\n    updated() {\n        this.addEmpty();\n    }\n    addEmpty() {\n        if (this.shape.owners[this.shape.owners.length - 1] !== \"\") this.shape.owners.push(\"\");\n        if (\n            !this.shape.trackers.length ||\n            this.shape.trackers[this.shape.trackers.length - 1].name !== \"\" ||\n            this.shape.trackers[this.shape.trackers.length - 1].value !== 0\n        )\n            this.shape.trackers.push({ uuid: uuidv4(), name: \"\", value: 0, maxvalue: 0, visible: false });\n        if (\n            !this.shape.auras.length ||\n            this.shape.auras[this.shape.auras.length - 1].name !== \"\" ||\n            this.shape.auras[this.shape.auras.length - 1].value !== 0\n        )\n            this.shape.auras.push({\n                uuid: uuidv4(),\n                name: \"\",\n                value: 0,\n                dim: 0,\n                visionSource: false,\n                colour: \"rgba(0,0,0,0)\",\n                visible: false,\n            });\n    }\n    updateShape(redraw: boolean) {\n        socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n        if (redraw) layerManager.invalidate();\n        this.addEmpty();\n    }\n    setToken(event: { target: HTMLInputElement }) {\n        this.shape.setIsToken(event.target.checked);\n        this.updateShape(true);\n    }\n    setVisionBlocker(event: { target: HTMLInputElement }) {\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    setMovementBlocker(event: { target: HTMLInputElement }) {\n        this.shape.setMovementBlock(event.target.checked);\n        this.updateShape(false);\n    }\n    updateAnnotation(event: { target: HTMLInputElement }) {\n        const hadAnnotation = this.shape.annotation !== \"\";\n        this.shape.annotation = event.target.value;\n        if (this.shape.annotation !== \"\" && !hadAnnotation) {\n            gameStore.annotations.push(this.shape.uuid);\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        } else if (this.shape.annotation === \"\" && hadAnnotation) {\n            gameStore.annotations.splice(gameStore.annotations.findIndex(an => an === this.shape.uuid));\n            if (layerManager.hasLayer(\"draw\")) layerManager.getLayer(\"draw\")!.invalidate(true);\n        }\n        this.updateShape(false);\n    }\n    updateOwner(event: { target: HTMLInputElement }, oldValue: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === oldValue);\n        if (ownerIndex >= 0) this.shape.owners.splice(ownerIndex, 1, event.target.value);\n        else this.shape.owners.push(event.target.value);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeOwner(value: string) {\n        const ownerIndex = this.shape.owners.findIndex(o => o === value);\n        this.shape.owners.splice(ownerIndex, 1);\n        this.updateShape(gameStore.fowLOS);\n    }\n    removeTracker(uuid: string) {\n        this.shape.trackers = this.shape.trackers.filter(tr => tr.uuid !== uuid);\n        this.updateShape(false);\n    }\n    removeAura(uuid: string) {\n        this.shape.auras = this.shape.auras.filter(au => au.uuid !== uuid);\n        this.shape.checkVisionSources();\n        this.updateShape(true);\n    }\n    updateAuraVisionSource(aura: Aura) {\n        aura.visionSource = !aura.visionSource;\n        const i = gameStore.visionSources.findIndex(ls => ls.aura === aura.uuid);\n        if (aura.visionSource && i === -1) gameStore.visionSources.push({ shape: this.shape.uuid, aura: aura.uuid });\n        else if (!aura.visionSource && i >= 0) gameStore.visionSources.splice(i, 1);\n        // aura.lastPath = undefined;\n        layerManager.invalidateLight();\n        this.updateShape(true);\n    }\n    updateAuraColour(aura: Aura, colour: string) {\n        const layer = layerManager.getLayer(this.shape.layer);\n        if (layer === undefined) return;\n        layer.invalidate(!aura.visionSource);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\n@Component({\n    components: {\n        Modal,\n    },\n})\nexport default class ConfirmDialog extends Vue {\n    $refs!: {\n        confirm: HTMLButtonElement;\n    };\n\n    visible = false;\n    yes = \"Yes\";\n    no = \"No\";\n    title = \"\";\n\n    resolve = (ok: boolean) => {};\n    reject = () => {};\n\n    confirm() {\n        this.resolve(true);\n        this.close();\n    }\n    deny() {\n        this.resolve(false);\n        this.close();\n    }\n    close() {\n        this.reject();\n        this.visible = false;\n        this.title = \"\";\n    }\n    open(title: string, yes = \"yes\", no = \"no\"): Promise<boolean> {\n        this.yes = yes;\n        this.no = no;\n        this.title = title;\n\n        this.visible = true;\n        this.$nextTick(() => {\n            this.$refs.confirm.focus();\n        });\n\n        return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\n","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=f93438ce&\"\nimport script from \"./map.vue?vue&type=script&lang=ts&\"\nexport * from \"./map.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContextMenu',{attrs:{\"visible\":_vm.visible,\"left\":_vm.left + 'px',\"top\":_vm.top + 'px'},on:{\"close\":_vm.close}},[_c('li',{on:{\"click\":_vm.rename}},[_vm._v(\"Rename\")]),_c('li',{on:{\"click\":_vm.remove}},[_vm._v(\"Remove\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=template&id=d4f084a4&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_c('button',{ref:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(_vm._s(_vm.yes))]),(!!_vm.no)?_c('button',{on:{\"click\":_vm.deny}},[_vm._v(_vm._s(_vm.no))]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=template&id=1883e207&scoped=true&\"","\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport Component from \"vue-class-component\";\n\nimport AssetManager from \"@/assetManager/manager.vue\";\nimport ContextMenu from \"@/core/components/contextmenu.vue\";\nimport ConfirmDialog from \"@/core/components/modals/confirm.vue\";\nimport Prompt from \"@/core/components/modals/prompt.vue\";\n\nimport { socket } from \"@/assetManager/socket\";\nimport { assetStore } from \"@/assetManager/store\";\nimport { getComponent, getRef } from \"@/core/utils\";\n\n@Component({\n    components: {\n        ContextMenu,\n    },\n})\nexport default class AssetContextMenu extends Vue {\n    visible = false;\n    left = 0;\n    top = 0;\n    open(event: MouseEvent, inode: number) {\n        if (!assetStore.selected.includes(inode)) getComponent<any>().select(event, inode);\n\n        this.visible = true;\n        this.left = event.pageX;\n        this.top = event.pageY;\n        this.$nextTick(() => {\n            this.$children[0].$el.focus();\n        });\n    }\n    close() {\n        this.visible = false;\n    }\n    rename() {\n        if (assetStore.selected.length !== 1) return;\n        const asset = assetStore.idMap.get(assetStore.selected[0])!;\n\n        getRef<Prompt>(\"prompt\")\n            .prompt(\"New name:\", `Renaming ${asset.name}`)\n            .then(\n                (name: string) => {\n                    socket.emit(\"Asset.Rename\", {\n                        asset: asset.id,\n                        name,\n                    });\n                    asset.name = name;\n                    getComponent().$forceUpdate();\n                },\n                () => {},\n            );\n        this.close();\n    }\n    remove() {\n        if (assetStore.selected.length === 0) return;\n        getRef<ConfirmDialog>(\"confirm\")\n            .open(\"Are you sure you wish to remove this?\")\n            .then(\n                (result: boolean) => {\n                    if (result) {\n                        for (const sel of assetStore.selected) {\n                            socket.emit(\"Asset.Remove\", sel);\n                            if (assetStore.isFile(sel)) assetStore.files.splice(assetStore.files.indexOf(sel), 1);\n                            else assetStore.folders.splice(assetStore.folders.indexOf(sel), 1);\n                        }\n                        assetStore.selected = [];\n                    }\n                },\n                () => {},\n            );\n        this.close();\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./manager.vue?vue&type=template&id=d1ce9748&\"\nimport script from \"./manager.vue?vue&type=script&lang=ts&\"\nexport * from \"./manager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./manager.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"manager.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./tool.vue?vue&type=template&id=1e034b42&\"\nimport script from \"./tool.vue?vue&type=script&lang=ts&\"\nexport * from \"./tool.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./tool.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"tool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"visible\":_vm.visible},on:{\"close\":_vm.close},scopedSlots:_vm._u([{key:\"header\",fn:function(m){return _c('div',{staticClass:\"modal-header\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":m.dragStart,\"dragend\":m.dragEnd}},[_vm._v(_vm._s(_vm.title))])}}])},[_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.question)+\"\\n    \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.answer),expression:\"answer\"}],ref:\"answer\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.answer)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.answer=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prompt.vue?vue&type=template&id=0602c2e6&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport draggable from \"vuedraggable\";\nVue.component(\"draggable\", draggable);\n\nimport Modal from \"@/core/components/modals/modal.vue\";\n\nimport { uuidv4 } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { InitiativeData, InitiativeEffect } from \"@/game/comm/types/general\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\n@Component({\n    components: {\n        Modal,\n        draggable,\n    },\n})\nexport default class Initiative extends Vue {\n    visible = false;\n    data: InitiativeData[] = [];\n    currentActor: string | null = null;\n    roundCounter = 0;\n\n    mounted() {\n        EventBus.$on(\"Initiative.Clear\", this.clear);\n        EventBus.$on(\"Initiative.Remove\", (data: string) => this.removeInitiative(data));\n        EventBus.$on(\"Initiative.Show\", () => (this.visible = true));\n\n        socket.on(\"Initiative.Set\", (data: InitiativeData[]) => {\n            this.data = data;\n        });\n        socket.on(\"Initiative.Turn.Update\", (data: string) => this.setTurn(data, false));\n        socket.on(\"Initiative.Round.Update\", (data: number) => this.setRound(data, false));\n        socket.on(\"Initiative.Effect.New\", (data: { actor: string; effect: InitiativeEffect }) => {\n            const actor = this.getActor(data.actor);\n            if (actor === undefined) return;\n            this.createEffect(actor, data.effect, false);\n        });\n        socket.on(\"Initiative.Effect.Update\", (data: { actor: string; effect: InitiativeEffect }) =>\n            this.updateEffect(data.actor, data.effect, false),\n        );\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    // Utilities\n    clear() {\n        this.data = [];\n        this.currentActor = null;\n    }\n    getActor(actorId: string) {\n        return this.data.find(a => a.uuid === actorId);\n    }\n    contains(uuid: string) {\n        return this.data.some(d => d.uuid === uuid);\n    }\n    owns(actor: InitiativeData): boolean {\n        if (gameStore.IS_DM) return true;\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        // Shapes that are unknown to this client are hidden from this client but owned by other clients\n        if (shape === undefined) return false;\n        return shape.owners.includes(gameStore.username);\n    }\n    getDefaultEffect() {\n        return { uuid: uuidv4(), name: \"New Effect\", turns: 10 };\n    }\n    fakeSetData(dataTransfer: DataTransfer) {\n        dataTransfer.setData(\"Hack\", \"\");\n    }\n    syncInitiative(data: InitiativeData | { uuid: string }) {\n        socket.emit(\"Initiative.Update\", data);\n    }\n    // Events\n    addInitiative(data: InitiativeData) {\n        const d = this.data.findIndex(a => a.uuid === data.uuid);\n        if (d >= 0) return;\n        if (data.initiative === undefined) data.initiative = 0;\n        this.syncInitiative(data);\n    }\n    removeInitiative(uuid: string) {\n        const d = this.data.findIndex(a => a.uuid === uuid);\n        if (d < 0 || this.data[d].group) return;\n        this.syncInitiative({ uuid });\n        // Remove highlight\n        const shape = layerManager.UUIDMap.get(uuid);\n        if (shape === undefined) return;\n        if (shape.showHighlight) {\n            shape.showHighlight = false;\n            layerManager.getLayer(shape.layer)!.invalidate(true);\n        }\n    }\n    updateOrder() {\n        if (!gameStore.IS_DM) return;\n        socket.emit(\"Initiative.Set\", this.data.map(d => d.uuid));\n    }\n    setTurn(actorId: string | null, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.currentActor = actorId;\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        if (actor.effects) {\n            for (let e = actor.effects.length - 1; e >= 0; e--) {\n                if (actor.effects[e].turns <= 0) actor.effects.splice(e, 1);\n                else actor.effects[e].turns--;\n            }\n        }\n        if (sync) socket.emit(\"Initiative.Turn.Update\", actorId);\n    }\n    setRound(round: number, sync: boolean) {\n        if (!gameStore.IS_DM && sync) return;\n        this.roundCounter = round;\n        if (sync) socket.emit(\"Initiative.Round.Update\", round);\n    }\n    nextTurn() {\n        if (!gameStore.IS_DM) return;\n        const order = this.data;\n        const next = order[(order.findIndex(a => a.uuid === this.currentActor) + 1) % order.length];\n        if (this.data[0].uuid === next.uuid) this.setRound(this.roundCounter + 1, true);\n        this.setTurn(next.uuid, true);\n    }\n    toggleHighlight(actor: InitiativeData, show: boolean) {\n        const shape = layerManager.UUIDMap.get(actor.uuid);\n        if (shape === undefined) return;\n        shape.showHighlight = show;\n        layerManager.getLayer(shape.layer)!.invalidate(true);\n    }\n    toggleOption(actor: InitiativeData, option: \"visible\" | \"group\") {\n        if (!this.owns(actor)) return;\n        actor[option] = !actor[option];\n        this.syncInitiative(actor);\n    }\n    createEffect(actor: InitiativeData, effect: InitiativeEffect, sync: boolean) {\n        if (!this.owns(actor)) return;\n        actor.effects.push(effect);\n        if (sync) socket.emit(\"Initiative.Effect.New\", { actor: actor.uuid, effect });\n    }\n    syncEffect(actor: InitiativeData, effect: InitiativeEffect) {\n        if (!this.owns(actor)) return;\n        socket.emit(\"Initiative.Effect.Update\", { actor: actor.uuid, effect });\n    }\n    updateEffect(actorId: string, effect: InitiativeEffect, sync: boolean) {\n        const actor = this.data.find(a => a.uuid === actorId);\n        if (actor === undefined) return;\n        const effectIndex = actor.effects.findIndex(e => e.uuid === effect.uuid);\n        if (effectIndex === undefined) return;\n        actor.effects[effectIndex] = effect;\n        if (sync) this.syncEffect(actor, effect);\n        else this.$forceUpdate();\n    }\n}\n","import { render, staticRenderFns } from \"./selection_info.vue?vue&type=template&id=32cec914&scoped=true&\"\nimport script from \"./selection_info.vue?vue&type=script&lang=ts&\"\nexport * from \"./selection_info.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./selection_info.vue?vue&type=style&index=0&id=32cec914&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32cec914\",\n  null\n  \n)\n\ncomponent.options.__file = \"selection_info.vue\"\nexport default component.exports","// import Vuex from \"vuex\";\nimport { Action, getModule, Module, Mutation, VuexModule } from \"vuex-module-decorators\";\n\nimport { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { sendClientOptions } from \"@/game/api/utils\";\nimport { BoundingVolume } from \"@/game/bvh/bvh\";\nimport { Note } from \"@/game/comm/types/general\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { g2l, l2g } from \"@/game/units\";\nimport { rootStore } from \"@/store\";\n\nexport interface GameState {\n    boardInitialized: boolean;\n}\n\n@Module({ dynamic: true, store: rootStore, name: \"game\", namespaced: true })\nclass GameStore extends VuexModule {\n    // This is a limited view of selectable layers that is used to generate the layer selection UI and ability to switch layers\n    // See the layerManager for proper layer management tools\n    layers: string[] = [];\n    selectedLayerIndex = -1;\n    boardInitialized = false;\n\n    locations: string[] = [];\n\n    assets: AssetList = {};\n\n    notes: Note[] = [];\n\n    IS_DM = false;\n    gridSize = 50;\n    username = \"\";\n    roomName = \"\";\n    roomCreator = \"\";\n    invitationCode = \"\";\n\n    gridColour = \"rgba(0, 0, 0, 1)\";\n    fowColour = \"rgba(0, 0, 0, 1)\";\n    rulerColour = \"rgba(255, 0, 0, 1)\";\n    panX = 0;\n    panY = 0;\n    zoomFactor = 1;\n\n    unitSize = 5;\n    useGrid = true;\n    fullFOW = false;\n    fowOpacity = 0.3;\n    fowLOS = false;\n    locationName = \"\";\n\n    visionSources: { shape: string; aura: string }[] = [];\n    visionBlockers: string[] = [];\n    annotations: string[] = [];\n    movementblockers: string[] = [];\n    ownedtokens: string[] = [];\n\n    BV = Object.freeze(new BoundingVolume([]));\n\n    get selectedLayer() {\n        return this.layers[this.selectedLayerIndex];\n    }\n\n    @Mutation\n    setBoardInitialized(boardInitialized: boolean) {\n        this.boardInitialized = boardInitialized;\n    }\n\n    @Mutation\n    setDM(isDM: boolean) {\n        this.IS_DM = isDM;\n    }\n\n    @Mutation\n    setUsername(username: string) {\n        this.username = username;\n    }\n\n    @Mutation\n    setRoomName(name: string) {\n        this.roomName = name;\n    }\n\n    @Mutation\n    setRoomCreator(name: string) {\n        this.roomCreator = name;\n    }\n\n    @Mutation\n    setInvitationCode(code: string) {\n        this.invitationCode = code;\n    }\n\n    @Mutation\n    addLayer(name: string) {\n        this.layers.push(name);\n        if (this.selectedLayerIndex === -1) this.selectedLayerIndex = this.layers.indexOf(name);\n    }\n\n    @Mutation\n    selectLayer(data: { name: string; sync: boolean }) {\n        const index = this.layers.indexOf(data.name);\n        if (index >= 0) this.selectedLayerIndex = index;\n        if (data.sync) socket.emit(\"Client.ActiveLayer.Set\", data.name);\n    }\n\n    @Mutation\n    newNote(data: { note: Note; sync: boolean }) {\n        this.notes.push(data.note);\n        if (data.sync) socket.emit(\"Note.New\", data.note);\n    }\n\n    @Mutation\n    setAssets(assets: AssetList) {\n        this.assets = assets;\n    }\n\n    @Mutation\n    setLocations(locations: string[]) {\n        this.locations = locations;\n    }\n\n    @Mutation\n    resetLayerInfo() {\n        this.layers = [];\n        this.selectedLayerIndex = -1;\n    }\n\n    @Mutation\n    recalculateBV() {\n        // TODO: This needs to be cleaned up..\n        if (this.boardInitialized) {\n            let success = false;\n            let tries = 0;\n            while (!success) {\n                success = true;\n                try {\n                    this.BV = Object.freeze(new BoundingVolume(this.visionBlockers));\n                } catch (error) {\n                    success = false;\n                    tries++;\n                    if (tries > 10) {\n                        console.error(error);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    @Mutation\n    updateZoom(data: { newZoomValue: number; zoomLocation: GlobalPoint }) {\n        if (data.newZoomValue === this.zoomFactor) return;\n        if (data.newZoomValue < 0.1) data.newZoomValue = 0.1;\n        if (data.newZoomValue > 5) data.newZoomValue = 5;\n\n        const oldLoc = g2l(data.zoomLocation);\n\n        this.zoomFactor = data.newZoomValue;\n\n        const newLoc = l2g(oldLoc);\n\n        // Change the pan settings to keep the zoomLocation in the same exact location before and after the zoom.\n        const diff = newLoc.subtract(data.zoomLocation);\n        this.panX += diff.x;\n        this.panY += diff.y;\n\n        layerManager.invalidate();\n        sendClientOptions();\n    }\n\n    @Mutation\n    setGridColour(data: { colour: string; sync: boolean }) {\n        this.gridColour = data.colour;\n        layerManager.getGridLayer()!.drawGrid();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { gridColour: data.colour });\n    }\n\n    @Mutation\n    setFOWColour(data: { colour: string; sync: boolean }) {\n        this.fowColour = data.colour;\n        layerManager.invalidate();\n        if (data.sync) socket.emit(\"Client.Options.Set\", { fowColour: data.colour });\n    }\n\n    @Mutation\n    setRulerColour(data: { colour: string; sync: boolean }) {\n        this.rulerColour = data.colour;\n        if (data.sync) socket.emit(\"Client.Options.Set\", { rulerColour: data.colour });\n    }\n\n    @Mutation\n    setPanX(x: number) {\n        this.panX = x;\n    }\n\n    @Mutation\n    setPanY(y: number) {\n        this.panY = y;\n    }\n\n    @Mutation\n    setZoomFactor(zoomFactor: number) {\n        this.zoomFactor = zoomFactor;\n    }\n\n    @Mutation\n    increasePanX(increase: number) {\n        this.panX += increase;\n    }\n\n    @Mutation\n    increasePanY(increase: number) {\n        this.panY += increase;\n    }\n\n    @Mutation\n    setUnitSize(data: { unitSize: number; sync: boolean }) {\n        if (this.unitSize !== data.unitSize && data.unitSize > 0 && data.unitSize < Infinity) {\n            this.unitSize = data.unitSize;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { unit_size: data.unitSize });\n        }\n    }\n\n    @Mutation\n    setUseGrid(data: { useGrid: boolean; sync: boolean }) {\n        if (this.useGrid !== data.useGrid) {\n            this.useGrid = data.useGrid;\n            const gridLayer = layerManager.getGridLayer()!;\n            if (data.useGrid) gridLayer.canvas.style.display = \"block\";\n            else gridLayer.canvas.style.display = \"none\";\n            if (data.sync) socket.emit(\"Location.Options.Set\", { use_grid: data.useGrid });\n        }\n    }\n\n    @Mutation\n    setGridSize(data: { gridSize: number; sync: boolean }): void {\n        if (this.gridSize !== data.gridSize && data.gridSize > 0) {\n            this.gridSize = data.gridSize;\n            const gridLayer = layerManager.getGridLayer();\n            if (gridLayer !== undefined) gridLayer.drawGrid();\n            if (data.sync) socket.emit(\"Gridsize.Set\", data.gridSize);\n        }\n    }\n\n    @Mutation\n    setFullFOW(data: { fullFOW: boolean; sync: boolean }) {\n        if (this.fullFOW !== data.fullFOW) {\n            this.fullFOW = data.fullFOW;\n            layerManager.invalidateLight();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { full_fow: data.fullFOW });\n        }\n    }\n\n    @Mutation\n    setFOWOpacity(data: { fowOpacity: number; sync: boolean }) {\n        this.fowOpacity = data.fowOpacity;\n        layerManager.invalidateLight();\n        if (data.sync) socket.emit(\"Location.Options.Set\", { fow_opacity: data.fowOpacity });\n    }\n\n    @Mutation\n    setLineOfSight(data: { fowLOS: boolean; sync: boolean }) {\n        if (this.fowLOS !== data.fowLOS) {\n            this.fowLOS = data.fowLOS;\n            layerManager.invalidate();\n            if (data.sync) socket.emit(\"Location.Options.Set\", { fow_los: data.fowLOS });\n        }\n    }\n\n    @Mutation\n    setLocationName(name: string) {\n        this.locationName = name;\n    }\n\n    @Mutation\n    updateNote(data: { note: Note; sync: boolean }) {\n        const actualNote = this.notes.find(n => n.uuid === data.note.uuid);\n        if (actualNote === undefined) return;\n        actualNote.title = data.note.title;\n        actualNote.text = data.note.text;\n        if (data.sync) socket.emit(\"Note.Update\", actualNote);\n    }\n\n    @Mutation\n    removeNote(data: { note: Note; sync: boolean }) {\n        this.notes = this.notes.filter(n => n.uuid !== data.note.uuid);\n        if (data.sync) socket.emit(\"Note.Remove\", data.note.uuid);\n    }\n\n    @Action\n    clear() {\n        (<any>this.context.state).visionSources = [];\n        (<any>this.context.state).visionBlockers = [];\n        (<any>this.context.state).ownedtokens = [];\n        (<any>this.context.state).annotations = [];\n        (<any>this.context.state).movementblockers = [];\n        this.context.commit(\"recalculateBV\");\n    }\n}\n\nexport const gameStore = getModule(GameStore);\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=ts&\"","import { ServerAura } from \"@/game/comm/types/shapes\";\n\nexport const aurasFromServer = (auras: ServerAura[]): Aura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            visionSource: aura.vision_source,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n\nexport const aurasToServer = (auras: Aura[]): ServerAura[] => {\n    const result = [];\n    for (const aura of auras) {\n        result.push({\n            uuid: aura.uuid,\n            vision_source: aura.visionSource,\n            visible: aura.visible,\n            name: aura.name,\n            value: aura.value,\n            dim: aura.dim,\n            colour: aura.colour,\n        });\n    }\n    return result;\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./contextMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./note.vue?vue&type=template&id=7a3669fd&scoped=true&\"\nimport script from \"./note.vue?vue&type=script&lang=ts&\"\nexport * from \"./note.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./note.vue?vue&type=style&index=0&id=7a3669fd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a3669fd\",\n  null\n  \n)\n\ncomponent.options.__file = \"note.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./initiative.vue?vue&type=template&id=ccaf03d6&scoped=true&\"\nimport script from \"./initiative.vue?vue&type=script&lang=ts&\"\nexport * from \"./initiative.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./initiative.vue?vue&type=style&index=0&id=ccaf03d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccaf03d6\",\n  null\n  \n)\n\ncomponent.options.__file = \"initiative.vue\"\nexport default component.exports","import { ServerLayer } from \"@/game/comm/types/general\";\nimport { FOWLayer } from \"@/game/layers/fow\";\nimport { FOWPlayersLayer } from \"@/game/layers/fowplayers\";\nimport { GridLayer } from \"@/game/layers/grid\";\nimport { Layer } from \"@/game/layers/layer\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { gameStore } from \"@/game/store\";\n\nexport function createLayer(layerInfo: ServerLayer) {\n    // Create canvas element\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.zIndex = layerManager.layers.length.toString();\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    // Create the Layer instance\n    let layer: Layer;\n    if (layerInfo.type_ === \"grid\") layer = new GridLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow\") layer = new FOWLayer(canvas, layerInfo.name);\n    else if (layerInfo.type_ === \"fow-players\") layer = new FOWPlayersLayer(canvas, layerInfo.name);\n    else layer = new Layer(canvas, layerInfo.name);\n    layer.selectable = layerInfo.selectable;\n    layer.playerEditable = layerInfo.player_editable;\n    layerManager.addLayer(layer);\n\n    // Add the element to the DOM\n    const layers = document.getElementById(\"layers\");\n    if (layers === null) {\n        console.warn(\"Layers div is missing, this will prevent the main game board from loading!\");\n        return;\n    }\n    if (layerInfo.name !== \"fow-players\") layers.appendChild(canvas);\n\n    if (layerInfo.type_ === \"grid\" && layerInfo.size) gameStore.setGridSize({ gridSize: layerInfo.size, sync: false });\n    // Load layer shapes\n    layer.setShapes(layerInfo.shapes);\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_dialog.vue?vue&type=script&lang=ts&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selected)?_c('div',{staticClass:\"tool-detail\",style:({'--detailRight': _vm.detailRight, '--detailArrow': _vm.detailArrow})},[_c('div',[_vm._v(\"#X\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.xCount),expression:\"xCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.xCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.xCount=$event.target.value}}}),_c('div',[_vm._v(\"#Y\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yCount),expression:\"yCount\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yCount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yCount=$event.target.value}}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!cache-loader?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"339cf1e4-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=template&id=f93438ce&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nimport Prompt from \"@/core/components/modals/prompt.vue\";\nimport EditDialog from \"@/game/ui/selection/edit_dialog.vue\";\n\nimport { getRef } from \"@/core/utils\";\nimport { socket } from \"@/game/api/socket\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { Shape } from \"@/game/shapes/shape\";\n\n@Component({\n    components: {\n        \"edit-dialog\": EditDialog,\n    },\n})\nexport default class SelectionInfo extends Vue {\n    shape: Shape | null = null;\n\n    mounted() {\n        EventBus.$on(\"SelectionInfo.Shape.Set\", (shape: Shape | null) => {\n            this.shape = shape;\n        });\n    }\n\n    beforeDestroy() {\n        EventBus.$off();\n    }\n\n    openEditDialog() {\n        (<any>this.$refs.editDialog).visible = true;\n    }\n    changeValue(object: Tracker | Aura, redraw: boolean) {\n        if (this.shape === null) return;\n        getRef<Prompt>(\"prompt\")\n            .prompt(`New  ${object.name} value:`, `Updating ${object.name}`)\n            .then(\n                (value: string) => {\n                    if (this.shape === null) return;\n                    const ogValue = object.value;\n                    if (value[0] === \"+\" || value[0] === \"-\") object.value += parseInt(value, 10);\n                    else object.value = parseInt(value, 10);\n                    if (isNaN(object.value)) object.value = ogValue;\n                    socket.emit(\"Shape.Update\", { shape: this.shape.asDict(), redraw, temporary: false });\n                    if (redraw) layerManager.invalidate();\n                },\n                () => {},\n            );\n    }\n}\n","import { AssetList } from \"@/core/comm/types\";\nimport { socket } from \"@/game/api/socket\";\nimport { BoardInfo, Note, ServerClient, ServerLocation } from \"@/game/comm/types/general\";\nimport { ServerShape } from \"@/game/comm/types/shapes\";\nimport { EventBus } from \"@/game/event-bus\";\nimport { GlobalPoint } from \"@/game/geom\";\nimport { layerManager } from \"@/game/layers/manager\";\nimport { createLayer } from \"@/game/layers/utils\";\nimport { gameManager } from \"@/game/manager\";\nimport { gameStore } from \"@/game/store\";\nimport { router } from \"@/router\";\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected\");\n});\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected\");\n});\nsocket.on(\"connect_error\", (error: any) => {\n    console.error(\"Could not connect to game session.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"error\", (error: any) => {\n    console.error(\"Game session does not exist.\");\n    router.push(\"/dashboard\");\n});\nsocket.on(\"redirect\", (destination: string) => {\n    console.log(\"redirecting\");\n    router.push(destination);\n});\nsocket.on(\"Room.Info.Set\", (data: { name: string; creator: string; invitationCode: string }) => {\n    gameStore.setRoomName(data.name);\n    gameStore.setRoomCreator(data.creator);\n    gameStore.setInvitationCode(data.invitationCode);\n});\nsocket.on(\"Username.Set\", (username: string) => {\n    gameStore.setUsername(username);\n    gameStore.setDM(username === window.location.pathname.split(\"/\")[2]);\n});\nsocket.on(\"Client.Options.Set\", (options: ServerClient) => {\n    gameStore.setGridColour({ colour: options.grid_colour, sync: false });\n    gameStore.setFOWColour({ colour: options.fow_colour, sync: false });\n    gameStore.setRulerColour({ colour: options.ruler_colour, sync: false });\n    gameStore.setPanX(options.pan_x);\n    gameStore.setPanY(options.pan_y);\n    gameStore.setZoomFactor(options.zoom_factor);\n    if (options.active_layer) layerManager.selectLayer(options.active_layer, false);\n    if (layerManager.getGridLayer() !== undefined) layerManager.getGridLayer()!.invalidate();\n});\nsocket.on(\"Location.Set\", (data: Partial<ServerLocation>) => {\n    if (data.name !== undefined) gameStore.setLocationName(data.name);\n    if (data.unit_size !== undefined) gameStore.setUnitSize({ unitSize: data.unit_size, sync: false });\n    if (data.use_grid !== undefined) gameStore.setUseGrid({ useGrid: data.use_grid, sync: false });\n    if (data.full_fow !== undefined) gameStore.setFullFOW({ fullFOW: data.full_fow, sync: false });\n    if (data.fow_opacity !== undefined) gameStore.setFOWOpacity({ fowOpacity: data.fow_opacity, sync: false });\n    if (data.fow_los !== undefined) gameStore.setLineOfSight({ fowLOS: data.fow_los, sync: false });\n});\nsocket.on(\"Position.Set\", (data: { x: number; y: number }) => {\n    gameManager.setCenterPosition(new GlobalPoint(data.x, data.y));\n});\nsocket.on(\"Notes.Set\", (notes: Note[]) => {\n    for (const note of notes) gameStore.newNote({ note, sync: false });\n});\nsocket.on(\"Asset.List.Set\", (assets: AssetList) => {\n    gameStore.setAssets(assets);\n});\nsocket.on(\"Board.Set\", (locationInfo: BoardInfo) => {\n    gameStore.clear();\n    gameStore.setLocations(locationInfo.locations);\n    document.getElementById(\"layers\")!.innerHTML = \"\";\n    gameStore.resetLayerInfo();\n    layerManager.reset();\n    for (const layer of locationInfo.layers) createLayer(layer);\n    // Force the correct opacity render on other layers.\n    layerManager.selectLayer(layerManager.getLayer()!.name, false);\n    EventBus.$emit(\"Initiative.Clear\");\n    gameStore.setBoardInitialized(true);\n    gameStore.recalculateBV();\n});\nsocket.on(\"Gridsize.Set\", (gridSize: number) => {\n    gameStore.setGridSize({ gridSize, sync: false });\n});\nsocket.on(\"Shape.Add\", (shape: ServerShape) => {\n    gameManager.addShape(shape);\n});\nsocket.on(\"Shape.Remove\", (shape: ServerShape) => {\n    if (!layerManager.UUIDMap.has(shape.uuid)) {\n        console.log(`Attempted to remove an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n        return;\n    }\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.removeShape(layerManager.UUIDMap.get(shape.uuid)!, false);\n    layer.invalidate(false);\n});\nsocket.on(\"Shape.Order.Set\", (data: { shape: ServerShape; index: number }) => {\n    if (!layerManager.UUIDMap.has(data.shape.uuid)) {\n        console.log(`Attempted to move the shape order of an unknown shape`);\n        return;\n    }\n    if (!layerManager.hasLayer(data.shape.layer)) {\n        console.log(`Attempted to remove shape from an unknown layer ${data.shape.layer}`);\n        return;\n    }\n    const shape = layerManager.UUIDMap.get(data.shape.uuid)!;\n    const layer = layerManager.getLayer(shape.layer)!;\n    layer.moveShapeOrder(shape, data.index, false);\n});\nsocket.on(\"Shape.Layer.Change\", (data: { uuid: string; layer: string }) => {\n    const shape = layerManager.UUIDMap.get(data.uuid);\n    if (shape === undefined) return;\n    shape.moveLayer(data.layer, false);\n});\nsocket.on(\"Shape.Update\", (data: { shape: ServerShape; redraw: boolean; move: boolean }) => {\n    gameManager.updateShape(data);\n});\nsocket.on(\"Temp.Clear\", (shapes: ServerShape[]) => {\n    shapes.forEach(shape => {\n        if (!layerManager.UUIDMap.has(shape.uuid)) {\n            console.log(\"Attempted to remove an unknown temporary shape\");\n            return;\n        }\n        if (!layerManager.hasLayer(shape.layer)) {\n            console.log(`Attempted to remove shape from an unknown layer ${shape.layer}`);\n            return;\n        }\n        const realShape = layerManager.UUIDMap.get(shape.uuid)!;\n        layerManager.getLayer(shape.layer)!.removeShape(realShape, false);\n    });\n});\n"],"sourceRoot":""}