!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const a="localhost"===document.domain?"http://":"https://",n=io.connect(a+document.domain+":"+location.port+"/planarally");let o=!1;n.on("connect",function(){console.log("Connected")}),n.on("disconnect",function(){console.log("Disconnected")}),n.on("redirect",function(t){console.log("redirecting"),window.location.href=t}),n.on("set username",function(t){Q.username=t,Q.IS_DM=t===window.location.pathname.split("/")[2],0===$("#toolselect").find("ul").html().length&&Q.setupTools()}),n.on("set clientOptions",function(t){Q.setClientOptions(t)}),n.on("set locationOptions",function(t){Q.layerManager.setOptions(t)}),n.on("asset list",function(t){const e=$("#menu-tokens");e.empty();let i="";const a=function(t,e){e=e||"",new Map(Object.entries(t.folders)).forEach(function(t,n){i+="<button class='accordion'>"+n+"</button><div class='accordion-panel'><div class='accordion-subpanel'>",a(t,e+n+"/"),i+="</div></div>"}),t.files.sort(alphSort),t.files.forEach(function(t){i+="<div class='draggable token'><img src='/static/img/assets/"+e+t+"' width='35'>"+t+"<i class='fas fa-cog'></i></div>"})};a(t),e.html(i),$(".draggable").draggable({helper:"clone",appendTo:"#board"}),$(".accordion").each(function(t){$(this).on("click",function(){$(this).toggleClass("accordion-active"),$(this).next().toggle()})})}),n.on("board init",function(t){Q.layerManager=new LayerManager;const e=$("#layers");e.empty();const i=$("#layerselect");i.find("ul").empty();let a=0;const s=$("#locations-menu").find("div");s.children().off(),s.empty();for(let e=0;e<t.locations.length;e++){const i=$("<div>"+t.locations[e]+"</div>");s.append(i)}const r=$('<div><i class="fas fa-plus"></i></div>');s.append(r),s.children().on("click",function(t){if(""===t.target.textContent){const t=prompt("New location name");null!==t&&n.emit("new location",t)}else n.emit("change location",t.target.textContent)});for(let n=0;n<t.board.layers.length;n++){const o=t.board.layers[n];if(e.append("<canvas id='"+o.name+"-layer' style='z-index: "+n+"'></canvas>"),o.selectable){let t="";0===a&&(t=" class='layer-selected'"),i.find("ul").append("<li id='select-"+o.name+"'"+t+"><a href='#'>"+o.name+"</a></li>"),a+=1}const s=$("#"+o.name+"-layer")[0];let r;s.width=window.innerWidth,s.height=window.innerHeight,(r=o.grid?new GridLayerState(s,o.name):"fow"===o.name?new FOWLayerState(s,o.name):new LayerState(s,o.name)).selectable=o.selectable,r.player_editable=o.player_editable,Q.layerManager.addLayer(r),o.grid?(Q.layerManager.setGridSize(o.size),Q.layerManager.drawGrid(),$("#grid-layer").droppable({accept:".draggable",drop:function(t,e){const i=Q.layerManager.getLayer(),a=$(i.canvas).offset(),n={x:parseInt(e.offset.left-a.left),y:parseInt(e.offset.top-a.top)};if(settings_menu.is(":visible")&&n.x<settings_menu.width())return;if(locations_menu.is(":visible")&&n.y<locations_menu.width())return;const o=l2w(n),s=e.draggable[0].children[0],r=new Asset(s,o.x,o.y,s.width,s.height);if(r.src=s.src,Q.layerManager.useGrid&&!t.altKey){const t=Q.layerManager.gridSize;r.x=Math.round(r.x/t)*t,r.y=Math.round(r.y/t)*t,r.w=Math.max(Math.round(r.w/t)*t,t),r.h=Math.max(Math.round(r.h/t)*t,t)}i.addShape(r,!0)}})):r.setShapes(o.shapes)}Q.layerManager.setLayer(Q.layerManager.getLayer().name),o=!0,a>1?i.find("li").on("click",function(){const t=this.id.split("-")[1],e=i.find("#select-"+Q.layerManager.selectedLayer);t!==Q.layerManager.selectedLayer&&($(this).addClass("layer-selected"),e.removeClass("layer-selected"),Q.layerManager.setLayer(t))}):i.hide()}),n.on("set gridsize",function(t){Q.layerManager.setGridSize(t)}),n.on("add shape",function(t){const e=Q.layerManager.getLayer(t.layer);e.addShape(createShapeFromDict(t),!1),e.invalidate()}),n.on("remove shape",function(t){const e=Q.layerManager.getLayer(t.layer);e.removeShape(Q.layerManager.UUIDMap.get(t.uuid),!1),e.invalidate()}),n.on("moveShapeOrder",function(t){Q.layerManager.getLayer(t.shape.layer).moveShapeOrder(Q.layerManager.UUIDMap.get(t.shape.uuid),t.index,!1)}),n.on("shapeMove",function(t){(t=Object.assign(Q.layerManager.UUIDMap.get(t.uuid),createShapeFromDict(t,!0))).checkLightSources(),Q.layerManager.getLayer(t.layer).onShapeMove(t)}),n.on("updateShape",function(t){const e=Object.assign(Q.layerManager.UUIDMap.get(t.shape.uuid),createShapeFromDict(t.shape,!0));e.checkLightSources(),e.setMovementBlock(e.movementObstruction),t.redraw&&Q.layerManager.getLayer(t.shape.layer).invalidate()}),n.on("updateInitiative",function(t){void 0!==t.initiative&&(t.owners.includes(Q.username)||Q.IS_DM||t.visible)?Q.initiativeTracker.addInitiative(t,!1):Q.initiativeTracker.removeInitiative(t.uuid,!1,!0)}),n.on("setInitiative",function(t){Q.initiativeTracker.data=t,Q.initiativeTracker.redraw(),t.length>0&&initiativeDialog.dialog("open")}),n.on("clear temporaries",function(t){t.forEach(function(t){Q.layerManager.getLayer(t.layer).removeShape(t,!1)})});var s=n;function r(){this.layer=null,this.name="Unknown shape",this.trackers=[],this.auras=[],this.owners=[],this.visionObstruction=!1,this.movementObstruction=!1}function l(t,e,i,a){this.type="boundrect",this.x=t,this.y=e,this.w=i,this.h=a}function c(t,e,i,a,n,o,s){r.call(this),this.type="rect",this.x=t||0,this.y=e||0,this.w=i||1,this.h=a||1,this.fill=n||"#000",this.border=o||"rgba(0, 0, 0, 0)",this.uuid=s||B()}function u(t,e,i,a,n,o){r.call(this),this.type="circle",this.x=t||0,this.y=e||0,this.r=i||1,this.fill=a||"#000",this.border=n||"rgba(0, 0, 0, 0)",this.uuid=o||B()}function h(t,e,i,a,n){r.call(this),this.type="line",this.x1=t,this.y1=e,this.x2=i,this.y2=a,this.uuid=n||B()}function d(t,e,i,a,n,o){r.call(this),this.type="text",this.x=t,this.y=e,this.text=i,this.font=a,this.angle=n||0,this.uuid=o||B()}function p(t,e,i,a,n,o){r.call(this),this.type="asset",this.uuid=o||B(),this.img=t,this.x=e,this.y=i,this.w=a,this.h=n}function y(t,e){this.canvas=t,this.name=e,this.width=t.width,this.height=t.height,this.ctx=t.getContext("2d"),document.defaultView&&document.defaultView.getComputedStyle&&(this.stylePaddingLeft=parseInt(document.defaultView.getComputedStyle(t,null).paddingLeft,10)||0,this.stylePaddingTop=parseInt(document.defaultView.getComputedStyle(t,null).paddingTop,10)||0,this.styleBorderLeft=parseInt(document.defaultView.getComputedStyle(t,null).borderLeftWidth,10)||0,this.styleBorderTop=parseInt(document.defaultView.getComputedStyle(t,null).borderTopWidth,10)||0);const i=document.body.parentNode;this.htmlTop=i.offsetTop,this.htmlLeft=i.offsetLeft;this.valid=!1,this.shapes=new X,this.dragging=!1,this.resizing=!1,this.panning=!1,this.selecting=!1,this.resizedir="",this.selectionHelper=null,this.selectionStartPoint=null,this.selection=[],this.dragoffx=0,this.dragoffy=0,this.selectionColor="#CC0000",this.selectionWidth=2}function g(t,e){y.call(this,t,e)}function f(t,e){y.call(this,t,e)}function v(){this.layers=[],this.width=window.innerWidth,this.height=window.innerHeight,this.selectedLayer=null,this.UUIDMap=new Map,this.gridSize=50,this.unitSize=5,this.useGrid=!0,this.fullFOW=!1,this.fowOpacity=.3,this.zoomFactor=1,this.panX=0,this.panY=0,this.interval=30;const t=this;setInterval(function(){for(let e=t.layers.length-1;e>=0;e--)t.layers[e].draw()},this.interval)}function m(){this.startPoint=null,this.detailDiv=null,this.fillColor=$("<input type='text' />"),this.borderColor=$("<input type='text' />"),this.detailDiv=$("<div>").append($("<div>Fill</div>")).append(this.fillColor).append($("<div>Border</div>")).append(this.borderColor).append($("</div>")),this.fillColor.spectrum({showInput:!0,allowEmpty:!0,showAlpha:!0,color:"red"}),this.borderColor.spectrum({showInput:!0,allowEmpty:!0,showAlpha:!0})}function x(){this.startPoint=null}function w(){this.startPoint=null,this.detailDiv=$("<div>").append($("<div>Reveal</div><label class='switch'><input type='checkbox' id='fow-reveal'><span class='slider round'></span></label>")).append($("</div>"))}function M(){this.startPoint=null,this.xCount=$("<input type='text' value='3'>"),this.yCount=$("<input type='text' value='3'>"),this.detailDiv=$("<div>").append($("<div>#X</div>")).append(this.xCount).append($("<div>#Y</div>")).append(this.yCount).append($("</div>"))}function b(){this.layerManager=new v,this.selectedTool=0,this.rulerTool=new x,this.drawTool=new m,this.fowTool=new w,this.mapTool=new M,this.lightsources=[],this.lightblockers=[],this.movementblockers=[],this.initiativeTracker=new Y}jQuery.event.special.touchstart={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},r.prototype.getBoundingBox=function(){},r.prototype.checkLightSources=function(){const t=this,e=S.lightblockers.indexOf(this.uuid);this.visionObstruction&&-1===e?S.lightblockers.push(this.uuid):!this.visionObstruction&&e>=0&&S.lightblockers.splice(e,1),this.auras.forEach(function(e){const i=S.lightsources,a=i.findIndex(t=>t.aura===e.uuid);e.lightSource&&-1===a?i.push({shape:t.uuid,aura:e.uuid}):!e.lightSource&&a>=0&&i.splice(a,1)});for(let e=S.lightsources.length-1;e>=0;e--){const i=S.lightsources[e];i.shape===t.uuid&&(t.auras.some(t=>t.uuid===i.aura&&t.lightSource)||S.lightsources.splice(e,1))}},r.prototype.setMovementBlock=function(t){this.movementObstruction=t||!1;const e=S.movementblockers.indexOf(this.uuid);this.movementObstruction&&-1===e?S.movementblockers.push(this.uuid):!this.movementObstruction&&e>=0&&S.movementblockers.splice(e,1)},r.prototype.ownedBy=function(t){return void 0===t&&(t=S.username),S.IS_DM||this.owners.includes(t)},r.prototype.onMouseUp=function(){},r.prototype.onSelection=function(){this.trackers.length&&""===this.trackers[this.trackers.length-1].name&&""===this.trackers[this.trackers.length-1].value||this.trackers.push({uuid:B(),name:"",value:"",maxvalue:"",visible:!1}),this.auras.length&&""===this.auras[this.auras.length-1].name&&""===this.auras[this.auras.length-1].value||this.auras.push({uuid:B(),name:"",value:"",dim:"",lightSource:!1,colour:"rgba(0,0,0,0)",visible:!1}),$("#selection-name").text(this.name);const t=$("#selection-trackers");t.empty(),this.trackers.forEach(function(e){const i=e.maxvalue?`${e.value}/${e.maxvalue}`:e.value;t.append($(`<div id="selection-tracker-${e.uuid}-name" data-uuid="${e.uuid}">${e.name}</div>`)),t.append($(`<div id="selection-tracker-${e.uuid}-value" data-uuid="${e.uuid}" class="selection-tracker-value">${i}</div>`))});const e=$("#selection-auras");e.empty(),this.auras.forEach(function(t){const i=t.dim?`${t.value}/${t.dim}`:t.value;e.append($(`<div id="selection-aura-${t.uuid}-name" data-uuid="${t.uuid}">${t.name}</div>`)),e.append($(`<div id="selection-aura-${t.uuid}-value" data-uuid="${t.uuid}" class="selection-aura-value">${i}</div>`))}),$("#selection-menu").show();const i=this,a=$("#selection-edit-button");this.ownedBy()?a.show():a.hide(),a.on("click",function(){$("#shapeselectiondialog-uuid").val(i.uuid);const t=$("#shapeselectiondialog-name");t.val(i.name),t.on("change",function(){const t=S.layerManager.UUIDMap.get($("#shapeselectiondialog-uuid").val());t.name=$(this).val(),$("#selection-name").text($(this).val()),s.emit("updateShape",{shape:t.asDict(),redraw:!1})});const e=$("#shapeselectiondialog-lightblocker");e.prop("checked",i.visionObstruction),e.on("click",function(){const t=S.layerManager.UUIDMap.get($("#shapeselectiondialog-uuid").val());t.visionObstruction=e.prop("checked"),t.checkLightSources()});const a=$("#shapeselectiondialog-moveblocker");a.prop("checked",i.movementObstruction),a.on("click",function(){S.layerManager.UUIDMap.get($("#shapeselectiondialog-uuid").val()).setMovementBlock(a.prop("checked"))});const n=$("#shapeselectiondialog-owners"),o=$("#shapeselectiondialog-trackers"),r=$("#shapeselectiondialog-auras");function l(t){const e=$(`<input type="text" placeholder="name" data-name="${t}" value="${t}" style="grid-column-start: name">`),a=$('<div style="grid-column-start: remove"><i class="fas fa-trash-alt"></i></div>');o.before(e.add(a)),e.on("change",function(){const t=i.owners.findIndex(t=>t===$(this).data("name"));t>=0?i.owners.splice(t,1,$(this).val()):i.owners.push($(this).val()),s.emit("updateShape",{shape:i.asDict(),redraw:!1}),i.owners.length&&""===i.owners[i.owners.length-1].name&&""===i.owners[i.owners.length-1].value||l("")}),a.on("click",function(){const t=i.owners.find(t=>t.uuid===$(this).data("uuid"));$(this).prev().remove(),$(this).remove(),i.owners.splice(i.owners.indexOf(t),1),s.emit("updateShape",{shape:i.asDict(),redraw:!1})})}function c(t){const e=$(`<input type="text" placeholder="name" data-uuid="${t.uuid}" value="${t.name}" style="grid-column-start: name">`),a=$(`<input type="text" title="Current value" data-uuid="${t.uuid}" value="${t.value}">`),n=$(`<input type="text" title="Dim value" data-uuid="${t.uuid}" value="${t.dim||""}">`),o=$(`<input type="text" title="Aura colour" data-uuid="${t.uuid}">`),r=$(`<div data-uuid="${t.uuid}"><i class="fas fa-eye"></i></div>`),l=$(`<div data-uuid="${t.uuid}"><i class="fas fa-lightbulb"></i></div>`),u=$(`<div data-uuid="${t.uuid}"><i class="fas fa-trash-alt"></i></div>`);$("#shapeselectiondialog").children().last().append(e.add(a).add(`<span data-uuid="${t.uuid}">/</span>`).add(n).add($(`<div data-uuid="${t.uuid}">`).append(o).append($("</div>"))).add(r).add(l).add(u)),t.visible||r.css("opacity",.3),t.lightSource||l.css("opacity",.3),o.spectrum({showInput:!0,showAlpha:!0,color:t.colour,move:function(t){i.auras.find(t=>t.uuid===$(this).data("uuid")).colour=t.toRgbString(),S.layerManager.getLayer(i.layer).invalidate(!0)},change:function(){s.emit("updateShape",{shape:i.asDict(),redraw:!0})}}),e.on("change",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));t.name=$(this).val(),$(`#selection-aura-${t.uuid}-name`).text($(this).val()),s.emit("updateShape",{shape:i.asDict(),redraw:!0}),i.auras.length&&""===i.auras[i.auras.length-1].name&&""===i.auras[i.auras.length-1].value||(i.auras.push({uuid:B(),name:"",value:"",dim:"",lightSource:!1,colour:"rgba(0,0,0,0)",visible:!1}),c(i.auras[i.auras.length-1]))}),a.on("change",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));t.value=$(this).val();const e=t.dim?`${t.value}/${t.dim}`:t.value;$(`#selection-aura-${t.uuid}-value`).text(e),s.emit("updateShape",{shape:i.asDict(),redraw:!0}),S.layerManager.getLayer(t.layer).invalidate()}),n.on("change",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));t.dim=$(this).val();const e=t.dim?`${t.value}/${t.dim}`:t.value;$(`#selection-aura-${t.uuid}-value`).text(e),s.emit("updateShape",{shape:i.asDict(),redraw:!0}),S.layerManager.getLayer(t.layer).invalidate()}),u.on("click",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));""===t.name&&""===t.value||($(`[data-uuid=${t.uuid}]`).remove(),i.auras.splice(i.auras.indexOf(t),1),i.checkLightSources(),s.emit("updateShape",{shape:i.asDict(),redraw:!0}),S.layerManager.getLayer(t.layer).invalidate())}),r.on("click",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));t.visible=!t.visible,t.visible?$(this).css("opacity",1):$(this).css("opacity",.3),s.emit("updateShape",{shape:i.asDict(),redraw:!0})}),l.on("click",function(){const t=i.auras.find(t=>t.uuid===$(this).data("uuid"));t.lightSource=!t.lightSource;const e=S.lightsources,a=e.findIndex(e=>e.aura===t.uuid);t.lightSource?($(this).css("opacity",1),-1===a&&e.push({shape:i.uuid,aura:t.uuid})):($(this).css("opacity",.3),a>=0&&e.splice(a,1));const n=S.layerManager.getLayer("fow");void 0!==n&&n.invalidate(),s.emit("updateShape",{shape:i.asDict(),redraw:!0})})}n.nextUntil(o).remove(),o.nextUntil(r).remove(),r.nextUntil($("#shapeselectiondialog").find("form")).remove(),i.owners.forEach(l),i.owners.length&&""===i.owners[i.owners.length-1].name&&""===i.owners[i.owners.length-1].value||l(""),i.trackers.forEach(function t(e){const a=$(`<input type="text" placeholder="name" data-uuid="${e.uuid}" value="${e.name}" style="grid-column-start: name">`),n=$(`<input type="text" title="Current value" data-uuid="${e.uuid}" value="${e.value}">`),o=$(`<input type="text" title="Max value" data-uuid="${e.uuid}" value="${e.maxvalue||""}">`),l=$(`<div data-uuid="${e.uuid}"><i class="fas fa-eye"></i></div>`),c=$(`<div data-uuid="${e.uuid}"><i class="fas fa-trash-alt"></i></div>`);r.before(a.add(n).add(`<span data-uuid="${e.uuid}">/</span>`).add(o).add(`<span data-uuid="${e.uuid}"></span>`).add(l).add(`<span data-uuid="${e.uuid}"></span>`).add(c)),e.visible||l.css("opacity",.3),a.on("change",function(){const e=i.trackers.find(t=>t.uuid===$(this).data("uuid"));e.name=$(this).val(),$(`#selection-tracker-${e.uuid}-name`).text($(this).val()),s.emit("updateShape",{shape:i.asDict(),redraw:!1}),i.trackers.length&&""===i.trackers[i.trackers.length-1].name&&""===i.trackers[i.trackers.length-1].value||(i.trackers.push({uuid:B(),name:"",value:"",maxvalue:"",visible:!1}),t(i.trackers[i.trackers.length-1]))}),n.on("change",function(){const t=i.trackers.find(t=>t.uuid===$(this).data("uuid"));t.value=$(this).val();const e=t.maxvalue?`${t.value}/${t.maxvalue}`:t.value;$(`#selection-tracker-${t.uuid}-value`).text(e),s.emit("updateShape",{shape:i.asDict(),redraw:!1})}),o.on("change",function(){const t=i.trackers.find(t=>t.uuid===$(this).data("uuid"));t.maxvalue=$(this).val();const e=t.maxvalue?`${t.value}/${t.maxvalue}`:t.value;$(`#selection-tracker-${t.uuid}-value`).text(e),s.emit("updateShape",{shape:i.asDict(),redraw:!1})}),c.on("click",function(){const t=i.trackers.find(t=>t.uuid===$(this).data("uuid"));""!==t.name&&""!==t.value&&($(`[data-uuid=${t.uuid}]`).remove(),i.trackers.splice(i.trackers.indexOf(t),1),s.emit("updateShape",{shape:i.asDict(),redraw:!1}))}),l.on("click",function(){const t=i.trackers.find(t=>t.uuid===$(this).data("uuid"));t.visible?$(this).css("opacity",.3):$(this).css("opacity",1),t.visible=!t.visible,s.emit("updateShape",{shape:i.asDict(),redraw:!0})})});for(let t=0;t<i.auras.length;t++)c(i.auras[t]);D.dialog("open")}),$(".selection-tracker-value").on("click",function(){const t=$(this).data("uuid"),e=i.trackers.find(e=>e.uuid===t),a=prompt(`New  ${e.name} value: (absolute or relative)`);"+"===a[0]?e.value+=parseInt(a.slice(1)):"-"===a[0]?e.value-=parseInt(a.slice(1)):e.value=parseInt(a);const n=e.maxvalue?`${e.value}/${e.maxvalue}`:e.value;$(this).text(n),s.emit("updateShape",{shape:i.asDict(),redraw:!1})}),$(".selection-aura-value").on("click",function(){const t=$(this).data("uuid"),e=i.auras.find(e=>e.uuid===t),a=prompt(`New  ${e.name} value: (absolute or relative)`);"+"===a[0]?e.value+=parseInt(a.slice(1)):"-"===a[0]?e.value-=parseInt(a.slice(1)):e.value=parseInt(a);const n=e.dim?`${e.value}/${e.dim}`:e.value;$(this).text(n),s.emit("updateShape",{shape:i.asDict(),redraw:!0}),S.layerManager.getLayer(i.layer).invalidate()})},r.prototype.onSelectionLoss=function(){$("#selection-menu").hide()},r.prototype.onRemove=function(){},r.prototype.asDict=function(){return Object.assign({},this)},r.prototype.draw=function(t){"fow"===this.layer&&(this.fill=I.spectrum("get").toRgbString()),void 0!==this.globalCompositeOperation?t.globalCompositeOperation=this.globalCompositeOperation:t.globalCompositeOperation="source-over",this.drawAuras(t)},r.prototype.drawAuras=function(t){const e=this;this.auras.forEach(function(i){t.beginPath(),t.fillStyle=S.layerManager.getLayer("fow").ctx===t?"black":i.colour;const a=W(e.center());if(t.arc(a.x,a.y,_(i.value),0,2*Math.PI),t.fill(),i.dim){const a=tinycolor(i.colour);t.beginPath(),t.fillStyle=a.setAlpha(a.getAlpha()/2).toRgbString();const n=W(e.center());t.arc(n.x,n.y,_(i.dim),0,2*Math.PI),t.fill()}})},r.prototype.contains=function(){return!1},r.prototype.showContextMenu=function(t){const e=S.layerManager.getLayer();e.selection=[this],this.onSelection(),e.invalidate(!0);const i=this;L.show(),L.empty(),L.css({left:t.x,top:t.y});let a="<ul><li>Layer<ul>";S.layerManager.layers.forEach(function(t){if(!t.selectable)return;const i=t.name===e.name?" style='background-color:aqua' ":" ";a+=`<li data-action='setLayer' data-layer='${t.name}' ${i} class='context-clickable'>${t.name}</li>`}),a+="</ul></li><li data-action='moveToBack' class='context-clickable'>Move to back</li><li data-action='moveToFront' class='context-clickable'>Move to front</li><li data-action='addInitiative' class='context-clickable'>Add initiative</li></ul>",L.html(a),$(".context-clickable").on("click",function(){!function(t,e){const i=t.data("action"),a=S.layerManager.getLayer();switch(i){case"moveToFront":a.moveShapeOrder(e,a.shapes.data.length-1,!0);break;case"moveToBack":a.moveShapeOrder(e,0,!0);break;case"setLayer":a.removeShape(e,!0),S.layerManager.getLayer(t.data("layer")).addShape(e,!0);break;case"addInitiative":S.initiativeTracker.addInitiative({uuid:e.uuid,visible:!S.IS_DM,group:!1,src:e.src,owners:e.owners},!0)}L.hide()}($(this),i)})},l.prototype.contains=function(t,e,i){return void 0!==i&&!0!==i||(t=j(t),e=N(e)),this.x<=t&&this.x+this.w>=t&&this.y<=e&&this.y+this.h>=e},l.prototype.intersectsWith=function(t){return!(t.x>=this.x+this.w||t.x+t.w<=this.x||t.y>=this.y+this.h||t.y+t.h<=this.y)},l.prototype.getIntersectWithLine=function(t){const e=[q({x:this.x,y:this.y},{x:this.x+this.w,y:this.y},t.start,t.end),q({x:this.x+this.w,y:this.y},{x:this.x+this.w,y:this.y+this.h},t.start,t.end),q({x:this.x,y:this.y},{x:this.x,y:this.y+this.h},t.start,t.end),q({x:this.x,y:this.y+this.h},{x:this.x+this.w,y:this.y+this.h},t.start,t.end)];let i=1/0,a=null;for(let n=0;n<e.length;n++){if(null===e[n])continue;const o=K(t.start,e[n]);i>o&&(i=o,a=e[n])}return{intersect:a,distance:i}},c.prototype=Object.create(r.prototype),c.prototype.getBoundingBox=function(){return new l(this.x,this.y,this.w,this.h)},c.prototype.draw=function(t){r.prototype.draw.call(this,t),t.fillStyle=this.fill;const e=S.layerManager.zoomFactor,i=W({x:this.x,y:this.y});t.fillRect(i.x,i.y,this.w*e,this.h*e),"rgba(0, 0, 0, 0)"!==this.border&&(t.strokeStyle=this.border,t.strokeRect(i.x,i.y,this.w*e,this.h*e))},c.prototype.contains=function(t,e,i){return void 0!==i&&!0!==i||(t=j(t),e=N(e)),this.x<=t&&this.x+this.w>=t&&this.y<=e&&this.y+this.h>=e},c.prototype.inCorner=function(t,e,i){switch(i){case"ne":return E(this.x+this.w-3)<=t&&t<=E(this.x+this.w+3)&&G(this.y-3)<=e&&e<=G(this.y+3);case"nw":return E(this.x-3)<=t&&t<=E(this.x+3)&&G(this.y-3)<=e&&e<=G(this.y+3);case"sw":return E(this.x-3)<=t&&t<=E(this.x+3)&&G(this.y+this.h-3)<=e&&e<=G(this.y+this.h+3);case"se":return E(this.x+this.w-3)<=t&&t<=E(this.x+this.w+3)&&G(this.y+this.h-3)<=e&&e<=G(this.y+this.h+3);default:return!1}},c.prototype.getCorner=function(t,e){return this.inCorner(t,e,"ne")?"ne":this.inCorner(t,e,"nw")?"nw":this.inCorner(t,e,"se")?"se":this.inCorner(t,e,"sw")?"sw":void 0},c.prototype.center=function(t){if(void 0===t)return{x:this.x+this.w/2,y:this.y+this.h/2};this.x=t.x-this.w/2,this.y=t.y-this.h/2},u.prototype=Object.create(r.prototype),u.prototype.getBoundingBox=function(){return new l(this.x-this.r,this.y-this.r,2*this.r,2*this.r)},u.prototype.draw=function(t){r.prototype.draw.call(this,t),t.beginPath(),t.fillStyle=this.fill;const e=W({x:this.x,y:this.y});t.arc(e.x,e.y,this.r,0,2*Math.PI),t.fill(),"rgba(0, 0, 0, 0)"!==this.border&&(t.beginPath(),t.strokeStyle=this.border,t.arc(e.x,e.y,this.r,0,2*Math.PI),t.stroke())},u.prototype.contains=function(t,e){return(t-E(this.x))**2+(e-G(this.y))**2<this.r**2},u.prototype.inCorner=function(t,e,i){switch(i){case"ne":return E(this.x+this.w-3)<=t&&t<=E(this.x+this.w+3)&&G(this.y-3)<=e&&e<=G(this.y+3);case"nw":return E(this.x-3)<=t&&t<=E(this.x+3)&&G(this.y-3)<=e&&e<=G(this.y+3);case"sw":return E(this.x-3)<=t&&t<=E(this.x+3)&&G(this.y+this.h-3)<=e&&e<=G(this.y+this.h+3);case"se":return E(this.x+this.w-3)<=t&&t<=E(this.x+this.w+3)&&G(this.y+this.h-3)<=e&&e<=G(this.y+this.h+3);default:return!1}},u.prototype.getCorner=function(t,e){return this.inCorner(t,e,"ne")?"ne":this.inCorner(t,e,"nw")?"nw":this.inCorner(t,e,"se")?"se":this.inCorner(t,e,"sw")?"sw":void 0},u.prototype.center=function(t){if(void 0===t)return{x:this.x,y:this.y};this.x=t.x,this.y=t.y},h.prototype=Object.create(r.prototype),h.prototype.getBoundingBox=function(){return new l(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x1-this.x2),Math.abs(this.y1-this.y2))},h.prototype.draw=function(t){r.prototype.draw.call(this,t),t.beginPath(),t.moveTo(E(this.x1),G(this.y1)),t.lineTo(E(this.x2),G(this.y2)),t.strokeStyle="rgba(255,0,0, 0.5)",t.lineWidth=3,t.stroke()},d.prototype=Object.create(r.prototype),d.prototype.getBoundingBox=function(){return new l(this.x,this.y,5,5)},d.prototype.draw=function(t){r.prototype.draw.call(this,t),t.font=this.font,t.save(),t.translate(E(this.x),G(this.y)),t.rotate(this.angle),t.textAlign="center",t.fillText(this.text,0,-5),t.restore()},p.prototype=Object.create(c.prototype),p.prototype.draw=function(t){r.prototype.draw.call(this,t);const e=S.layerManager.zoomFactor;t.drawImage(this.img,E(this.x),G(this.y),this.w*e,this.h*e)},y.prototype.invalidate=function(t){if(this.valid=!1,!(t=t||!1)&&"fow"!==this.name){const t=S.layerManager.getLayer("fow");void 0!==t&&t.invalidate(!0)}},y.prototype.addShape=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.layer=this.name,this.shapes.push(t),t.checkLightSources(),t.setMovementBlock(t.movementObstruction),e&&s.emit("add shape",{shape:t.asDict(),temporary:i}),S.layerManager.UUIDMap.set(t.uuid,t),this.invalidate(!e)},y.prototype.setShapes=function(t){const e=[],i=this;t.forEach(function(t){const a=function(t,e){void 0===e&&(e=!1);if(!e&&S.layerManager.UUIDMap.has(t.uuid))return S.layerManager.UUIDMap.get(t.uuid);let i;"rect"===t.type&&(i=Object.assign(new c,t));"circle"===t.type&&(i=Object.assign(new u,t));"line"===t.type&&(i=Object.assign(new h,t));"text"===t.type&&(i=Object.assign(new d,t));if("asset"===t.type){const e=new Image(t.w,t.h);e.src=t.src,(i=Object.assign(new p,t)).img=e,e.onload=function(){S.layerManager.getLayer(t.layer).invalidate()}}return i}(t,i);a.layer=i.name,a.checkLightSources(),a.setMovementBlock(t.movementObstruction),S.layerManager.UUIDMap.set(t.uuid,a),e.push(a)}),this.selection=[],this.shapes.data=e,this.invalidate()},y.prototype.removeShape=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t.onRemove(),this.shapes.remove(t),e&&s.emit("remove shape",{shape:t,temporary:i});const a=S.lightsources.findIndex(e=>e.shape===t.uuid),n=S.lightblockers.findIndex(e=>e===t.uuid),o=S.movementblockers.findIndex(e=>e===t.uuid);a>=0&&S.lightsources.splice(a,1),n>=0&&S.lightblockers.splice(n,1),o>=0&&S.movementblockers.splice(o,1),S.layerManager.UUIDMap.delete(t.uuid),this.selection===t&&(this.selection=null),this.invalidate(!e)},y.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},y.prototype.draw=function(t){if(board_initialised&&!this.valid){const e=this.ctx;(t=void 0===t||t)&&this.clear();const i=this;if(this.shapes.data.forEach(function(t){E(t.x)>i.width||G(t.y)>i.height||E(t.x+t.w)<0||G(t.y+t.h)<0||"fow"===i.name&&t.visionObstruction&&S.layerManager.getLayer().name!==i.name||t.draw(e)}),null!=this.selection){e.fillStyle=this.selectionColor,e.strokeStyle=this.selectionColor,e.lineWidth=this.selectionWidth;const t=S.layerManager.zoomFactor;this.selection.forEach(function(i){e.strokeRect(E(i.x),G(i.y),i.w*t,i.h*t),e.fillRect(E(i.x+i.w-3),G(i.y-3),6*t,6*t),e.fillRect(E(i.x-3),G(i.y-3),6*t,6*t),e.fillRect(E(i.x+i.w-3),G(i.y+i.h-3),6*t,6*t),e.fillRect(E(i.x-3),G(i.y+i.h-3),6*t,6*t)})}this.valid=!0}},y.prototype.getMouse=function(t){let e,i,a=this.canvas,n=0,o=0;if(void 0!==a.offsetParent)do{n+=a.offsetLeft,o+=a.offsetTop}while(a=a.offsetParent);return n+=this.stylePaddingLeft+this.styleBorderLeft+this.htmlLeft,o+=this.stylePaddingTop+this.styleBorderTop+this.htmlTop,{x:e=t.pageX-n,y:i=t.pageY-o}},y.prototype.moveShapeOrder=function(t,e,i){this.shapes.moveTo(t,e)&&(i&&s.emit("moveShapeOrder",{shape:t.asDict(),index:e}),this.invalidate(!0))},y.prototype.onShapeMove=function(){this.invalidate()},g.prototype=Object.create(y.prototype),g.prototype.invalidate=function(){S.layerManager.drawGrid()},f.prototype=Object.create(y.prototype),f.prototype.addShape=function(t,e,i){t.fill=I.spectrum("get").toRgbString(),y.prototype.addShape.call(this,t,e,i)},f.prototype.setShapes=function(t){const e=I.spectrum("get").toRgbString();t.forEach(function(t){t.fill=e}),y.prototype.setShapes.call(this,t)},f.prototype.onShapeMove=function(t){t.fill=I.spectrum("get").toRgbString(),y.prototype.onShapeMove.call(this,t)},f.prototype.draw=function(){if(board_initialised&&!this.valid){const t=this.ctx,e=t.globalCompositeOperation;if(S.layerManager.fullFOW){const t=this.ctx.globalAlpha;this.ctx.globalCompositeOperation="copy",S.IS_DM&&(this.ctx.globalAlpha=S.layerManager.fowOpacity),this.ctx.fillStyle=I.spectrum("get").toRgbString(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=t,this.ctx.globalCompositeOperation=e}S.IS_DM||y.prototype.draw.call(this,!S.layerManager.fullFOW),t.globalCompositeOperation="destination-out",S.layerManager.getLayer("tokens").shapes.data.forEach(function(e){if(!e.ownedBy())return;const i=e.getBoundingBox(),a=W(e.center()),n=.8*H(i.w);t.beginPath(),t.arc(a.x,a.y,n,0,2*Math.PI);const o=t.createRadialGradient(a.x,a.y,n/2,a.x,a.y,n);o.addColorStop(0,"rgba(0, 0, 0, 1)"),o.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=o,t.fill()}),t.globalCompositeOperation="destination-out",S.lightsources.forEach(function(e){const i=S.layerManager.UUIDMap.get(e.shape),a=i.auras.find(t=>t.uuid===e.aura);if(void 0===a)return void console.log("Old lightsource still lingering in the gameManager list");const n=R(a.value),o=i.center(),s=W(o),r=new u(o.x,o.y,n).getBoundingBox(),l=[];S.lightblockers.forEach(function(t){if(t===i.uuid)return;const e=S.layerManager.UUIDMap.get(t).getBoundingBox();e.intersectsWith(r)&&l.push(e)}),t.beginPath();let c=0;for(let e=0;e<2*Math.PI;e+=1/180*Math.PI){let i={intersect:null,distance:1/0},r=null;if(l.forEach(function(t){const a=t.getIntersectWithLine({start:o,end:{x:o.x+n*Math.cos(e),y:o.y+n*Math.sin(e)}});null!==a.intersect&&a.distance<i.distance&&(i=a,r=t)}),null===i.intersect){-1===c&&(c=e,t.lineTo(E(o.x+n*Math.cos(e)),G(o.y+n*Math.sin(e))));continue}-1!==c&&(t.arc(s.x,s.y,_(a.value),c,e),c=-1);let u=r.w/4*Math.cos(e),h=r.h/4*Math.sin(e);t.lineTo(E(i.intersect.x+u),G(i.intersect.y+h))}-1!==c&&t.arc(s.x,s.y,_(a.value),c,2*Math.PI);const h=_(a.value),d=t.createRadialGradient(s.x,s.y,h/2,s.x,s.y,h);d.addColorStop(0,"rgba(0, 0, 0, 1)"),d.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=d,t.fill()}),S.IS_DM&&y.prototype.draw.call(this,!S.layerManager.fullFOW),t.globalCompositeOperation=e}},v.prototype.setOptions=function(t){"unitSize"in t&&S.layerManager.setUnitSize(t.unitSize),"useGrid"in t&&S.layerManager.setUseGrid(t.useGrid),"fullFOW"in t&&S.layerManager.setFullFOW(t.fullFOW),"fowOpacity"in t&&S.layerManager.setFOWOpacity(t.fowOpacity),"fowColour"in t&&I.spectrum("set",t.fowColour)},v.prototype.setWidth=function(t){this.width=t;for(let e=0;e<S.layerManager.layers.length;e++)S.layerManager.layers[e].canvas.width=t,S.layerManager.layers[e].width=t},v.prototype.setHeight=function(t){this.height=t;for(let e=0;e<this.layers.length;e++)this.layers[e].canvas.height=t,this.layers[e].height=t},v.prototype.addLayer=function(t){this.layers.push(t),null===this.selectedLayer&&t.selectable&&(this.selectedLayer=t.name)},v.prototype.getLayer=function(t){t=void 0===t?this.selectedLayer:t;for(let e=0;e<this.layers.length;e++)if(this.layers[e].name===t)return this.layers[e]},v.prototype.setLayer=function(t){let e=!1;const i=this;this.layers.forEach(function(a){a.selectable&&(a.ctx.globalAlpha=e?.3:1,t===a.name&&(i.selectedLayer=t,e=!0),a.selection=[],a.invalidate(!0))})},v.prototype.getGridLayer=function(){return this.getLayer("grid")},v.prototype.drawGrid=function(){const t=this.getGridLayer(),e=t.ctx,i=S.layerManager.zoomFactor,a=S.layerManager.panX,n=S.layerManager.panY;t.clear(),e.beginPath();for(let o=0;o<t.width;o+=this.gridSize*i)e.moveTo(o+a%this.gridSize*i,0),e.lineTo(o+a%this.gridSize*i,t.height),e.moveTo(0,o+n%this.gridSize*i),e.lineTo(t.width,o+n%this.gridSize*i);e.strokeStyle=O.spectrum("get").toRgbString(),e.lineWidth=1,e.stroke(),t.valid=!0;const o=S.layerManager.getLayer("fow");void 0!==o&&o.invalidate()},v.prototype.setGridSize=function(t){t!==this.gridSize&&(this.gridSize=t,this.drawGrid(),$("#gridSizeInput").val(t))},v.prototype.setUnitSize=function(t){t!==this.unitSize&&(this.unitSize=t,this.drawGrid(),$("#unitSizeInput").val(t))},v.prototype.setUseGrid=function(t){t!==this.useGrid&&(this.useGrid=t,t?$("#grid-layer").show():$("#grid-layer").hide(),$("#useGridInput").prop("checked",t))},v.prototype.setFullFOW=function(t){if(t!==this.fullFOW){this.fullFOW=t;const e=S.layerManager.getLayer("fow");void 0!==e&&e.invalidate(),$("#useFOWInput").prop("checked",t)}},v.prototype.setFOWOpacity=function(t){this.fowOpacity=t;const e=S.layerManager.getLayer("fow");void 0!==e&&e.invalidate(),$("#fowOpacity").val(t)},v.prototype.invalidate=function(){for(let t=this.layers.length-1;t>=0;t--)this.layers[t].invalidate(!0)},v.prototype.onMouseDown=function(t){const e=S.layerManager.getLayer(),i=e.getMouse(t),a=i.x,n=i.y;if("select"===k[S.selectedTool].name){let i,o=!1;for(let t=(i=e.selection.length?e.shapes.data.concat(e.selection):e.shapes.data).length-1;t>=0;t--){const s=i[t],r=s.getCorner(a,n);if(void 0!==r){if(!s.ownedBy())continue;e.selection=[s],s.onSelection(),e.resizing=!0,e.resizedir=r,e.invalidate(!0),o=!0,P(s);break}if(s.contains(a,n)){if(!s.ownedBy())continue;const t=s,i=S.layerManager.zoomFactor;-1===e.selection.indexOf(t)&&(e.selection=[t],t.onSelection()),e.dragging=!0,e.dragoffx=a-t.x*i,e.dragoffy=n-t.y*i,e.dragorig=Object.assign({},t),P(s),e.invalidate(!0),o=!0;break}}o||(e.selection.forEach(function(t){t.onSelectionLoss()}),e.selection=[],e.selecting=!0,e.selectionStartPoint=A(e.getMouse(t)),e.selectionHelper=new c(e.selectionStartPoint.x,e.selectionStartPoint.y,0,0,"rgba(0,0,0,0)","black"),e.selectionHelper.owners.push(S.username),e.addShape(e.selectionHelper,!1,!1),e.invalidate(!0))}else"pan"===k[S.selectedTool].name&&(e.panning=!0,e.dragoffx=a,e.dragoffy=n)},v.prototype.onMouseMove=function(t){const e=S.layerManager.getLayer(),i=e.getMouse(t),a=S.layerManager.zoomFactor;if(e.selecting){if(null===this.selectionStartPoint)return;const i=A(e.getMouse(t));e.selectionHelper.w=Math.abs(i.x-e.selectionStartPoint.x),e.selectionHelper.h=Math.abs(i.y-e.selectionStartPoint.y),e.selectionHelper.x=Math.min(e.selectionStartPoint.x,i.x),e.selectionHelper.y=Math.min(e.selectionStartPoint.y,i.y),e.invalidate(!0)}else if(e.panning)S.layerManager.panX+=Math.round((i.x-e.dragoffx)/a),S.layerManager.panY+=Math.round((i.y-e.dragoffy)/a),e.dragoffx=i.x,e.dragoffy=i.y,S.layerManager.invalidate();else if(e.selection.length){const t=e.selection[e.selection.length-1].x*a,n=e.selection[e.selection.length-1].y*a;e.selection.forEach(function(o){const r=i.x-(t+e.dragoffx),l=i.y-(n+e.dragoffy);if(e.dragging){if(o.x+=r/a,o.y+=l/a,"fow"!==e.name){let e=!1;const i=o.getBoundingBox();if(S.movementblockers.filter(t=>t!==o.uuid&&S.layerManager.UUIDMap.get(t).getBoundingBox().intersectsWith(i)).length>0)e=!0;else{const i={start:{x:t/a,y:n/a},end:{x:o.x,y:o.y}};e=S.movementblockers.some(t=>{const e=S.layerManager.UUIDMap.get(t).getBoundingBox().getIntersectWithLine(i);return t!==o.uuid&&null!==e.intersect&&e.distance>0})}if(e)return o.x-=r/a,void(o.y-=l/a)}o!==e.selectionHelper&&(s.emit("shapeMove",{shape:o.asDict(),temporary:!0}),P(o)),e.invalidate()}else e.resizing?("nw"===e.resizedir?(o.w=E(o.x)+o.w*a-i.x,o.h=G(o.y)+o.h*a-i.y,o.x=j(i.x),o.y=N(i.y)):"ne"===e.resizedir?(o.w=i.x-E(o.x),o.h=G(o.y)+o.h*a-i.y,o.y=N(i.y)):"se"===e.resizedir?(o.w=i.x-E(o.x),o.h=i.y-G(o.y)):"sw"===e.resizedir&&(o.w=E(o.x)+o.w*a-i.x,o.h=i.y-G(o.y),o.x=j(i.x)),o.w/=a,o.h/=a,o!==e.selectionHelper&&(s.emit("shapeMove",{shape:o.asDict(),temporary:!0}),P(o)),e.invalidate()):o&&(o.inCorner(i.x,i.y,"nw")?document.body.style.cursor="nw-resize":o.inCorner(i.x,i.y,"ne")?document.body.style.cursor="ne-resize":o.inCorner(i.x,i.y,"se")?document.body.style.cursor="se-resize":o.inCorner(i.x,i.y,"sw")?document.body.style.cursor="sw-resize":document.body.style.cursor="default")})}else document.body.style.cursor="default"},v.prototype.onMouseUp=function(t){const e=S.layerManager.getLayer();if(e.selecting){if(null===e.selectionStartPoint)return;e.shapes.data.forEach(function(t){if(t===e.selectionHelper)return;const i=t.getBoundingBox();t.ownedBy()&&e.selectionHelper.x<=i.x+i.w&&e.selectionHelper.x+e.selectionHelper.w>=i.x&&e.selectionHelper.y<=i.y+i.h&&e.selectionHelper.y+e.selectionHelper.h>=i.y&&e.selection.push(t)}),e.selection.length>0&&e.selection.push(e.selectionHelper),e.removeShape(e.selectionHelper,!1,!1),e.selectionStartPoint=null,e.invalidate(!0)}else e.panning?s.emit("set clientOptions",{panX:S.layerManager.panX,panY:S.layerManager.panY}):e.selection.length&&e.selection.forEach(function(i){if(e.dragging){if(S.layerManager.useGrid&&!t.altKey){const t=S.layerManager.gridSize,e={x:i.x+i.w/2,y:i.y+i.h/2},a=e.x,n=e.y;i.w/t%2==0?i.x=Math.round(a/t)*t-i.w/2:i.x=(Math.round((a+t/2)/t)-.5)*t-i.w/2,i.h/t%2==0?i.y=Math.round(n/t)*t-i.h/2:i.y=(Math.round((n+t/2)/t)-.5)*t-i.h/2}i.onMouseUp(),e.dragorig.x===i.x&&e.dragorig.y===i.y||(i!==e.selectionHelper&&(s.emit("shapeMove",{shape:i.asDict(),temporary:!1}),P(i)),e.invalidate())}if(e.resizing){if(i.w<0&&(i.x+=i.w,i.w=Math.abs(i.w)),i.h<0&&(i.y+=i.h,i.h=Math.abs(i.h)),S.layerManager.useGrid&&!t.altKey){const t=S.layerManager.gridSize;i.x=Math.round(i.x/t)*t,i.y=Math.round(i.y/t)*t,i.w=Math.max(Math.round(i.w/t)*t,t),i.h=Math.max(Math.round(i.h/t)*t,t)}i!==e.selectionHelper&&(s.emit("shapeMove",{shape:i.asDict(),temporary:!1}),P(i)),e.invalidate()}});e.dragging=!1,e.resizing=!1,e.panning=!1,e.selecting=!1},v.prototype.onContextMenu=function(t){t.preventDefault(),t.stopPropagation();const e=S.layerManager.getLayer(),i=e.getMouse(t),a=i.x,n=i.y;e.shapes.data.forEach(function(t){t.contains(a,n)&&t.showContextMenu(i)})},m.prototype.onMouseDown=function(t){const e=S.layerManager.getLayer();this.startPoint=A(e.getMouse(t));const i=this.fillColor.spectrum("get"),a=null===i?tinycolor("transparent"):i,n=this.borderColor.spectrum("get"),o=null===n?tinycolor("transparent"):n;this.rect=new c(this.startPoint.x,this.startPoint.y,0,0,a.toRgbString(),o.toRgbString()),this.rect.owners.push(S.username),"fow"===e.name&&(this.rect.visionObstruction=!0,this.rect.movementObstruction=!0),S.lightblockers.push(this.rect.uuid),e.addShape(this.rect,!0,!1)},m.prototype.onMouseMove=function(t){if(null===this.startPoint)return;const e=S.layerManager.getLayer(),i=A(e.getMouse(t));this.rect.w=Math.abs(i.x-this.startPoint.x),this.rect.h=Math.abs(i.y-this.startPoint.y),this.rect.x=Math.min(this.startPoint.x,i.x),this.rect.y=Math.min(this.startPoint.y,i.y),s.emit("shapeMove",{shape:this.rect.asDict(),temporary:!1}),e.invalidate()},m.prototype.onMouseUp=function(){null!==this.startPoint&&(this.startPoint=null,this.rect=null)},x.prototype.onMouseDown=function(t){const e=S.layerManager.getLayer("draw");this.startPoint=A(e.getMouse(t)),this.ruler=new h(this.startPoint.x,this.startPoint.y,this.startPoint.x,this.startPoint.y),this.text=new d(this.startPoint.x,this.startPoint.y,"","20px serif"),this.ruler.owners.push(S.username),this.text.owners.push(S.username),e.addShape(this.ruler,!0,!0),e.addShape(this.text,!0,!0)},x.prototype.onMouseMove=function(t){if(null===this.startPoint)return;const e=S.layerManager.getLayer("draw"),i=A(e.getMouse(t));this.ruler.x2=i.x,this.ruler.y2=i.y,s.emit("shapeMove",{shape:this.ruler.asDict(),temporary:!0});const a=Math.sign(i.x-this.startPoint.x)*Math.sign(i.y-this.startPoint.y),n=Math.abs(i.x-this.startPoint.x),o=Math.abs(i.y-this.startPoint.y),r=Math.round(Math.sqrt(n**2+o**2)*S.layerManager.unitSize/S.layerManager.gridSize)+" ft";let l=Math.atan2(a*o,n);const c=Math.min(this.startPoint.x,i.x)+n/2,u=Math.min(this.startPoint.y,i.y)+o/2;this.text.x=c,this.text.y=u,this.text.text=r,this.text.angle=l,s.emit("shapeMove",{shape:this.text.asDict(),temporary:!0}),e.invalidate(!0)},x.prototype.onMouseUp=function(){if(null===this.startPoint)return;this.startPoint=null;const t=S.layerManager.getLayer("draw");t.removeShape(this.ruler,!0,!0),t.removeShape(this.text,!0,!0),this.ruler=null,this.text=null,t.invalidate(!0)},w.prototype.onMouseDown=function(t){const e=S.layerManager.getLayer("fow");this.startPoint=A(e.getMouse(t)),this.rect=new c(this.startPoint.x,this.startPoint.y,0,0,I.spectrum("get").toRgbString()),e.addShape(this.rect,!0,!1),$("#fow-reveal").prop("checked")?this.rect.globalCompositeOperation="destination-out":this.rect.globalCompositeOperation="source-over"},w.prototype.onMouseUp=function(){null!==this.startPoint&&(this.startPoint=null,this.rect=null)},w.prototype.onMouseMove=function(t){if(null===this.startPoint)return;const e=S.layerManager.getLayer("fow"),i=A(e.getMouse(t));this.rect.w=Math.abs(i.x-this.startPoint.x),this.rect.h=Math.abs(i.y-this.startPoint.y),this.rect.x=Math.min(this.startPoint.x,i.x),this.rect.y=Math.min(this.startPoint.y,i.y),s.emit("shapeMove",{shape:this.rect.asDict(),temporary:!1}),e.invalidate()},M.prototype.onMouseDown=function(t){const e=S.layerManager.getLayer();this.startPoint=A(e.getMouse(t)),this.rect=new c(this.startPoint.x,this.startPoint.y,0,0,"rgba(0,0,0,0)","black"),e.addShape(this.rect,!1,!1)},M.prototype.onMouseMove=function(t){if(null===this.startPoint)return;const e=S.layerManager.getLayer(),i=A(e.getMouse(t));this.rect.w=Math.abs(i.x-this.startPoint.x),this.rect.h=Math.abs(i.y-this.startPoint.y),this.rect.x=Math.min(this.startPoint.x,i.x),this.rect.y=Math.min(this.startPoint.y,i.y),e.invalidate()},M.prototype.onMouseUp=function(){if(null===this.startPoint)return;const t=S.layerManager.getLayer();if(1!==t.selection.length)return void t.removeShape(this.rect,!1,!1);const e=this.rect.w,i=this.rect.h;t.selection[0].w*=this.xCount.val()*S.layerManager.gridSize/e,t.selection[0].h*=this.yCount.val()*S.layerManager.gridSize/i,t.removeShape(this.rect,!1,!1),this.startPoint=null,this.rect=null},b.prototype.setClientOptions=function(t){"gridColour"in t&&O.spectrum("set",t.gridColour),"fowColour"in t&&(I.spectrum("set",t.fowColour),S.layerManager.invalidate()),"panX"in t&&(S.layerManager.panX=t.panX),"panY"in t&&(S.layerManager.panY=t.panY),"zoomFactor"in t&&(S.layerManager.zoomFactor=t.zoomFactor,$("#zoomer").slider({value:1/t.zoomFactor}),S.layerManager.getGridLayer().invalidate())},b.prototype.setupTools=function(){const t=$("#toolselect").find("ul");k.forEach(function(e){if(!e.playerTool&&!S.IS_DM)return;const i=e.defaultSelect?" class='tool-selected'":"",a=$("<li id='tool-"+e.name+"'"+i+"><a href='#'>"+e.name+"</a></li>");if(t.append(a),e.hasDetail){const t=e.func.detailDiv;$("#tooldetail").append(t),t.hide()}a.on("click",function(){const t=k.indexOf(e);if(t!==S.selectedTool){$(".tool-selected").removeClass("tool-selected"),$(this).addClass("tool-selected"),S.selectedTool=t;const i=$("#tooldetail");e.hasDetail?($("#tooldetail").children().hide(),e.func.detailDiv.show(),i.show()):i.hide()}})})};let S=new b;const k=[{name:"select",playerTool:!0,defaultSelect:!0,hasDetail:!1,func:S.layerManager},{name:"pan",playerTool:!0,defaultSelect:!1,hasDetail:!1,func:S.layerManager},{name:"draw",playerTool:!0,defaultSelect:!1,hasDetail:!0,func:S.drawTool},{name:"ruler",playerTool:!0,defaultSelect:!1,hasDetail:!1,func:S.rulerTool},{name:"fow",playerTool:!1,defaultSelect:!1,hasDetail:!0,func:S.fowTool},{name:"map",playerTool:!1,defaultSelect:!1,hasDetail:!0,func:S.mapTool}],O=$("#gridColour");O.spectrum({showInput:!0,allowEmpty:!0,showAlpha:!0,color:"rgba(255,0,0, 0.5)",move:function(){S.layerManager.drawGrid()},change:function(t){s.emit("set clientOptions",{gridColour:t.toRgbString()})}});const I=$("#fowColour");I.spectrum({showInput:!0,color:"rgb(82, 81, 81)",move:function(t){const e=S.layerManager.getLayer("fow");void 0!==e&&(e.shapes.data.forEach(function(e){e.fill=t.toRgbString()}),e.invalidate())},change:function(t){s.emit("set clientOptions",{fowColour:t.toRgbString()})}}),window.addEventListener("selectstart",function(t){return t.preventDefault(),!1}),window.addEventListener("mousedown",function(t){board_initialised&&(0!==t.button&&1!==t.button||"CANVAS"!==t.target.tagName||(L.hide(),k[S.selectedTool].func.onMouseDown(t)))}),window.addEventListener("mousemove",function(t){board_initialised&&(0!==t.button&&1!==t.button||"CANVAS"!==t.target.tagName||k[S.selectedTool].func.onMouseMove(t))}),window.addEventListener("mouseup",function(t){board_initialised&&(0!==t.button&&1!==t.button||"CANVAS"!==t.target.tagName||k[S.selectedTool].func.onMouseUp(t))}),window.addEventListener("contextmenu",function(t){board_initialised&&2===t.button&&"CANVAS"===t.target.tagName&&k[S.selectedTool].func.onContextMenu(t)}),$("#zoomer").slider({orientation:"vertical",min:.5,max:5,step:.1,value:S.layerManager.zoomFactor,slide:function(t,e){const i=S.layerManager.zoomFactor,a=1/e.value,n=window.innerWidth/i,o=window.innerWidth/a,r=window.innerHeight/i,l=window.innerHeight/a;S.layerManager.zoomFactor=a,S.layerManager.panX-=(n-o)/2,S.layerManager.panY-=(r-l)/2,S.layerManager.invalidate(),s.emit("set clientOptions",{zoomFactor:a,panX:S.layerManager.panX,panY:S.layerManager.panY})}});const L=$("#contextMenu");L.hide();const C={x:$("#selectionInfoX"),y:$("#selectionInfoY"),w:$("#selectionInfoW"),h:$("#selectionInfoH")};function P(t){C.x.val(t.x),C.y.val(t.y),C.w.val(t.w),C.h.val(t.h)}const D=$("#shapeselectiondialog").dialog({autoOpen:!1,width:"auto"}),z=$("#initiativedialog").dialog({autoOpen:!1,width:"160px"});const T=$("#menu"),U=$("#locations-menu"),F=$("#layerselect");function B(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}function W(t){const e=S.layerManager.zoomFactor,i=S.layerManager.panX,a=S.layerManager.panY;return{x:(t.x+i)*e,y:(t.y+a)*e}}function E(t){return W({x:t,y:0}).x}function G(t){return W({x:0,y:t}).y}function H(t){return t*S.layerManager.zoomFactor}function R(t){return t/S.layerManager.unitSize*S.layerManager.gridSize}function _(t){return H(R(t))}function A(t){const e=S.layerManager.zoomFactor,i=S.layerManager.panX,a=S.layerManager.panY;return{x:t.x/e-i,y:t.y/e-a}}function j(t){return A({x:t,y:0}).x}function N(t){return A({x:0,y:t}).y}function X(){this.data=[]}function Y(){this.data=[]}function V(t,e,i){return t.x>=Math.min(e.x,i.x)-1e-6&&t.x<=Math.max(e.x,i.x)+1e-6&&t.y>=Math.min(e.y,i.y)-1e-6&&t.y<=Math.max(e.y,i.y)+1e-6}function q(t,e,i,a){const n=e.y-t.y,o=t.x-e.x,s=a.y-i.y,r=i.x-a.x,l=n*r-s*o;if(0===l)return!1;const c=s*i.x+r*i.y,u=n*t.x+o*t.y,h=1/l,d={x:(r*u-o*c)*h,y:(n*c-s*u)*h};return function(t,e,i,a,n){return V(t,e,i)&&V(t,a,n)}(d,t,e,i,a)?d:null}function K(t,e){const i=t.x-e.x,a=t.y-e.y;return Math.sqrt(i*i+a*a)}$("#selection-menu").hide(),$("#rm-settings").on("click",function(){T.is(":visible")?($("#radialmenu").animate({left:"-=200px"}),T.animate({width:"toggle"}),U.animate({left:"-=200px",width:"+=200px"}),F.animate({left:"-=200px"})):(T.animate({width:"toggle"}),$("#radialmenu").animate({left:"+=200px"}),U.animate({left:"+=200px",width:"-=200px"}),F.animate({left:"+=200px"}))}),$("#rm-locations").on("click",function(){U.is(":visible")?($("#radialmenu").animate({top:"-=100px"}),U.animate({height:"toggle"})):(U.animate({height:"toggle"}),$("#radialmenu").animate({top:"+=100px"}))}),window.onresize=function(){S.layerManager.setWidth(window.innerWidth),S.layerManager.setHeight(window.innerHeight),S.layerManager.invalidate()},$("body").keyup(function(t){if(46===t.keyCode&&"INPUT"!==t.target.tagName){const t=S.layerManager.getLayer();t.selection.forEach(function(e){t.removeShape(e,!0,!1),S.initiativeTracker.removeInitiative(e.uuid,!0)})}}),$("#gridSizeInput").on("change",function(t){const e=parseInt(t.target.value);S.layerManager.setGridSize(e),s.emit("set gridsize",e)}),$("#unitSizeInput").on("change",function(t){const e=parseInt(t.target.value);S.layerManager.setUnitSize(e),s.emit("set locationOptions",{unitSize:e})}),$("#useGridInput").on("change",function(t){const e=t.target.checked;S.layerManager.setUseGrid(e),s.emit("set locationOptions",{useGrid:e})}),$("#useFOWInput").on("change",function(t){const e=t.target.checked;S.layerManager.setFullFOW(e),s.emit("set locationOptions",{fullFOW:e})}),$("#fowOpacity").on("change",function(t){let e=parseFloat(t.target.value);isNaN(e)?$("#fowOpacity").val(S.layerManager.fowOpacity):(e<0&&(e=0),e>1&&(e=1),S.layerManager.setFOWOpacity(e),s.emit("set locationOptions",{fowOpacity:e}))}),X.prototype=[],X.prototype.push=function(t){this.data.push(t)},X.prototype.remove=function(t){this.data.splice(this.data.indexOf(t),1)},X.prototype.indexOf=function(t){return this.data.indexOf(t)},X.prototype.moveTo=function(t,e){const i=this.indexOf(t);return i!==e&&(this.data.splice(i,1),this.data.splice(e,0,t),!0)},Y.prototype.addInitiative=function(t,e){0!==this.data.length&&z.dialog("isOpen")||z.dialog("open"),void 0===t.initiative&&(t.initiative=0);const i=this.data.find(e=>e.uuid===t.uuid);void 0!==i?(Object.assign(i,t),this.redraw()):(this.data.push(t),this.redraw()),e&&s.emit("updateInitiative",t)},Y.prototype.removeInitiative=function(t,e,i){i=i||!1;const a=this.data.findIndex(e=>e.uuid===t);if(a>=0){if(!i&&this.data[a].group)return;this.data.splice(a,1),this.redraw(),e&&s.emit("updateInitiative",{uuid:t})}0===this.data.length&&z.dialog("isOpen")&&z.dialog("close")},Y.prototype.redraw=function(){z.empty(),this.data.sort(function(t,e){return e.initiative-t.initiative});const t=this;this.data.forEach(function(e){void 0===e.owners&&(e.owners=[]);const i=void 0===e.src?"":$(`<img src="${e.src}" width="30px" data-uuid="${e.uuid}">`),a=$(`<input type="text" placeholder="value" data-uuid="${e.uuid}" value="${e.initiative}" style="grid-column-start: value">`),n=$(`<div data-uuid="${e.uuid}"><i class="fas fa-eye"></i></div>`),o=$(`<div data-uuid="${e.uuid}"><i class="fas fa-users"></i></div>`),r=$(`<div style="grid-column-start: remove" data-uuid="${e.uuid}"><i class="fas fa-trash-alt"></i></div>`);n.css("opacity",e.visible?"1.0":"0.3"),o.css("opacity",e.group?"1.0":"0.3"),e.owners.includes(S.username)||S.IS_DM||(a.prop("disabled","disabled"),r.css("opacity","0.3")),z.append(i).append(a).append(n).append(o).append(r),a.on("change",function(){const e=t.data.find(t=>t.uuid===$(this).data("uuid"));e.initiative=parseInt($(this).val())||0,t.addInitiative(e,!0)}),n.on("click",function(){const e=t.data.find(t=>t.uuid===$(this).data("uuid"));(e.owners.includes(S.username)||S.IS_DM)&&(e.visible=!e.visible,e.visible?$(this).css("opacity",1):$(this).css("opacity",.3),s.emit("updateInitiative",e))}),o.on("click",function(){const e=t.data.find(t=>t.uuid===$(this).data("uuid"));(e.owners.includes(S.username)||S.IS_DM)&&(e.group=!e.group,e.group?$(this).css("opacity",1):$(this).css("opacity",.3),s.emit("updateInitiative",e))}),r.on("click",function(){const e=$(this).data("uuid");(t.data.find(t=>t.uuid===e).owners.includes(S.username)||S.IS_DM)&&($(`[data-uuid=${e}]`).remove(),t.removeInitiative(e,!0,!0))})})};var Q=e.default=S}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vUGxhbmFyQWxseS9jbGllbnQvc3JjL3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9QbGFuYXJBbGx5L2NsaWVudC9zcmMvcGxhbmFyYWxseS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic29ja2V0X3Byb3RvY29sIiwiZG9jdW1lbnQiLCJkb21haW4iLCJzb2NrZXRfc29ja2V0IiwiaW8iLCJjb25uZWN0IiwibG9jYXRpb24iLCJwb3J0Iiwic29ja2V0X2JvYXJkX2luaXRpYWxpc2VkIiwib24iLCJjb25zb2xlIiwibG9nIiwiZGVzdGluYXRpb24iLCJ3aW5kb3ciLCJocmVmIiwidXNlcm5hbWUiLCJwbGFuYXJhbGx5IiwiSVNfRE0iLCJwYXRobmFtZSIsInNwbGl0IiwiJCIsImZpbmQiLCJodG1sIiwibGVuZ3RoIiwic2V0dXBUb29scyIsIm9wdGlvbnMiLCJzZXRDbGllbnRPcHRpb25zIiwibGF5ZXJNYW5hZ2VyIiwic2V0T3B0aW9ucyIsImFzc2V0cyIsImVtcHR5IiwiaCIsInByb2Nlc3MiLCJlbnRyeSIsInBhdGgiLCJNYXAiLCJlbnRyaWVzIiwiZm9sZGVycyIsImZvckVhY2giLCJrZXkiLCJmaWxlcyIsInNvcnQiLCJhbHBoU29ydCIsImFzc2V0IiwiZHJhZ2dhYmxlIiwiaGVscGVyIiwiYXBwZW5kVG8iLCJlYWNoIiwiaWR4IiwidGhpcyIsInRvZ2dsZUNsYXNzIiwibmV4dCIsInRvZ2dsZSIsInJvb20iLCJMYXllck1hbmFnZXIiLCJsYXllcnNkaXYiLCJsYXllcnNlbGVjdGRpdiIsInNlbGVjdGFibGVfbGF5ZXJzIiwibG0iLCJjaGlsZHJlbiIsIm9mZiIsImxvY2F0aW9ucyIsImxvYyIsImFwcGVuZCIsImxtcGx1cyIsImUiLCJ0YXJnZXQiLCJ0ZXh0Q29udGVudCIsImxvY25hbWUiLCJwcm9tcHQiLCJlbWl0IiwiYm9hcmQiLCJsYXllcnMiLCJuZXdfbGF5ZXIiLCJzZWxlY3RhYmxlIiwiZXh0cmEiLCJjYW52YXMiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImdyaWQiLCJHcmlkTGF5ZXJTdGF0ZSIsIkZPV0xheWVyU3RhdGUiLCJMYXllclN0YXRlIiwicGxheWVyX2VkaXRhYmxlIiwiYWRkTGF5ZXIiLCJzZXRHcmlkU2l6ZSIsInNpemUiLCJkcmF3R3JpZCIsImRyb3BwYWJsZSIsImFjY2VwdCIsImRyb3AiLCJldmVudCIsInVpIiwiZ2V0TGF5ZXIiLCJvZmZzZXQiLCJ4IiwicGFyc2VJbnQiLCJsZWZ0IiwieSIsInRvcCIsInNldHRpbmdzX21lbnUiLCJpcyIsImxvY2F0aW9uc19tZW51Iiwid2xvYyIsImwydyIsImltZyIsIkFzc2V0Iiwic3JjIiwidXNlR3JpZCIsImFsdEtleSIsImdzIiwiZ3JpZFNpemUiLCJNYXRoIiwicm91bmQiLCJ3IiwibWF4IiwiYWRkU2hhcGUiLCJzZXRTaGFwZXMiLCJzaGFwZXMiLCJzZXRMYXllciIsImlkIiwib2xkIiwic2VsZWN0ZWRMYXllciIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJoaWRlIiwic2hhcGUiLCJsYXllciIsImNyZWF0ZVNoYXBlRnJvbURpY3QiLCJpbnZhbGlkYXRlIiwicmVtb3ZlU2hhcGUiLCJVVUlETWFwIiwidXVpZCIsImRhdGEiLCJtb3ZlU2hhcGVPcmRlciIsImluZGV4IiwiYXNzaWduIiwiY2hlY2tMaWdodFNvdXJjZXMiLCJvblNoYXBlTW92ZSIsInNldE1vdmVtZW50QmxvY2siLCJtb3ZlbWVudE9ic3RydWN0aW9uIiwicmVkcmF3IiwidW5kZWZpbmVkIiwiaW5pdGlhdGl2ZSIsIm93bmVycyIsImluY2x1ZGVzIiwidmlzaWJsZSIsImluaXRpYXRpdmVUcmFja2VyIiwiYWRkSW5pdGlhdGl2ZSIsInJlbW92ZUluaXRpYXRpdmUiLCJpbml0aWF0aXZlRGlhbG9nIiwiZGlhbG9nIiwic3JjX3NvY2tldCIsInBsYW5hcmFsbHlfU2hhcGUiLCJ0cmFja2VycyIsImF1cmFzIiwidmlzaW9uT2JzdHJ1Y3Rpb24iLCJwbGFuYXJhbGx5X0JvdW5kaW5nUmVjdCIsInR5cGUiLCJwbGFuYXJhbGx5X1JlY3QiLCJmaWxsIiwiYm9yZGVyIiwicGxhbmFyYWxseV91dWlkdjQiLCJwbGFuYXJhbGx5X0NpcmNsZSIsInBsYW5hcmFsbHlfTGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwicGxhbmFyYWxseV9UZXh0IiwidGV4dCIsImZvbnQiLCJhbmdsZSIsInBsYW5hcmFsbHlfQXNzZXQiLCJwbGFuYXJhbGx5X0xheWVyU3RhdGUiLCJjdHgiLCJnZXRDb250ZXh0IiwiZGVmYXVsdFZpZXciLCJnZXRDb21wdXRlZFN0eWxlIiwic3R5bGVQYWRkaW5nTGVmdCIsInN0eWxlUGFkZGluZ1RvcCIsInN0eWxlQm9yZGVyTGVmdCIsInN0eWxlQm9yZGVyVG9wIiwiYm9keSIsInBhcmVudE5vZGUiLCJodG1sVG9wIiwib2Zmc2V0VG9wIiwiaHRtbExlZnQiLCJvZmZzZXRMZWZ0IiwidmFsaWQiLCJwbGFuYXJhbGx5X09yZGVyZWRNYXAiLCJkcmFnZ2luZyIsInJlc2l6aW5nIiwicGFubmluZyIsInNlbGVjdGluZyIsInJlc2l6ZWRpciIsInNlbGVjdGlvbkhlbHBlciIsInNlbGVjdGlvblN0YXJ0UG9pbnQiLCJzZWxlY3Rpb24iLCJkcmFnb2ZmeCIsImRyYWdvZmZ5Iiwic2VsZWN0aW9uQ29sb3IiLCJzZWxlY3Rpb25XaWR0aCIsInBsYW5hcmFsbHlfR3JpZExheWVyU3RhdGUiLCJwbGFuYXJhbGx5X0ZPV0xheWVyU3RhdGUiLCJwbGFuYXJhbGx5X0xheWVyTWFuYWdlciIsInVuaXRTaXplIiwiZnVsbEZPVyIsImZvd09wYWNpdHkiLCJ6b29tRmFjdG9yIiwicGFuWCIsInBhblkiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZHJhdyIsInBsYW5hcmFsbHlfRHJhd1Rvb2wiLCJzdGFydFBvaW50IiwiZGV0YWlsRGl2IiwiZmlsbENvbG9yIiwiYm9yZGVyQ29sb3IiLCJzcGVjdHJ1bSIsInNob3dJbnB1dCIsImFsbG93RW1wdHkiLCJzaG93QWxwaGEiLCJjb2xvciIsInBsYW5hcmFsbHlfUnVsZXJUb29sIiwicGxhbmFyYWxseV9GT1dUb29sIiwicGxhbmFyYWxseV9NYXBUb29sIiwieENvdW50IiwieUNvdW50IiwicGxhbmFyYWxseV9HYW1lTWFuYWdlciIsInNlbGVjdGVkVG9vbCIsInJ1bGVyVG9vbCIsImRyYXdUb29sIiwiZm93VG9vbCIsIm1hcFRvb2wiLCJsaWdodHNvdXJjZXMiLCJsaWdodGJsb2NrZXJzIiwibW92ZW1lbnRibG9ja2VycyIsInBsYW5hcmFsbHlfSW5pdGlhdGl2ZVRyYWNrZXIiLCJqUXVlcnkiLCJzcGVjaWFsIiwidG91Y2hzdGFydCIsInNldHVwIiwiXyIsIm5zIiwiaGFuZGxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3NpdmUiLCJnZXRCb3VuZGluZ0JveCIsInNlbGYiLCJ2b19pIiwicGxhbmFyYWxseV9nYW1lTWFuYWdlciIsImluZGV4T2YiLCJwdXNoIiwic3BsaWNlIiwiYXUiLCJscyIsImZpbmRJbmRleCIsImF1cmEiLCJsaWdodFNvdXJjZSIsInNvbWUiLCJhIiwiYmxvY2tzTW92ZW1lbnQiLCJvd25lZEJ5Iiwib25Nb3VzZVVwIiwib25TZWxlY3Rpb24iLCJtYXh2YWx1ZSIsImRpbSIsImNvbG91ciIsInRyYWNrZXIiLCJ2YWwiLCJzaG93IiwiZWRpdGJ1dHRvbiIsImRpYWxvZ19uYW1lIiwiYXNEaWN0IiwiZGlhbG9nX2xpZ2h0YmxvY2siLCJwcm9wIiwiZGlhbG9nX21vdmVibG9jayIsImFkZE93bmVyIiwib3duZXIiLCJvd19uYW1lIiwib3dfcmVtb3ZlIiwiYmVmb3JlIiwiYWRkIiwib3dfaSIsIm93IiwicHJldiIsInJlbW92ZSIsImFkZEF1cmEiLCJhdXJhX25hbWUiLCJhdXJhX3ZhbCIsImF1cmFfZGltdmFsIiwiYXVyYV9jb2xvdXIiLCJhdXJhX3Zpc2libGUiLCJhdXJhX2xpZ2h0IiwiYXVyYV9yZW1vdmUiLCJsYXN0IiwiY3NzIiwibW92ZSIsInRvUmdiU3RyaW5nIiwiY2hhbmdlIiwidCIsImZvd2wiLCJuZXh0VW50aWwiLCJhZGRUcmFja2VyIiwidHJfbmFtZSIsInRyX3ZhbCIsInRyX21heHZhbCIsInRyX3Zpc2libGUiLCJ0cl9yZW1vdmUiLCJ0ciIsInBsYW5hcmFsbHlfc2hhcGVTZWxlY3Rpb25EaWFsb2ciLCJuZXdfdHJhY2tlciIsInNsaWNlIiwibmV3X2F1cmEiLCJvblNlbGVjdGlvbkxvc3MiLCJvblJlbW92ZSIsInBsYW5hcmFsbHlfZm93Q29sb3VyIiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwiZHJhd0F1cmFzIiwiYmVnaW5QYXRoIiwiZmlsbFN0eWxlIiwicGxhbmFyYWxseV93MmwiLCJjZW50ZXIiLCJhcmMiLCJwbGFuYXJhbGx5X3cybHIiLCJQSSIsInRjIiwidGlueWNvbG9yIiwic2V0QWxwaGEiLCJnZXRBbHBoYSIsImNvbnRhaW5zIiwic2hvd0NvbnRleHRNZW51IiwibW91c2UiLCJwbGFuYXJhbGx5XyRtZW51Iiwic2VsIiwibWVudSIsImFjdGlvbiIsImdyb3VwIiwicGxhbmFyYWxseV9oYW5kbGVDb250ZXh0TWVudSIsIm14IiwibXkiLCJ3b3JsZCIsInBsYW5hcmFsbHlfbDJ3eCIsInBsYW5hcmFsbHlfbDJ3eSIsImludGVyc2VjdHNXaXRoIiwib3RoZXIiLCJnZXRJbnRlcnNlY3RXaXRoTGluZSIsImxpbmUiLCJsaW5lcyIsInBsYW5hcmFsbHlfZ2V0TGluZXNJbnRlcnNlY3RQb2ludCIsInN0YXJ0IiwiZW5kIiwibWluX2QiLCJJbmZpbml0eSIsIm1pbl9pIiwicGxhbmFyYWxseV9nZXRQb2ludERpc3RhbmNlIiwiaW50ZXJzZWN0IiwiZGlzdGFuY2UiLCJjcmVhdGUiLCJ6IiwiZmlsbFJlY3QiLCJzdHJva2VTdHlsZSIsInN0cm9rZVJlY3QiLCJpbkNvcm5lciIsImNvcm5lciIsInBsYW5hcmFsbHlfdzJseCIsInBsYW5hcmFsbHlfdzJseSIsImdldENvcm5lciIsImNlbnRlclBvaW50Iiwic3Ryb2tlIiwibWluIiwiYWJzIiwibW92ZVRvIiwibGluZVRvIiwibGluZVdpZHRoIiwic2F2ZSIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsInRleHRBbGlnbiIsImZpbGxUZXh0IiwicmVzdG9yZSIsImRyYXdJbWFnZSIsInNraXBMaWdodFVwZGF0ZSIsImZvdyIsInN5bmMiLCJ0ZW1wb3JhcnkiLCJzZXQiLCJzaCIsImR1bW15IiwiaGFzIiwiSW1hZ2UiLCJvbmxvYWQiLCJwbGFuYXJhbGx5X2NyZWF0ZVNoYXBlRnJvbURpY3QiLCJsc19pIiwibGJfaSIsIm1iX2kiLCJkZWxldGUiLCJjbGVhciIsImNsZWFyUmVjdCIsImRvQ2xlYXIiLCJib2FyZF9pbml0aWFsaXNlZCIsInN0YXRlIiwiZ2V0TW91c2UiLCJlbGVtZW50Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJvZmZzZXRQYXJlbnQiLCJwYWdlWCIsInBhZ2VZIiwiZGVzdGluYXRpb25JbmRleCIsIm9yaWdfb3AiLCJvZ2FscGhhIiwiZ2xvYmFsQWxwaGEiLCJiYiIsImxjZW50ZXIiLCJhbG0iLCJwbGFuYXJhbGx5X3cybHoiLCJncmFkaWVudCIsImNyZWF0ZVJhZGlhbEdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwiYXVyYV9sZW5ndGgiLCJwbGFuYXJhbGx5X2dldFVuaXREaXN0YW5jZSIsImJib3giLCJsb2NhbF9saWdodGJsb2NrZXJzIiwibGIiLCJsYl9iYiIsImFyY19zdGFydCIsImhpdCIsInNoYXBlX2hpdCIsInJlc3VsdCIsImNvcyIsInNpbiIsImV4dHJhWCIsImV4dHJhWSIsInNldFVuaXRTaXplIiwic2V0VXNlR3JpZCIsInNldEZ1bGxGT1ciLCJzZXRGT1dPcGFjaXR5IiwiZm93Q29sb3VyIiwic2V0V2lkdGgiLCJzZXRIZWlnaHQiLCJmb3VuZCIsImdldEdyaWRMYXllciIsInBsYW5hcmFsbHlfZ3JpZENvbG91ciIsIm9uTW91c2VEb3duIiwicGxhbmFyYWxseV90b29scyIsInNlbGVjdGlvblN0YWNrIiwiY29uY2F0IiwiY29ybiIsInBsYW5hcmFsbHlfc2V0U2VsZWN0aW9uSW5mbyIsImRyYWdvcmlnIiwicGxhbmFyYWxseV9sMnciLCJvbk1vdXNlTW92ZSIsImVuZFBvaW50Iiwib2dYIiwib2dZIiwiZHgiLCJkeSIsImJsb2NrZWQiLCJmaWx0ZXIiLCJtYiIsImludGVyIiwic3R5bGUiLCJjdXJzb3IiLCJvbkNvbnRleHRNZW51IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJyZWN0IiwicnVsZXIiLCJkaWZmc2lnbiIsInNpZ24iLCJ4ZGlmZiIsInlkaWZmIiwibGFiZWwiLCJzcXJ0IiwiYXRhbjIiLCJ4bWlkIiwieW1pZCIsImdyaWRDb2xvdXIiLCJzbGlkZXIiLCJ0b29sc2VsZWN0RGl2IiwidG9vbCIsInBsYXllclRvb2wiLCJkZWZhdWx0U2VsZWN0IiwidG9vbExpIiwiaGFzRGV0YWlsIiwiZGl2IiwiZnVuYyIsImRldGFpbCIsImJ1dHRvbiIsInRhZ05hbWUiLCJvcmllbnRhdGlvbiIsInN0ZXAiLCJzbGlkZSIsIm9yaWdaIiwibmV3WiIsIm9yaWdYIiwibmV3WCIsIm9yaWdZIiwibmV3WSIsInBsYW5hcmFsbHlfc2VsZWN0aW9uSW5mbyIsImF1dG9PcGVuIiwicGxhbmFyYWxseV9pbml0aWF0aXZlRGlhbG9nIiwicGxhbmFyYWxseV9zZXR0aW5nc19tZW51IiwicGxhbmFyYWxseV9sb2NhdGlvbnNfbWVudSIsInBsYW5hcmFsbHlfbGF5ZXJfbWVudSIsInJlcGxhY2UiLCJyYW5kb20iLCJ0b1N0cmluZyIsIm9iaiIsInBsYW5hcmFsbHlfcG9pbnRJbkxpbmUiLCJsMSIsImwyIiwiczEiLCJlMSIsInMyIiwiZTIiLCJBMSIsIkIxIiwiQTIiLCJCMiIsImRlbHRhIiwiQzIiLCJDMSIsImludmRlbHRhIiwicGxhbmFyYWxseV9wb2ludEluTGluZXMiLCJwMSIsInAyIiwiYiIsImFuaW1hdGUiLCJvbnJlc2l6ZSIsImtleXVwIiwia2V5Q29kZSIsInVzIiwidWciLCJjaGVja2VkIiwidWYiLCJmbyIsInBhcnNlRmxvYXQiLCJpc05hTiIsIm9sZElkeCIsImV4aXN0aW5nIiwic2tpcEdyb3VwQ2hlY2siLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEs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QUF1SyxRQUNBdkssRUFBQXVLLFFBQ0FoSSxFQUFBNkIsTUFBQTJQLElBQUEsYUFFQXhSLEVBQUE2QixNQUFBMlAsSUFBQSxjQUNBbEosRUFBQXBGLEtBQUEsbUJBQUF6RixNQUdBd1csRUFBQTVVLEdBQUEsbUJBQ0EsTUFBQTVCLEVBQUErUSxFQUFBckgsS0FBQWxILEtBQUF4QyxLQUFBeUosT0FBQWxILEVBQUE2QixNQUFBc0YsS0FBQSxVQUNBMUosRUFBQXFLLE9BQUFDLFNBQUEyRyxFQUFBL08sV0FBQStPLEVBQUE3TyxTQUVBcEMsRUFBQXdXLE9BQUF4VyxFQUFBd1csTUFDQXhXLEVBQUF3VyxNQUNBalUsRUFBQTZCLE1BQUEyUCxJQUFBLGFBRUF4UixFQUFBNkIsTUFBQTJQLElBQUEsY0FDQWxKLEVBQUFwRixLQUFBLG1CQUFBekYsTUFHQXFULEVBQUF6UixHQUFBLG1CQUNBLE1BQUE2SCxFQUFBbEgsRUFBQTZCLE1BQUFzRixLQUFBLFNBQ0FxSCxFQUFBckgsS0FBQWxILEtBQUF4QyxLQUFBeUosVUFDQVksT0FBQUMsU0FBQTJHLEVBQUEvTyxXQUFBK08sRUFBQTdPLFNBRUFHLGdCQUE0QmtILE1BQUs0SixTQUNqQ3RDLEVBQUFyRyxpQkFBQWpCLEdBQUEsWUFtRUEsSUFBQXRILEVBQUFtaEIsRUFBQSIsImZpbGUiOiJwbGFuYXJhbGx5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBnYW1lTWFuYWdlciBmcm9tICcuL3BsYW5hcmFsbHkuanMnXHJcblxyXG5jb25zdCBwcm90b2NvbCA9IGRvY3VtZW50LmRvbWFpbiA9PT0gJ2xvY2FsaG9zdCcgPyBcImh0dHA6Ly9cIiA6IFwiaHR0cHM6Ly9cIjtcclxuY29uc3Qgc29ja2V0ID0gaW8uY29ubmVjdChwcm90b2NvbCArIGRvY3VtZW50LmRvbWFpbiArIFwiOlwiICsgbG9jYXRpb24ucG9ydCArIFwiL3BsYW5hcmFsbHlcIik7XHJcbmxldCBib2FyZF9pbml0aWFsaXNlZCA9IGZhbHNlO1xyXG5zb2NrZXQub24oXCJjb25uZWN0XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdGVkXCIpO1xyXG59KTtcclxuc29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkRpc2Nvbm5lY3RlZFwiKTtcclxufSk7XHJcbnNvY2tldC5vbihcInJlZGlyZWN0XCIsIGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xyXG4gICAgY29uc29sZS5sb2coXCJyZWRpcmVjdGluZ1wiKTtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGVzdGluYXRpb247XHJcbn0pO1xyXG5zb2NrZXQub24oXCJzZXQgdXNlcm5hbWVcIiwgZnVuY3Rpb24gKHVzZXJuYW1lKSB7XHJcbiAgICBnYW1lTWFuYWdlci51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgZ2FtZU1hbmFnZXIuSVNfRE0gPSB1c2VybmFtZSA9PT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsyXTtcclxuICAgIGlmICgkKFwiI3Rvb2xzZWxlY3RcIikuZmluZChcInVsXCIpLmh0bWwoKS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgZ2FtZU1hbmFnZXIuc2V0dXBUb29scygpO1xyXG59KTtcclxuc29ja2V0Lm9uKFwic2V0IGNsaWVudE9wdGlvbnNcIiwgZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGdhbWVNYW5hZ2VyLnNldENsaWVudE9wdGlvbnMob3B0aW9ucyk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJzZXQgbG9jYXRpb25PcHRpb25zXCIsIGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcclxufSk7XHJcbnNvY2tldC5vbihcImFzc2V0IGxpc3RcIiwgZnVuY3Rpb24gKGFzc2V0cykge1xyXG4gICAgY29uc3QgbSA9ICQoXCIjbWVudS10b2tlbnNcIik7XHJcbiAgICBtLmVtcHR5KCk7XHJcbiAgICBsZXQgaCA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHByb2Nlc3MgPSBmdW5jdGlvbiAoZW50cnksIHBhdGgpIHtcclxuICAgICAgICBwYXRoID0gcGF0aCB8fCBcIlwiO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGVudHJ5LmZvbGRlcnMpKTtcclxuICAgICAgICBmb2xkZXJzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgaCArPSBcIjxidXR0b24gY2xhc3M9J2FjY29yZGlvbic+XCIgKyBrZXkgKyBcIjwvYnV0dG9uPjxkaXYgY2xhc3M9J2FjY29yZGlvbi1wYW5lbCc+PGRpdiBjbGFzcz0nYWNjb3JkaW9uLXN1YnBhbmVsJz5cIjtcclxuICAgICAgICAgICAgcHJvY2Vzcyh2YWx1ZSwgcGF0aCArIGtleSArIFwiL1wiKTtcclxuICAgICAgICAgICAgaCArPSBcIjwvZGl2PjwvZGl2PlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVudHJ5LmZpbGVzLnNvcnQoYWxwaFNvcnQpO1xyXG4gICAgICAgIGVudHJ5LmZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGFzc2V0KSB7XHJcbiAgICAgICAgICAgIGggKz0gXCI8ZGl2IGNsYXNzPSdkcmFnZ2FibGUgdG9rZW4nPjxpbWcgc3JjPScvc3RhdGljL2ltZy9hc3NldHMvXCIgKyBwYXRoICsgYXNzZXQgKyBcIicgd2lkdGg9JzM1Jz5cIiArIGFzc2V0ICsgXCI8aSBjbGFzcz0nZmFzIGZhLWNvZyc+PC9pPjwvZGl2PlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHByb2Nlc3MoYXNzZXRzKTtcclxuICAgIG0uaHRtbChoKTtcclxuICAgICQoXCIuZHJhZ2dhYmxlXCIpLmRyYWdnYWJsZSh7XHJcbiAgICAgICAgaGVscGVyOiBcImNsb25lXCIsXHJcbiAgICAgICAgYXBwZW5kVG86IFwiI2JvYXJkXCJcclxuICAgIH0pO1xyXG4gICAgJCgnLmFjY29yZGlvbicpLmVhY2goZnVuY3Rpb24gKGlkeCkge1xyXG4gICAgICAgICQodGhpcykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJhY2NvcmRpb24tYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLm5leHQoKS50b2dnbGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuc29ja2V0Lm9uKFwiYm9hcmQgaW5pdFwiLCBmdW5jdGlvbiAocm9vbSkge1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyID0gbmV3IExheWVyTWFuYWdlcigpO1xyXG4gICAgY29uc3QgbGF5ZXJzZGl2ID0gJCgnI2xheWVycycpO1xyXG4gICAgbGF5ZXJzZGl2LmVtcHR5KCk7XHJcbiAgICBjb25zdCBsYXllcnNlbGVjdGRpdiA9ICQoJyNsYXllcnNlbGVjdCcpO1xyXG4gICAgbGF5ZXJzZWxlY3RkaXYuZmluZChcInVsXCIpLmVtcHR5KCk7XHJcbiAgICBsZXQgc2VsZWN0YWJsZV9sYXllcnMgPSAwO1xyXG5cclxuICAgIGNvbnN0IGxtID0gJChcIiNsb2NhdGlvbnMtbWVudVwiKS5maW5kKFwiZGl2XCIpO1xyXG4gICAgbG0uY2hpbGRyZW4oKS5vZmYoKTtcclxuICAgIGxtLmVtcHR5KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb20ubG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgbG9jID0gJChcIjxkaXY+XCIgKyByb29tLmxvY2F0aW9uc1tpXSArIFwiPC9kaXY+XCIpO1xyXG4gICAgICAgIGxtLmFwcGVuZChsb2MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbG1wbHVzID0gJCgnPGRpdj48aSBjbGFzcz1cImZhcyBmYS1wbHVzXCI+PC9pPjwvZGl2PicpO1xyXG4gICAgbG0uYXBwZW5kKGxtcGx1cyk7XHJcbiAgICBsbS5jaGlsZHJlbigpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQudGV4dENvbnRlbnQgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY25hbWUgPSBwcm9tcHQoXCJOZXcgbG9jYXRpb24gbmFtZVwiKTtcclxuICAgICAgICAgICAgaWYgKGxvY25hbWUgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcIm5ldyBsb2NhdGlvblwiLCBsb2NuYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdChcImNoYW5nZSBsb2NhdGlvblwiLCBlLnRhcmdldC50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb29tLmJvYXJkLmxheWVycy5sZW5ndGggOyBpKyspIHtcclxuICAgICAgICBjb25zdCBuZXdfbGF5ZXIgPSByb29tLmJvYXJkLmxheWVyc1tpXTtcclxuICAgICAgICAvLyBVSSBjaGFuZ2VzXHJcbiAgICAgICAgbGF5ZXJzZGl2LmFwcGVuZChcIjxjYW52YXMgaWQ9J1wiICsgbmV3X2xheWVyLm5hbWUgKyBcIi1sYXllcicgc3R5bGU9J3otaW5kZXg6IFwiICsgaSArIFwiJz48L2NhbnZhcz5cIik7XHJcbiAgICAgICAgaWYgKG5ld19sYXllci5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRyYSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0YWJsZV9sYXllcnMgPT09IDApIGV4dHJhID0gXCIgY2xhc3M9J2xheWVyLXNlbGVjdGVkJ1wiO1xyXG4gICAgICAgICAgICBsYXllcnNlbGVjdGRpdi5maW5kKCd1bCcpLmFwcGVuZChcIjxsaSBpZD0nc2VsZWN0LVwiICsgbmV3X2xheWVyLm5hbWUgKyBcIidcIiArIGV4dHJhICsgXCI+PGEgaHJlZj0nIyc+XCIgKyBuZXdfbGF5ZXIubmFtZSArIFwiPC9hPjwvbGk+XCIpO1xyXG4gICAgICAgICAgICBzZWxlY3RhYmxlX2xheWVycyArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYW52YXMgPSAkKCcjJyArIG5ld19sYXllci5uYW1lICsgJy1sYXllcicpWzBdO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgLy8gU3RhdGUgY2hhbmdlc1xyXG4gICAgICAgIGxldCBsO1xyXG4gICAgICAgIGlmIChuZXdfbGF5ZXIuZ3JpZClcclxuICAgICAgICAgICAgbCA9IG5ldyBHcmlkTGF5ZXJTdGF0ZShjYW52YXMsIG5ld19sYXllci5uYW1lKTtcclxuICAgICAgICBlbHNlIGlmIChuZXdfbGF5ZXIubmFtZSA9PT0gJ2ZvdycpXHJcbiAgICAgICAgICAgIGwgPSBuZXcgRk9XTGF5ZXJTdGF0ZShjYW52YXMsIG5ld19sYXllci5uYW1lKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGwgPSBuZXcgTGF5ZXJTdGF0ZShjYW52YXMsIG5ld19sYXllci5uYW1lKTtcclxuICAgICAgICBsLnNlbGVjdGFibGUgPSBuZXdfbGF5ZXIuc2VsZWN0YWJsZTtcclxuICAgICAgICBsLnBsYXllcl9lZGl0YWJsZSA9IG5ld19sYXllci5wbGF5ZXJfZWRpdGFibGU7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmFkZExheWVyKGwpO1xyXG4gICAgICAgIGlmIChuZXdfbGF5ZXIuZ3JpZCkge1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0R3JpZFNpemUobmV3X2xheWVyLnNpemUpO1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZHJhd0dyaWQoKTtcclxuICAgICAgICAgICAgJChcIiNncmlkLWxheWVyXCIpLmRyb3BwYWJsZSh7XHJcbiAgICAgICAgICAgICAgICBhY2NlcHQ6IFwiLmRyYWdnYWJsZVwiLFxyXG4gICAgICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAkKGwuY2FudmFzKS5vZmZzZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBwYXJzZUludCh1aS5vZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogcGFyc2VJbnQodWkub2Zmc2V0LnRvcCAtIG9mZnNldC50b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzX21lbnUuaXMoXCI6dmlzaWJsZVwiKSAmJiBsb2MueCA8IHNldHRpbmdzX21lbnUud2lkdGgoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbnNfbWVudS5pcyhcIjp2aXNpYmxlXCIpICYmIGxvYy55IDwgbG9jYXRpb25zX21lbnUud2lkdGgoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpZHRoID0gdWkuaGVscGVyWzBdLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhlaWdodCA9IHVpLmhlbHBlclswXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2xvYyA9IGwydyhsb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IHVpLmRyYWdnYWJsZVswXS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldChpbWcsIHdsb2MueCwgd2xvYy55LCBpbWcud2lkdGgsIGltZy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0LnNyYyA9IGltZy5zcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lTWFuYWdlci5sYXllck1hbmFnZXIudXNlR3JpZCAmJiAhZXZlbnQuYWx0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdzID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdyaWRTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldC54ID0gTWF0aC5yb3VuZChhc3NldC54IC8gZ3MpICogZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnkgPSBNYXRoLnJvdW5kKGFzc2V0LnkgLyBncykgKiBncztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQudyA9IE1hdGgubWF4KE1hdGgucm91bmQoYXNzZXQudyAvIGdzKSAqIGdzLCBncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmggPSBNYXRoLm1heChNYXRoLnJvdW5kKGFzc2V0LmggLyBncykgKiBncywgZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbC5hZGRTaGFwZShhc3NldCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGwuc2V0U2hhcGVzKG5ld19sYXllci5zaGFwZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEZvcmNlIHRoZSBjb3JyZWN0IG9wYWNpdHkgcmVuZGVyIG9uIG90aGVyIGxheWVycy5cclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5zZXRMYXllcihnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKS5uYW1lKTtcclxuICAgIC8vIHNvY2tldC5lbWl0KFwiY2xpZW50IGluaXRpYWxpc2VkXCIpO1xyXG4gICAgYm9hcmRfaW5pdGlhbGlzZWQgPSB0cnVlO1xyXG5cclxuICAgIGlmIChzZWxlY3RhYmxlX2xheWVycyA+IDEpIHtcclxuICAgICAgICBsYXllcnNlbGVjdGRpdi5maW5kKFwibGlcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmlkLnNwbGl0KFwiLVwiKVsxXTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkID0gbGF5ZXJzZWxlY3RkaXYuZmluZChcIiNzZWxlY3QtXCIgKyBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2VsZWN0ZWRMYXllcik7XHJcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2VsZWN0ZWRMYXllcikge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImxheWVyLXNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgb2xkLnJlbW92ZUNsYXNzKFwibGF5ZXItc2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0TGF5ZXIobmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGF5ZXJzZWxlY3RkaXYuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxufSk7XHJcbnNvY2tldC5vbihcInNldCBncmlkc2l6ZVwiLCBmdW5jdGlvbiAoZ3JpZFNpemUpIHtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5zZXRHcmlkU2l6ZShncmlkU2l6ZSk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJhZGQgc2hhcGVcIiwgZnVuY3Rpb24gKHNoYXBlKSB7XHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihzaGFwZS5sYXllcik7XHJcbiAgICBsYXllci5hZGRTaGFwZShjcmVhdGVTaGFwZUZyb21EaWN0KHNoYXBlKSwgZmFsc2UpO1xyXG4gICAgbGF5ZXIuaW52YWxpZGF0ZSgpO1xyXG59KTtcclxuc29ja2V0Lm9uKFwicmVtb3ZlIHNoYXBlXCIsIGZ1bmN0aW9uIChzaGFwZSkge1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoc2hhcGUubGF5ZXIpO1xyXG4gICAgbGF5ZXIucmVtb3ZlU2hhcGUoZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLlVVSURNYXAuZ2V0KHNoYXBlLnV1aWQpLCBmYWxzZSk7XHJcbiAgICBsYXllci5pbnZhbGlkYXRlKCk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJtb3ZlU2hhcGVPcmRlclwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKGRhdGEuc2hhcGUubGF5ZXIpLm1vdmVTaGFwZU9yZGVyKGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLmdldChkYXRhLnNoYXBlLnV1aWQpLCBkYXRhLmluZGV4LCBmYWxzZSk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJzaGFwZU1vdmVcIiwgZnVuY3Rpb24gKHNoYXBlKSB7XHJcbiAgICBzaGFwZSA9IE9iamVjdC5hc3NpZ24oZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLlVVSURNYXAuZ2V0KHNoYXBlLnV1aWQpLCBjcmVhdGVTaGFwZUZyb21EaWN0KHNoYXBlLCB0cnVlKSk7XHJcbiAgICBzaGFwZS5jaGVja0xpZ2h0U291cmNlcygpO1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKHNoYXBlLmxheWVyKS5vblNoYXBlTW92ZShzaGFwZSk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJ1cGRhdGVTaGFwZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgY29uc3Qgc2hhcGUgPSBPYmplY3QuYXNzaWduKGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLmdldChkYXRhLnNoYXBlLnV1aWQpLCBjcmVhdGVTaGFwZUZyb21EaWN0KGRhdGEuc2hhcGUsIHRydWUpKTtcclxuICAgIHNoYXBlLmNoZWNrTGlnaHRTb3VyY2VzKCk7XHJcbiAgICBzaGFwZS5zZXRNb3ZlbWVudEJsb2NrKHNoYXBlLm1vdmVtZW50T2JzdHJ1Y3Rpb24pO1xyXG4gICAgaWYgKGRhdGEucmVkcmF3KVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihkYXRhLnNoYXBlLmxheWVyKS5pbnZhbGlkYXRlKCk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJ1cGRhdGVJbml0aWF0aXZlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBpZiAoZGF0YS5pbml0aWF0aXZlID09PSB1bmRlZmluZWQgfHwgKCFkYXRhLm93bmVycy5pbmNsdWRlcyhnYW1lTWFuYWdlci51c2VybmFtZSkgJiYgIWdhbWVNYW5hZ2VyLklTX0RNICYmICFkYXRhLnZpc2libGUpKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmluaXRpYXRpdmVUcmFja2VyLnJlbW92ZUluaXRpYXRpdmUoZGF0YS51dWlkLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgZ2FtZU1hbmFnZXIuaW5pdGlhdGl2ZVRyYWNrZXIuYWRkSW5pdGlhdGl2ZShkYXRhLCBmYWxzZSk7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJzZXRJbml0aWF0aXZlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBnYW1lTWFuYWdlci5pbml0aWF0aXZlVHJhY2tlci5kYXRhID0gZGF0YTtcclxuICAgIGdhbWVNYW5hZ2VyLmluaXRpYXRpdmVUcmFja2VyLnJlZHJhdygpO1xyXG4gICAgaWYgKGRhdGEubGVuZ3RoID4gMClcclxuICAgICAgICBpbml0aWF0aXZlRGlhbG9nLmRpYWxvZyhcIm9wZW5cIik7XHJcbn0pO1xyXG5zb2NrZXQub24oXCJjbGVhciB0ZW1wb3Jhcmllc1wiLCBmdW5jdGlvbiAoc2hhcGVzKSB7XHJcbiAgICBzaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoc2hhcGUubGF5ZXIpLnJlbW92ZVNoYXBlKHNoYXBlLCBmYWxzZSk7XHJcbiAgICB9KVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNvY2tldDsiLCJpbXBvcnQgc29ja2V0IGZyb20gJy4vc29ja2V0LmpzJ1xyXG5cclxuLy8gUmVtb3ZlcyB2aW9sYXRpb24gZXJyb3JzIG9uIHRvdWNoc3RhcnQ/IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ2MDk0OTEyL2FkZGVkLW5vbi1wYXNzaXZlLWV2ZW50LWxpc3RlbmVyLXRvLWEtc2Nyb2xsLWJsb2NraW5nLXRvdWNoc3RhcnQtZXZlbnRcclxuLy8gVGhpcyBpcyBvbmx5IG5lY2Vzc2FyeSBkdWUgdG8gdGhlIHNwZWN0cnVtIGNvbG9yIHBpY2tlclxyXG5qUXVlcnkuZXZlbnQuc3BlY2lhbC50b3VjaHN0YXJ0ID0ge1xyXG4gICAgc2V0dXA6IGZ1bmN0aW9uIChfLCBucywgaGFuZGxlKSB7XHJcbiAgICAgICAgaWYgKG5zLmluY2x1ZGVzKFwibm9QcmV2ZW50RGVmYXVsdFwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZSwge3Bhc3NpdmU6IGZhbHNlfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGUsIHtwYXNzaXZlOiB0cnVlfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gKioqKiBCT0FSRCBFTEVNRU5UUyAqKioqXHJcblxyXG5mdW5jdGlvbiBTaGFwZSgpIHtcclxuICAgIHRoaXMubGF5ZXIgPSBudWxsO1xyXG4gICAgdGhpcy5uYW1lID0gJ1Vua25vd24gc2hhcGUnO1xyXG4gICAgdGhpcy50cmFja2VycyA9IFtdO1xyXG4gICAgdGhpcy5hdXJhcyA9IFtdO1xyXG4gICAgdGhpcy5vd25lcnMgPSBbXTtcclxuICAgIHRoaXMudmlzaW9uT2JzdHJ1Y3Rpb24gPSBmYWxzZTtcclxuICAgIHRoaXMubW92ZW1lbnRPYnN0cnVjdGlvbiA9IGZhbHNlO1xyXG59XHJcblxyXG5TaGFwZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdCb3ggPSBmdW5jdGlvbiAoKSB7fTtcclxuU2hhcGUucHJvdG90eXBlLmNoZWNrTGlnaHRTb3VyY2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBjb25zdCB2b19pID0gZ2FtZU1hbmFnZXIubGlnaHRibG9ja2Vycy5pbmRleE9mKHRoaXMudXVpZCk7XHJcbiAgICBpZiAodGhpcy52aXNpb25PYnN0cnVjdGlvbiAmJiB2b19pID09PSAtMSlcclxuICAgICAgICBnYW1lTWFuYWdlci5saWdodGJsb2NrZXJzLnB1c2godGhpcy51dWlkKTtcclxuICAgIGVsc2UgaWYgKCF0aGlzLnZpc2lvbk9ic3RydWN0aW9uICYmIHZvX2kgPj0gMClcclxuICAgICAgICBnYW1lTWFuYWdlci5saWdodGJsb2NrZXJzLnNwbGljZSh2b19pLCAxKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgbGlnaHRzb3VyY2UgYXVyYXMgYXJlIGluIHRoZSBnYW1lTWFuYWdlclxyXG4gICAgdGhpcy5hdXJhcy5mb3JFYWNoKGZ1bmN0aW9uIChhdSkge1xyXG4gICAgICAgIGNvbnN0IGxzID0gZ2FtZU1hbmFnZXIubGlnaHRzb3VyY2VzO1xyXG4gICAgICAgIGNvbnN0IGkgPSBscy5maW5kSW5kZXgobyA9PiBvLmF1cmEgPT09IGF1LnV1aWQpO1xyXG4gICAgICAgIGlmIChhdS5saWdodFNvdXJjZSAmJiBpID09PSAtMSkge1xyXG4gICAgICAgICAgICBscy5wdXNoKHtzaGFwZTogc2VsZi51dWlkLCBhdXJhOiBhdS51dWlkfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghYXUubGlnaHRTb3VyY2UgJiYgaSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIENoZWNrIGlmIGFueXRoaW5nIGluIHRoZSBnYW1lTWFuYWdlciByZWZlcmVuY2luZyB0aGlzIHNoYXBlIGlzIGluIGZhY3Qgc3RpbGwgYSBsaWdodHNvdXJjZVxyXG4gICAgZm9yIChsZXQgaT1nYW1lTWFuYWdlci5saWdodHNvdXJjZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xyXG4gICAgICAgIGNvbnN0IGxzID0gZ2FtZU1hbmFnZXIubGlnaHRzb3VyY2VzW2ldO1xyXG4gICAgICAgIGlmIChscy5zaGFwZSA9PT0gc2VsZi51dWlkKSB7XHJcbiAgICAgICAgICAgIGlmICghc2VsZi5hdXJhcy5zb21lKGEgPT4gYS51dWlkID09PSBscy5hdXJhICYmIGEubGlnaHRTb3VyY2UpKVxyXG4gICAgICAgICAgICAgICAgZ2FtZU1hbmFnZXIubGlnaHRzb3VyY2VzLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblNoYXBlLnByb3RvdHlwZS5zZXRNb3ZlbWVudEJsb2NrID0gZnVuY3Rpb24gKGJsb2Nrc01vdmVtZW50KXtcclxuICAgIHRoaXMubW92ZW1lbnRPYnN0cnVjdGlvbiA9IGJsb2Nrc01vdmVtZW50IHx8IGZhbHNlO1xyXG4gICAgY29uc3Qgdm9faSA9IGdhbWVNYW5hZ2VyLm1vdmVtZW50YmxvY2tlcnMuaW5kZXhPZih0aGlzLnV1aWQpO1xyXG4gICAgaWYgKHRoaXMubW92ZW1lbnRPYnN0cnVjdGlvbiAmJiB2b19pID09PSAtMSlcclxuICAgICAgICBnYW1lTWFuYWdlci5tb3ZlbWVudGJsb2NrZXJzLnB1c2godGhpcy51dWlkKTtcclxuICAgIGVsc2UgaWYgKCF0aGlzLm1vdmVtZW50T2JzdHJ1Y3Rpb24gJiYgdm9faSA+PSAwKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLm1vdmVtZW50YmxvY2tlcnMuc3BsaWNlKHZvX2ksIDEpO1xyXG59O1xyXG5TaGFwZS5wcm90b3R5cGUub3duZWRCeSA9IGZ1bmN0aW9uICh1c2VybmFtZSkge1xyXG4gICAgaWYgKHVzZXJuYW1lID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgdXNlcm5hbWUgPSBnYW1lTWFuYWdlci51c2VybmFtZTtcclxuICAgIHJldHVybiBnYW1lTWFuYWdlci5JU19ETSB8fCB0aGlzLm93bmVycy5pbmNsdWRlcyh1c2VybmFtZSk7XHJcbn07XHJcblNoYXBlLnByb3RvdHlwZS5vbk1vdXNlVXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAkKGAjc2hhcGVzZWxlY3Rpb25jb2ctJHt0aGlzLnV1aWR9YCkucmVtb3ZlKCk7XHJcbiAgICAvLyBjb25zdCBjb2cgPSAkKGA8ZGl2IGlkPVwic2hhcGVzZWxlY3Rpb25jb2ctJHt0aGlzLnV1aWR9XCI+PGkgY2xhc3M9J2ZhIGZhLWNvZycgc3R5bGU9J2xlZnQ6JHt0aGlzLnh9O3RvcDoke3RoaXMueSArIHRoaXMuaCArIDEwfTt6LWluZGV4OjUwO3Bvc2l0aW9uOmFic29sdXRlOyc+PC9pPjwvZGl2PmApO1xyXG4gICAgLy8gY29nLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgIHNoYXBlU2VsZWN0aW9uRGlhbG9nLmRpYWxvZyggXCJvcGVuXCIgKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gJChcImJvZHlcIikuYXBwZW5kKGNvZyk7XHJcbn07XHJcblNoYXBlLnByb3RvdHlwZS5vblNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghdGhpcy50cmFja2Vycy5sZW5ndGggfHwgdGhpcy50cmFja2Vyc1t0aGlzLnRyYWNrZXJzLmxlbmd0aCAtIDFdLm5hbWUgIT09ICcnIHx8IHRoaXMudHJhY2tlcnNbdGhpcy50cmFja2Vycy5sZW5ndGggLSAxXS52YWx1ZSAhPT0gJycpXHJcbiAgICAgICAgdGhpcy50cmFja2Vycy5wdXNoKHt1dWlkOiB1dWlkdjQoKSwgbmFtZTogJycsIHZhbHVlOiAnJywgbWF4dmFsdWU6ICcnLCB2aXNpYmxlOiBmYWxzZX0pO1xyXG4gICAgaWYgKCF0aGlzLmF1cmFzLmxlbmd0aCB8fCB0aGlzLmF1cmFzW3RoaXMuYXVyYXMubGVuZ3RoIC0gMV0ubmFtZSAhPT0gJycgfHwgdGhpcy5hdXJhc1t0aGlzLmF1cmFzLmxlbmd0aCAtIDFdLnZhbHVlICE9PSAnJylcclxuICAgICAgICB0aGlzLmF1cmFzLnB1c2goe3V1aWQ6IHV1aWR2NCgpLCBuYW1lOiAnJywgdmFsdWU6ICcnLCBkaW06ICcnLCBsaWdodFNvdXJjZTogZmFsc2UsIGNvbG91cjogJ3JnYmEoMCwwLDAsMCknLCB2aXNpYmxlOiBmYWxzZX0pO1xyXG4gICAgJChcIiNzZWxlY3Rpb24tbmFtZVwiKS50ZXh0KHRoaXMubmFtZSk7XHJcbiAgICBjb25zdCB0cmFja2VycyA9ICQoXCIjc2VsZWN0aW9uLXRyYWNrZXJzXCIpO1xyXG4gICAgdHJhY2tlcnMuZW1wdHkoKTtcclxuICAgIHRoaXMudHJhY2tlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tlcikge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRyYWNrZXIubWF4dmFsdWUgPyBgJHt0cmFja2VyLnZhbHVlfS8ke3RyYWNrZXIubWF4dmFsdWV9YCA6IHRyYWNrZXIudmFsdWU7XHJcbiAgICAgICAgdHJhY2tlcnMuYXBwZW5kKCQoYDxkaXYgaWQ9XCJzZWxlY3Rpb24tdHJhY2tlci0ke3RyYWNrZXIudXVpZH0tbmFtZVwiIGRhdGEtdXVpZD1cIiR7dHJhY2tlci51dWlkfVwiPiR7dHJhY2tlci5uYW1lfTwvZGl2PmApKTtcclxuICAgICAgICB0cmFja2Vycy5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoYDxkaXYgaWQ9XCJzZWxlY3Rpb24tdHJhY2tlci0ke3RyYWNrZXIudXVpZH0tdmFsdWVcIiBkYXRhLXV1aWQ9XCIke3RyYWNrZXIudXVpZH1cIiBjbGFzcz1cInNlbGVjdGlvbi10cmFja2VyLXZhbHVlXCI+JHt2YWx9PC9kaXY+YClcclxuICAgICAgICApO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBhdXJhcyA9ICQoXCIjc2VsZWN0aW9uLWF1cmFzXCIpO1xyXG4gICAgYXVyYXMuZW1wdHkoKTtcclxuICAgIHRoaXMuYXVyYXMuZm9yRWFjaChmdW5jdGlvbiAoYXVyYSkge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IGF1cmEuZGltID8gYCR7YXVyYS52YWx1ZX0vJHthdXJhLmRpbX1gIDogYXVyYS52YWx1ZTtcclxuICAgICAgICBhdXJhcy5hcHBlbmQoJChgPGRpdiBpZD1cInNlbGVjdGlvbi1hdXJhLSR7YXVyYS51dWlkfS1uYW1lXCIgZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCI+JHthdXJhLm5hbWV9PC9kaXY+YCkpO1xyXG4gICAgICAgIGF1cmFzLmFwcGVuZChcclxuICAgICAgICAgICAgJChgPGRpdiBpZD1cInNlbGVjdGlvbi1hdXJhLSR7YXVyYS51dWlkfS12YWx1ZVwiIGRhdGEtdXVpZD1cIiR7YXVyYS51dWlkfVwiIGNsYXNzPVwic2VsZWN0aW9uLWF1cmEtdmFsdWVcIj4ke3ZhbH08L2Rpdj5gKVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxuICAgICQoXCIjc2VsZWN0aW9uLW1lbnVcIikuc2hvdygpO1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBjb25zdCBlZGl0YnV0dG9uID0gJChcIiNzZWxlY3Rpb24tZWRpdC1idXR0b25cIik7XHJcbiAgICBpZiAoIXRoaXMub3duZWRCeSgpKVxyXG4gICAgICAgIGVkaXRidXR0b24uaGlkZSgpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGVkaXRidXR0b24uc2hvdygpO1xyXG4gICAgZWRpdGJ1dHRvbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nLXV1aWRcIikudmFsKHNlbGYudXVpZCk7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nX25hbWUgPSAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nLW5hbWVcIik7XHJcbiAgICAgICAgZGlhbG9nX25hbWUudmFsKHNlbGYubmFtZSk7XHJcbiAgICAgICAgZGlhbG9nX25hbWUub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zdCBzID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLlVVSURNYXAuZ2V0KCQoXCIjc2hhcGVzZWxlY3Rpb25kaWFsb2ctdXVpZFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHMubmFtZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICQoXCIjc2VsZWN0aW9uLW5hbWVcIikudGV4dCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVTaGFwZVwiLCB7c2hhcGU6IHMuYXNEaWN0KCksIHJlZHJhdzogZmFsc2V9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ19saWdodGJsb2NrID0gJChcIiNzaGFwZXNlbGVjdGlvbmRpYWxvZy1saWdodGJsb2NrZXJcIik7XHJcbiAgICAgICAgZGlhbG9nX2xpZ2h0YmxvY2sucHJvcChcImNoZWNrZWRcIiwgc2VsZi52aXNpb25PYnN0cnVjdGlvbik7XHJcbiAgICAgICAgZGlhbG9nX2xpZ2h0YmxvY2sub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuVVVJRE1hcC5nZXQoJChcIiNzaGFwZXNlbGVjdGlvbmRpYWxvZy11dWlkXCIpLnZhbCgpKTtcclxuICAgICAgICAgICAgcy52aXNpb25PYnN0cnVjdGlvbiA9IGRpYWxvZ19saWdodGJsb2NrLnByb3AoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICBzLmNoZWNrTGlnaHRTb3VyY2VzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nX21vdmVibG9jayA9ICQoXCIjc2hhcGVzZWxlY3Rpb25kaWFsb2ctbW92ZWJsb2NrZXJcIik7XHJcbiAgICAgICAgZGlhbG9nX21vdmVibG9jay5wcm9wKFwiY2hlY2tlZFwiLCBzZWxmLm1vdmVtZW50T2JzdHJ1Y3Rpb24pO1xyXG4gICAgICAgIGRpYWxvZ19tb3ZlYmxvY2sub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuVVVJRE1hcC5nZXQoJChcIiNzaGFwZXNlbGVjdGlvbmRpYWxvZy11dWlkXCIpLnZhbCgpKTtcclxuICAgICAgICAgICAgcy5zZXRNb3ZlbWVudEJsb2NrKGRpYWxvZ19tb3ZlYmxvY2sucHJvcChcImNoZWNrZWRcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBvd25lcnMgPSAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nLW93bmVyc1wiKTtcclxuICAgICAgICBjb25zdCB0cmFja2VycyA9ICQoXCIjc2hhcGVzZWxlY3Rpb25kaWFsb2ctdHJhY2tlcnNcIik7XHJcbiAgICAgICAgY29uc3QgYXVyYXMgPSAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nLWF1cmFzXCIpO1xyXG4gICAgICAgIG93bmVycy5uZXh0VW50aWwodHJhY2tlcnMpLnJlbW92ZSgpO1xyXG4gICAgICAgIHRyYWNrZXJzLm5leHRVbnRpbChhdXJhcykucmVtb3ZlKCk7XHJcbiAgICAgICAgYXVyYXMubmV4dFVudGlsKCQoXCIjc2hhcGVzZWxlY3Rpb25kaWFsb2dcIikuZmluZChcImZvcm1cIikpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRPd25lcihvd25lcikge1xyXG4gICAgICAgICAgICBjb25zdCBvd19uYW1lID0gJChgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJuYW1lXCIgZGF0YS1uYW1lPVwiJHtvd25lcn1cIiB2YWx1ZT1cIiR7b3duZXJ9XCIgc3R5bGU9XCJncmlkLWNvbHVtbi1zdGFydDogbmFtZVwiPmApO1xyXG4gICAgICAgICAgICBjb25zdCBvd19yZW1vdmUgPSAkKGA8ZGl2IHN0eWxlPVwiZ3JpZC1jb2x1bW4tc3RhcnQ6IHJlbW92ZVwiPjxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoLWFsdFwiPjwvaT48L2Rpdj5gKTtcclxuXHJcbiAgICAgICAgICAgIHRyYWNrZXJzLmJlZm9yZShvd19uYW1lLmFkZChvd19yZW1vdmUpKTtcclxuXHJcbiAgICAgICAgICAgIG93X25hbWUub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3dfaSA9IHNlbGYub3duZXJzLmZpbmRJbmRleChvID0+IG8gPT09ICQodGhpcykuZGF0YSgnbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIGlmIChvd19pID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vd25lcnMuc3BsaWNlKG93X2ksIDEsICQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub3duZXJzLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLm93bmVycy5sZW5ndGggfHwgc2VsZi5vd25lcnNbc2VsZi5vd25lcnMubGVuZ3RoIC0gMV0ubmFtZSAhPT0gJycgfHwgc2VsZi5vd25lcnNbc2VsZi5vd25lcnMubGVuZ3RoIC0gMV0udmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkT3duZXIoXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBvd19yZW1vdmUub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdyA9IHNlbGYub3duZXJzLmZpbmQobyA9PiBvLnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucHJldigpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYub3duZXJzLnNwbGljZShzZWxmLm93bmVycy5pbmRleE9mKG93KSwgMSk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiBmYWxzZX0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYub3duZXJzLmZvckVhY2goYWRkT3duZXIpO1xyXG4gICAgICAgIGlmICghc2VsZi5vd25lcnMubGVuZ3RoIHx8IHNlbGYub3duZXJzW3NlbGYub3duZXJzLmxlbmd0aCAtIDFdLm5hbWUgIT09ICcnIHx8IHNlbGYub3duZXJzW3NlbGYub3duZXJzLmxlbmd0aCAtIDFdLnZhbHVlICE9PSAnJylcclxuICAgICAgICAgICAgYWRkT3duZXIoXCJcIik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrZXIodHJhY2tlcikge1xyXG4gICAgICAgICAgICBjb25zdCB0cl9uYW1lID0gJChgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJuYW1lXCIgZGF0YS11dWlkPVwiJHt0cmFja2VyLnV1aWR9XCIgdmFsdWU9XCIke3RyYWNrZXIubmFtZX1cIiBzdHlsZT1cImdyaWQtY29sdW1uLXN0YXJ0OiBuYW1lXCI+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyX3ZhbCA9ICQoYDxpbnB1dCB0eXBlPVwidGV4dFwiIHRpdGxlPVwiQ3VycmVudCB2YWx1ZVwiIGRhdGEtdXVpZD1cIiR7dHJhY2tlci51dWlkfVwiIHZhbHVlPVwiJHt0cmFja2VyLnZhbHVlfVwiPmApO1xyXG4gICAgICAgICAgICBjb25zdCB0cl9tYXh2YWwgPSAkKGA8aW5wdXQgdHlwZT1cInRleHRcIiB0aXRsZT1cIk1heCB2YWx1ZVwiIGRhdGEtdXVpZD1cIiR7dHJhY2tlci51dWlkfVwiIHZhbHVlPVwiJHt0cmFja2VyLm1heHZhbHVlIHx8IFwiXCJ9XCI+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyX3Zpc2libGUgPSAkKGA8ZGl2IGRhdGEtdXVpZD1cIiR7dHJhY2tlci51dWlkfVwiPjxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT48L2Rpdj5gKTtcclxuICAgICAgICAgICAgY29uc3QgdHJfcmVtb3ZlID0gJChgPGRpdiBkYXRhLXV1aWQ9XCIke3RyYWNrZXIudXVpZH1cIj48aSBjbGFzcz1cImZhcyBmYS10cmFzaC1hbHRcIj48L2k+PC9kaXY+YCk7XHJcblxyXG4gICAgICAgICAgICBhdXJhcy5iZWZvcmUoXHJcbiAgICAgICAgICAgICAgICB0cl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZCh0cl92YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZChgPHNwYW4gZGF0YS11dWlkPVwiJHt0cmFja2VyLnV1aWR9XCI+Lzwvc3Bhbj5gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQodHJfbWF4dmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoYDxzcGFuIGRhdGEtdXVpZD1cIiR7dHJhY2tlci51dWlkfVwiPjwvc3Bhbj5gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQodHJfdmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAuYWRkKGA8c3BhbiBkYXRhLXV1aWQ9XCIke3RyYWNrZXIudXVpZH1cIj48L3NwYW4+YClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkKHRyX3JlbW92ZSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCF0cmFja2VyLnZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB0cl92aXNpYmxlLmNzcyhcIm9wYWNpdHlcIiwgMC4zKTtcclxuXHJcbiAgICAgICAgICAgIHRyX25hbWUub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHIgPSBzZWxmLnRyYWNrZXJzLmZpbmQodCA9PiB0LnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgIHRyLm5hbWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgJChgI3NlbGVjdGlvbi10cmFja2VyLSR7dHIudXVpZH0tbmFtZWApLnRleHQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLnRyYWNrZXJzLmxlbmd0aCB8fCBzZWxmLnRyYWNrZXJzW3NlbGYudHJhY2tlcnMubGVuZ3RoIC0gMV0ubmFtZSAhPT0gJycgfHwgc2VsZi50cmFja2Vyc1tzZWxmLnRyYWNrZXJzLmxlbmd0aCAtIDFdLnZhbHVlICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJhY2tlcnMucHVzaCh7dXVpZDogdXVpZHY0KCksIG5hbWU6ICcnLCB2YWx1ZTogJycsIG1heHZhbHVlOiAnJywgdmlzaWJsZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRUcmFja2VyKHNlbGYudHJhY2tlcnNbc2VsZi50cmFja2Vycy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0cl92YWwub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHIgPSBzZWxmLnRyYWNrZXJzLmZpbmQodCA9PiB0LnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgIHRyLnZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRyLm1heHZhbHVlID8gYCR7dHIudmFsdWV9LyR7dHIubWF4dmFsdWV9YCA6IHRyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgJChgI3NlbGVjdGlvbi10cmFja2VyLSR7dHIudXVpZH0tdmFsdWVgKS50ZXh0KHZhbCk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiBmYWxzZX0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdHJfbWF4dmFsLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gc2VsZi50cmFja2Vycy5maW5kKHQgPT4gdC51dWlkID09PSAkKHRoaXMpLmRhdGEoJ3V1aWQnKSk7XHJcbiAgICAgICAgICAgICAgICB0ci5tYXh2YWx1ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0ci5tYXh2YWx1ZSA/IGAke3RyLnZhbHVlfS8ke3RyLm1heHZhbHVlfWAgOiB0ci52YWx1ZTtcclxuICAgICAgICAgICAgICAgICQoYCNzZWxlY3Rpb24tdHJhY2tlci0ke3RyLnV1aWR9LXZhbHVlYCkudGV4dCh2YWwpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVTaGFwZVwiLCB7c2hhcGU6IHNlbGYuYXNEaWN0KCksIHJlZHJhdzogZmFsc2V9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRyX3JlbW92ZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gc2VsZi50cmFja2Vycy5maW5kKHQgPT4gdC51dWlkID09PSAkKHRoaXMpLmRhdGEoJ3V1aWQnKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHIubmFtZSA9PT0gJycgfHwgdHIudmFsdWUgPT09ICcnKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAkKGBbZGF0YS11dWlkPSR7dHIudXVpZH1dYCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRyYWNrZXJzLnNwbGljZShzZWxmLnRyYWNrZXJzLmluZGV4T2YodHIpLCAxKTtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwidXBkYXRlU2hhcGVcIiwge3NoYXBlOiBzZWxmLmFzRGljdCgpLCByZWRyYXc6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0cl92aXNpYmxlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ciA9IHNlbGYudHJhY2tlcnMuZmluZCh0ID0+IHQudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyLnZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJvcGFjaXR5XCIsIDAuMyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJvcGFjaXR5XCIsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0ci52aXNpYmxlID0gIXRyLnZpc2libGU7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiB0cnVlfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi50cmFja2Vycy5mb3JFYWNoKGFkZFRyYWNrZXIpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRBdXJhKGF1cmEpIHtcclxuICAgICAgICAgICAgY29uc3QgYXVyYV9uYW1lID0gJChgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJuYW1lXCIgZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCIgdmFsdWU9XCIke2F1cmEubmFtZX1cIiBzdHlsZT1cImdyaWQtY29sdW1uLXN0YXJ0OiBuYW1lXCI+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1cmFfdmFsID0gJChgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdGl0bGU9XCJDdXJyZW50IHZhbHVlXCIgZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCIgdmFsdWU9XCIke2F1cmEudmFsdWV9XCI+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1cmFfZGltdmFsID0gJChgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdGl0bGU9XCJEaW0gdmFsdWVcIiBkYXRhLXV1aWQ9XCIke2F1cmEudXVpZH1cIiB2YWx1ZT1cIiR7YXVyYS5kaW0gfHwgXCJcIn1cIj5gKTtcclxuICAgICAgICAgICAgY29uc3QgYXVyYV9jb2xvdXIgPSAkKGA8aW5wdXQgdHlwZT1cInRleHRcIiB0aXRsZT1cIkF1cmEgY29sb3VyXCIgZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCI+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1cmFfdmlzaWJsZSA9ICQoYDxkaXYgZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCI+PGkgY2xhc3M9XCJmYXMgZmEtZXllXCI+PC9pPjwvZGl2PmApO1xyXG4gICAgICAgICAgICBjb25zdCBhdXJhX2xpZ2h0ID0gJChgPGRpdiBkYXRhLXV1aWQ9XCIke2F1cmEudXVpZH1cIj48aSBjbGFzcz1cImZhcyBmYS1saWdodGJ1bGJcIj48L2k+PC9kaXY+YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1cmFfcmVtb3ZlID0gJChgPGRpdiBkYXRhLXV1aWQ9XCIke2F1cmEudXVpZH1cIj48aSBjbGFzcz1cImZhcyBmYS10cmFzaC1hbHRcIj48L2k+PC9kaXY+YCk7XHJcblxyXG4gICAgICAgICAgICAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nXCIpLmNoaWxkcmVuKCkubGFzdCgpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgIGF1cmFfbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoYXVyYV92YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZChgPHNwYW4gZGF0YS11dWlkPVwiJHthdXJhLnV1aWR9XCI+Lzwvc3Bhbj5gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoYXVyYV9kaW12YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZCgkKGA8ZGl2IGRhdGEtdXVpZD1cIiR7YXVyYS51dWlkfVwiPmApLmFwcGVuZChhdXJhX2NvbG91cikuYXBwZW5kKCQoXCI8L2Rpdj5cIikpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoYXVyYV92aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGQoYXVyYV9saWdodClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkKGF1cmFfcmVtb3ZlKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYoIWF1cmEudmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIGF1cmFfdmlzaWJsZS5jc3MoXCJvcGFjaXR5XCIsIDAuMyk7XHJcbiAgICAgICAgICAgIGlmKCFhdXJhLmxpZ2h0U291cmNlKVxyXG4gICAgICAgICAgICAgICAgYXVyYV9saWdodC5jc3MoXCJvcGFjaXR5XCIsIDAuMyk7XHJcblxyXG4gICAgICAgICAgICBhdXJhX2NvbG91ci5zcGVjdHJ1bSh7XHJcbiAgICAgICAgICAgICAgICBzaG93SW5wdXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzaG93QWxwaGE6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogYXVyYS5jb2xvdXIsXHJcbiAgICAgICAgICAgICAgICBtb3ZlOiBmdW5jdGlvbiAoY29sb3VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXUgPSBzZWxmLmF1cmFzLmZpbmQoYSA9PiBhLnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3QgdXNlIGF1cmEgZGlyZWN0bHkgYXMgaXQgZG9lcyBub3Qgd29yayBwcm9wZXJseSBmb3IgbmV3IGF1cmFzXHJcbiAgICAgICAgICAgICAgICAgICAgYXUuY29sb3VyID0gY29sb3VyLnRvUmdiU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKHNlbGYubGF5ZXIpLmludmFsaWRhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVTaGFwZVwiLCB7c2hhcGU6IHNlbGYuYXNEaWN0KCksIHJlZHJhdzogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF1cmFfbmFtZS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdSA9IHNlbGYuYXVyYXMuZmluZChhID0+IGEudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgYXUubmFtZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAkKGAjc2VsZWN0aW9uLWF1cmEtJHthdS51dWlkfS1uYW1lYCkudGV4dCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwidXBkYXRlU2hhcGVcIiwge3NoYXBlOiBzZWxmLmFzRGljdCgpLCByZWRyYXc6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgIGlmICghc2VsZi5hdXJhcy5sZW5ndGggfHwgc2VsZi5hdXJhc1tzZWxmLmF1cmFzLmxlbmd0aCAtIDFdLm5hbWUgIT09ICcnIHx8IHNlbGYuYXVyYXNbc2VsZi5hdXJhcy5sZW5ndGggLSAxXS52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1cmFzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiB1dWlkdjQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGltOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHRTb3VyY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvdXI6ICdyZ2JhKDAsMCwwLDApJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRBdXJhKHNlbGYuYXVyYXNbc2VsZi5hdXJhcy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhdXJhX3ZhbC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdSA9IHNlbGYuYXVyYXMuZmluZCh0ID0+IHQudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgYXUudmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYXUuZGltID8gYCR7YXUudmFsdWV9LyR7YXUuZGltfWAgOiBhdS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICQoYCNzZWxlY3Rpb24tYXVyYS0ke2F1LnV1aWR9LXZhbHVlYCkudGV4dCh2YWwpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVTaGFwZVwiLCB7c2hhcGU6IHNlbGYuYXNEaWN0KCksIHJlZHJhdzogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKGF1LmxheWVyKS5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhdXJhX2RpbXZhbC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdSA9IHNlbGYuYXVyYXMuZmluZCh0ID0+IHQudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgYXUuZGltID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGF1LmRpbSA/IGAke2F1LnZhbHVlfS8ke2F1LmRpbX1gIDogYXUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAkKGAjc2VsZWN0aW9uLWF1cmEtJHthdS51dWlkfS12YWx1ZWApLnRleHQodmFsKTtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwidXBkYXRlU2hhcGVcIiwge3NoYXBlOiBzZWxmLmFzRGljdCgpLCByZWRyYXc6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihhdS5sYXllcikuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXVyYV9yZW1vdmUub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdSA9IHNlbGYuYXVyYXMuZmluZCh0ID0+IHQudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF1Lm5hbWUgPT09ICcnICYmIGF1LnZhbHVlID09PSAnJykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgJChgW2RhdGEtdXVpZD0ke2F1LnV1aWR9XWApLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hdXJhcy5zcGxpY2Uoc2VsZi5hdXJhcy5pbmRleE9mKGF1KSwgMSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNoZWNrTGlnaHRTb3VyY2VzKCk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiB0cnVlfSk7XHJcbiAgICAgICAgICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoYXUubGF5ZXIpLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF1cmFfdmlzaWJsZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXUgPSBzZWxmLmF1cmFzLmZpbmQodCA9PiB0LnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgIGF1LnZpc2libGUgPSAhYXUudmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIGlmIChhdS52aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwib3BhY2l0eVwiLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwib3BhY2l0eVwiLCAwLjMpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVTaGFwZVwiLCB7c2hhcGU6IHNlbGYuYXNEaWN0KCksIHJlZHJhdzogdHJ1ZX0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXVyYV9saWdodC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXUgPSBzZWxmLmF1cmFzLmZpbmQodCA9PiB0LnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgIGF1LmxpZ2h0U291cmNlID0gIWF1LmxpZ2h0U291cmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbHMgPSBnYW1lTWFuYWdlci5saWdodHNvdXJjZXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbHMuZmluZEluZGV4KG8gPT4gby5hdXJhID09PSBhdS51dWlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChhdS5saWdodFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwib3BhY2l0eVwiLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbHMucHVzaCh7c2hhcGU6IHNlbGYudXVpZCwgYXVyYTogYXUudXVpZH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcIm9wYWNpdHlcIiwgMC4zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBscy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3dsID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKFwiZm93XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvd2wgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBmb3dsLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwidXBkYXRlU2hhcGVcIiwge3NoYXBlOiBzZWxmLmFzRGljdCgpLCByZWRyYXc6IHRydWV9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYuYXVyYXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYWRkQXVyYShzZWxmLmF1cmFzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNoYXBlU2VsZWN0aW9uRGlhbG9nLmRpYWxvZyhcIm9wZW5cIik7XHJcbiAgICB9KTtcclxuICAgICQoJy5zZWxlY3Rpb24tdHJhY2tlci12YWx1ZScpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IHV1aWQgPSAkKHRoaXMpLmRhdGEoJ3V1aWQnKTtcclxuICAgICAgICBjb25zdCB0cmFja2VyID0gc2VsZi50cmFja2Vycy5maW5kKHQgPT4gdC51dWlkID09PSB1dWlkKTtcclxuICAgICAgICBjb25zdCBuZXdfdHJhY2tlciA9IHByb21wdChgTmV3ICAke3RyYWNrZXIubmFtZX0gdmFsdWU6IChhYnNvbHV0ZSBvciByZWxhdGl2ZSlgKTtcclxuICAgICAgICBpZiAobmV3X3RyYWNrZXJbMF0gPT09ICcrJykge1xyXG4gICAgICAgICAgICB0cmFja2VyLnZhbHVlICs9IHBhcnNlSW50KG5ld190cmFja2VyLnNsaWNlKDEpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5ld190cmFja2VyWzBdID09PSAnLScpIHtcclxuICAgICAgICAgICAgdHJhY2tlci52YWx1ZSAtPSBwYXJzZUludChuZXdfdHJhY2tlci5zbGljZSgxKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhY2tlci52YWx1ZSA9IHBhcnNlSW50KG5ld190cmFja2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdmFsID0gdHJhY2tlci5tYXh2YWx1ZSA/IGAke3RyYWNrZXIudmFsdWV9LyR7dHJhY2tlci5tYXh2YWx1ZX1gIDogdHJhY2tlci52YWx1ZTtcclxuICAgICAgICAkKHRoaXMpLnRleHQodmFsKTtcclxuICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiBmYWxzZX0pO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuc2VsZWN0aW9uLWF1cmEtdmFsdWUnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB1dWlkID0gJCh0aGlzKS5kYXRhKCd1dWlkJyk7XHJcbiAgICAgICAgY29uc3QgYXVyYSA9IHNlbGYuYXVyYXMuZmluZCh0ID0+IHQudXVpZCA9PT0gdXVpZCk7XHJcbiAgICAgICAgY29uc3QgbmV3X2F1cmEgPSBwcm9tcHQoYE5ldyAgJHthdXJhLm5hbWV9IHZhbHVlOiAoYWJzb2x1dGUgb3IgcmVsYXRpdmUpYCk7XHJcbiAgICAgICAgaWYgKG5ld19hdXJhWzBdID09PSAnKycpIHtcclxuICAgICAgICAgICAgYXVyYS52YWx1ZSArPSBwYXJzZUludChuZXdfYXVyYS5zbGljZSgxKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdfYXVyYVswXSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgIGF1cmEudmFsdWUgLT0gcGFyc2VJbnQobmV3X2F1cmEuc2xpY2UoMSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF1cmEudmFsdWUgPSBwYXJzZUludChuZXdfYXVyYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHZhbCA9IGF1cmEuZGltID8gYCR7YXVyYS52YWx1ZX0vJHthdXJhLmRpbX1gIDogYXVyYS52YWx1ZTtcclxuICAgICAgICAkKHRoaXMpLnRleHQodmFsKTtcclxuICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZVNoYXBlXCIsIHtzaGFwZTogc2VsZi5hc0RpY3QoKSwgcmVkcmF3OiB0cnVlfSk7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKHNlbGYubGF5ZXIpLmludmFsaWRhdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5TaGFwZS5wcm90b3R5cGUub25TZWxlY3Rpb25Mb3NzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gJChgI3NoYXBlc2VsZWN0aW9uY29nLSR7dGhpcy51dWlkfWApLnJlbW92ZSgpO1xyXG4gICAgJChcIiNzZWxlY3Rpb24tbWVudVwiKS5oaWRlKCk7XHJcbn07XHJcblNoYXBlLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICQoYCNzaGFwZXNlbGVjdGlvbmNvZy0ke3RoaXMudXVpZH1gKS5yZW1vdmUoKTtcclxufTtcclxuU2hhcGUucHJvdG90eXBlLmFzRGljdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzKTtcclxufTtcclxuU2hhcGUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICBpZiAodGhpcy5sYXllciA9PT0gJ2ZvdycpIHtcclxuICAgICAgICB0aGlzLmZpbGwgPSBmb3dDb2xvdXIuc3BlY3RydW0oXCJnZXRcIikudG9SZ2JTdHJpbmcoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB0aGlzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjtcclxuICAgIGVsc2VcclxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xyXG4gICAgdGhpcy5kcmF3QXVyYXMoY3R4KTtcclxufTtcclxuU2hhcGUucHJvdG90eXBlLmRyYXdBdXJhcyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5hdXJhcy5mb3JFYWNoKGZ1bmN0aW9uIChhdXJhKSB7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoXCJmb3dcIikuY3R4ID09PSBjdHggPyBcImJsYWNrXCIgOiBhdXJhLmNvbG91cjtcclxuICAgICAgICBjb25zdCBsb2MgPSB3Mmwoc2VsZi5jZW50ZXIoKSk7XHJcbiAgICAgICAgY3R4LmFyYyhsb2MueCwgbG9jLnksIHcybHIoYXVyYS52YWx1ZSksIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGlmIChhdXJhLmRpbSkge1xyXG4gICAgICAgICAgICBjb25zdCB0YyA9IHRpbnljb2xvcihhdXJhLmNvbG91cik7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRjLnNldEFscGhhKHRjLmdldEFscGhhKCkgLyAyKS50b1JnYlN0cmluZygpO1xyXG4gICAgICAgICAgICBjb25zdCBsb2MgPSB3Mmwoc2VsZi5jZW50ZXIoKSk7XHJcbiAgICAgICAgICAgIGN0eC5hcmMobG9jLngsIGxvYy55LCB3MmxyKGF1cmEuZGltKSwgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5TaGFwZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblNoYXBlLnByb3RvdHlwZS5zaG93Q29udGV4dE1lbnUgPSBmdW5jdGlvbiAobW91c2UpIHtcclxuICAgIGNvbnN0IGwgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKTtcclxuICAgIGwuc2VsZWN0aW9uID0gW3RoaXNdO1xyXG4gICAgdGhpcy5vblNlbGVjdGlvbigpO1xyXG4gICAgbC5pbnZhbGlkYXRlKHRydWUpO1xyXG4gICAgY29uc3QgYXNzZXQgPSB0aGlzO1xyXG4gICAgJG1lbnUuc2hvdygpO1xyXG4gICAgJG1lbnUuZW1wdHkoKTtcclxuICAgICRtZW51LmNzcyh7bGVmdDogbW91c2UueCwgdG9wOiBtb3VzZS55fSk7XHJcbiAgICBsZXQgZGF0YSA9IFwiXCIgK1xyXG4gICAgICAgIFwiPHVsPlwiICtcclxuICAgICAgICBcIjxsaT5MYXllcjx1bD5cIjtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5sYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICBpZiAoIWxheWVyLnNlbGVjdGFibGUpIHJldHVybjtcclxuICAgICAgICBjb25zdCBzZWwgPSBsYXllci5uYW1lID09PSBsLm5hbWUgPyBcIiBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjphcXVhJyBcIiA6IFwiIFwiO1xyXG4gICAgICAgIGRhdGEgKz0gYDxsaSBkYXRhLWFjdGlvbj0nc2V0TGF5ZXInIGRhdGEtbGF5ZXI9JyR7bGF5ZXIubmFtZX0nICR7c2VsfSBjbGFzcz0nY29udGV4dC1jbGlja2FibGUnPiR7bGF5ZXIubmFtZX08L2xpPmA7XHJcbiAgICB9KTtcclxuICAgIGRhdGEgKz0gXCI8L3VsPjwvbGk+XCIgK1xyXG4gICAgICAgIFwiPGxpIGRhdGEtYWN0aW9uPSdtb3ZlVG9CYWNrJyBjbGFzcz0nY29udGV4dC1jbGlja2FibGUnPk1vdmUgdG8gYmFjazwvbGk+XCIgK1xyXG4gICAgICAgIFwiPGxpIGRhdGEtYWN0aW9uPSdtb3ZlVG9Gcm9udCcgY2xhc3M9J2NvbnRleHQtY2xpY2thYmxlJz5Nb3ZlIHRvIGZyb250PC9saT5cIiArXHJcbiAgICAgICAgXCI8bGkgZGF0YS1hY3Rpb249J2FkZEluaXRpYXRpdmUnIGNsYXNzPSdjb250ZXh0LWNsaWNrYWJsZSc+QWRkIGluaXRpYXRpdmU8L2xpPlwiICtcclxuICAgICAgICBcIjwvdWw+XCI7XHJcbiAgICAkbWVudS5odG1sKGRhdGEpO1xyXG4gICAgJChcIi5jb250ZXh0LWNsaWNrYWJsZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaGFuZGxlQ29udGV4dE1lbnUoJCh0aGlzKSwgYXNzZXQpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBCb3VuZGluZ1JlY3QoeCwgeSwgdywgaCkge1xyXG4gICAgdGhpcy50eXBlID0gXCJib3VuZHJlY3RcIjtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy53ID0gdztcclxuICAgIHRoaXMuaCA9IGg7XHJcbn1cclxuQm91bmRpbmdSZWN0LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChteCwgbXksIHdvcmxkKSB7XHJcbiAgICBpZiAod29ybGQgPT09IHVuZGVmaW5lZCB8fCB3b3JsZCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgbXggPSBsMnd4KG14KTtcclxuICAgICAgICBteSA9IGwyd3kobXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMueCA8PSBteCAmJiAodGhpcy54ICsgdGhpcy53KSA+PSBteCAmJlxyXG4gICAgICAgIHRoaXMueSA8PSBteSAmJiAodGhpcy55ICsgdGhpcy5oKSA+PSBteTtcclxufTtcclxuQm91bmRpbmdSZWN0LnByb3RvdHlwZS5pbnRlcnNlY3RzV2l0aCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgcmV0dXJuICEob3RoZXIueCA+PSB0aGlzLnggKyB0aGlzLncgfHxcclxuICAgICAgICAgICBvdGhlci54ICsgb3RoZXIudyA8PSB0aGlzLnggfHxcclxuICAgICAgICAgICBvdGhlci55ID49IHRoaXMueSArIHRoaXMuaCB8fFxyXG4gICAgICAgICAgIG90aGVyLnkgKyBvdGhlci5oIDw9IHRoaXMueSk7XHJcbn07XHJcbkJvdW5kaW5nUmVjdC5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0V2l0aExpbmUgPSBmdW5jdGlvbiAobGluZSkge1xyXG4gICAgY29uc3QgbGluZXMgPSBbXHJcbiAgICAgICAgZ2V0TGluZXNJbnRlcnNlY3RQb2ludCh7eDogdGhpcy54LCB5OiB0aGlzLnl9LCB7eDogdGhpcy54ICsgdGhpcy53LCB5OiB0aGlzLnl9LCBsaW5lLnN0YXJ0LCBsaW5lLmVuZCksXHJcbiAgICAgICAgZ2V0TGluZXNJbnRlcnNlY3RQb2ludCh7eDogdGhpcy54ICsgdGhpcy53LCB5OiB0aGlzLnl9LCB7eDogdGhpcy54ICsgdGhpcy53LCB5OiB0aGlzLnkgKyB0aGlzLmh9LCBsaW5lLnN0YXJ0LCBsaW5lLmVuZCksXHJcbiAgICAgICAgZ2V0TGluZXNJbnRlcnNlY3RQb2ludCh7eDogdGhpcy54LCB5OiB0aGlzLnl9LCB7eDogdGhpcy54LCB5OiB0aGlzLnkgKyB0aGlzLmh9LCBsaW5lLnN0YXJ0LCBsaW5lLmVuZCksXHJcbiAgICAgICAgZ2V0TGluZXNJbnRlcnNlY3RQb2ludCh7eDogdGhpcy54LCB5OiB0aGlzLnkgKyB0aGlzLmh9LCB7eDogdGhpcy54ICsgdGhpcy53LCB5OiB0aGlzLnkgKyB0aGlzLmh9LCBsaW5lLnN0YXJ0LCBsaW5lLmVuZClcclxuICAgIF07XHJcbiAgICBsZXQgbWluX2QgPSBJbmZpbml0eTtcclxuICAgIGxldCBtaW5faSA9IG51bGw7XHJcbiAgICBmb3IgKGxldCBpPTA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYgKGxpbmVzW2ldID09PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICBjb25zdCBkID0gZ2V0UG9pbnREaXN0YW5jZShsaW5lLnN0YXJ0LCBsaW5lc1tpXSk7XHJcbiAgICAgICAgaWYgKG1pbl9kID4gZCkge1xyXG4gICAgICAgICAgICBtaW5fZCA9IGQ7XHJcbiAgICAgICAgICAgIG1pbl9pID0gbGluZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtpbnRlcnNlY3Q6IG1pbl9pLCBkaXN0YW5jZTogbWluX2R9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBSZWN0KHgsIHksIHcsIGgsIGZpbGwsIGJvcmRlciwgdXVpZCkge1xyXG4gICAgU2hhcGUuY2FsbCh0aGlzKTtcclxuICAgIHRoaXMudHlwZSA9IFwicmVjdFwiO1xyXG4gICAgdGhpcy54ID0geCB8fCAwO1xyXG4gICAgdGhpcy55ID0geSB8fCAwO1xyXG4gICAgdGhpcy53ID0gdyB8fCAxO1xyXG4gICAgdGhpcy5oID0gaCB8fCAxO1xyXG4gICAgdGhpcy5maWxsID0gZmlsbCB8fCAnIzAwMCc7XHJcbiAgICB0aGlzLmJvcmRlciA9IGJvcmRlciB8fCBcInJnYmEoMCwgMCwgMCwgMClcIjtcclxuICAgIHRoaXMudXVpZCA9IHV1aWQgfHwgdXVpZHY0KCk7XHJcbn1cclxuXHJcblJlY3QucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTaGFwZS5wcm90b3R5cGUpO1xyXG5SZWN0LnByb3RvdHlwZS5nZXRCb3VuZGluZ0JveCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBuZXcgQm91bmRpbmdSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbn07XHJcblJlY3QucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICBTaGFwZS5wcm90b3R5cGUuZHJhdy5jYWxsKHRoaXMsIGN0eCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5maWxsO1xyXG4gICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgY29uc3QgbG9jID0gdzJsKHt4OiB0aGlzLngsIHk6IHRoaXMueX0pO1xyXG4gICAgY3R4LmZpbGxSZWN0KGxvYy54LCBsb2MueSwgdGhpcy53ICogeiwgdGhpcy5oICogeik7XHJcbiAgICBpZiAodGhpcy5ib3JkZXIgIT09IFwicmdiYSgwLCAwLCAwLCAwKVwiKSB7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5ib3JkZXI7XHJcbiAgICAgICAgY3R4LnN0cm9rZVJlY3QobG9jLngsIGxvYy55LCB0aGlzLncgKiB6LCB0aGlzLmggKiB6KTtcclxuICAgIH1cclxufTtcclxuUmVjdC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAobXgsIG15LCB3b3JsZCkge1xyXG4gICAgaWYgKHdvcmxkID09PSB1bmRlZmluZWQgfHwgd29ybGQgPT09IHRydWUpe1xyXG4gICAgICAgIG14ID0gbDJ3eChteCk7XHJcbiAgICAgICAgbXkgPSBsMnd5KG15KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnggPD0gbXggJiYgKHRoaXMueCArIHRoaXMudykgPj0gbXggJiZcclxuICAgICAgICB0aGlzLnkgPD0gbXkgJiYgKHRoaXMueSArIHRoaXMuaCkgPj0gbXk7XHJcbn07XHJcblJlY3QucHJvdG90eXBlLmluQ29ybmVyID0gZnVuY3Rpb24gKG14LCBteSwgY29ybmVyKSB7XHJcbiAgICBzd2l0Y2ggKGNvcm5lcikge1xyXG4gICAgICAgIGNhc2UgJ25lJzpcclxuICAgICAgICAgICAgcmV0dXJuIHcybHgodGhpcy54ICsgdGhpcy53IC0gMykgPD0gbXggJiYgbXggPD0gdzJseCh0aGlzLnggKyB0aGlzLncgKyAzKSAmJiB3Mmx5KHRoaXMueSAtIDMpIDw9IG15ICYmIG15IDw9IHcybHkodGhpcy55ICsgMyk7XHJcbiAgICAgICAgY2FzZSAnbncnOlxyXG4gICAgICAgICAgICByZXR1cm4gdzJseCh0aGlzLnggLSAzKSA8PSBteCAmJiBteCA8PSB3Mmx4KHRoaXMueCArIDMpICYmIHcybHkodGhpcy55IC0gMykgPD0gbXkgJiYgbXkgPD0gdzJseSh0aGlzLnkgKyAzKTtcclxuICAgICAgICBjYXNlICdzdyc6XHJcbiAgICAgICAgICAgIHJldHVybiB3Mmx4KHRoaXMueCAtIDMpIDw9IG14ICYmIG14IDw9IHcybHgodGhpcy54ICsgMykgJiYgdzJseSh0aGlzLnkgKyB0aGlzLmggLSAzKSA8PSBteSAmJiBteSA8PSB3Mmx5KHRoaXMueSArIHRoaXMuaCArIDMpO1xyXG4gICAgICAgIGNhc2UgJ3NlJzpcclxuICAgICAgICAgICAgcmV0dXJuIHcybHgodGhpcy54ICsgdGhpcy53IC0gMykgPD0gbXggJiYgbXggPD0gdzJseCh0aGlzLnggKyB0aGlzLncgKyAzKSAmJiB3Mmx5KHRoaXMueSArIHRoaXMuaCAtIDMpIDw9IG15ICYmIG15IDw9IHcybHkodGhpcy55ICsgdGhpcy5oICsgMyk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5SZWN0LnByb3RvdHlwZS5nZXRDb3JuZXIgPSBmdW5jdGlvbiAobXgsIG15KSB7XHJcbiAgICBpZiAodGhpcy5pbkNvcm5lcihteCwgbXksIFwibmVcIikpXHJcbiAgICAgICAgcmV0dXJuIFwibmVcIjtcclxuICAgIGVsc2UgaWYgKHRoaXMuaW5Db3JuZXIobXgsIG15LCBcIm53XCIpKVxyXG4gICAgICAgIHJldHVybiBcIm53XCI7XHJcbiAgICBlbHNlIGlmICh0aGlzLmluQ29ybmVyKG14LCBteSwgXCJzZVwiKSlcclxuICAgICAgICByZXR1cm4gXCJzZVwiO1xyXG4gICAgZWxzZSBpZiAodGhpcy5pbkNvcm5lcihteCwgbXksIFwic3dcIikpXHJcbiAgICAgICAgcmV0dXJuIFwic3dcIjtcclxufTtcclxuUmVjdC5wcm90b3R5cGUuY2VudGVyID0gZnVuY3Rpb24gKGNlbnRlclBvaW50KSB7XHJcbiAgICBpZiAoY2VudGVyUG9pbnQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICByZXR1cm4ge3g6IHRoaXMueCArIHRoaXMudyAvIDIsIHk6IHRoaXMueSArIHRoaXMuaCAvIDJ9O1xyXG4gICAgdGhpcy54ID0gY2VudGVyUG9pbnQueCAtIHRoaXMudyAvIDI7XHJcbiAgICB0aGlzLnkgPSBjZW50ZXJQb2ludC55IC0gdGhpcy5oIC8gMjtcclxufTtcclxuXHJcbmZ1bmN0aW9uIENpcmNsZSh4LCB5LCByLCBmaWxsLCBib3JkZXIsIHV1aWQpIHtcclxuICAgIFNoYXBlLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnR5cGUgPSBcImNpcmNsZVwiO1xyXG4gICAgdGhpcy54ID0geCB8fCAwO1xyXG4gICAgdGhpcy55ID0geSB8fCAwO1xyXG4gICAgdGhpcy5yID0gciB8fCAxO1xyXG4gICAgdGhpcy5maWxsID0gZmlsbCB8fCAnIzAwMCc7XHJcbiAgICB0aGlzLmJvcmRlciA9IGJvcmRlciB8fCBcInJnYmEoMCwgMCwgMCwgMClcIjtcclxuICAgIHRoaXMudXVpZCA9IHV1aWQgfHwgdXVpZHY0KCk7XHJcbn1cclxuXHJcbkNpcmNsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNoYXBlLnByb3RvdHlwZSk7XHJcbkNpcmNsZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gbmV3IEJvdW5kaW5nUmVjdCh0aGlzLnggLSB0aGlzLnIsIHRoaXMueSAtIHRoaXMuciwgdGhpcy5yICogMiwgdGhpcy5yICogMik7XHJcbn07XHJcbkNpcmNsZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChjdHgpIHtcclxuICAgIFNoYXBlLnByb3RvdHlwZS5kcmF3LmNhbGwodGhpcywgY3R4KTtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmZpbGw7XHJcbiAgICBjb25zdCBsb2MgPSB3Mmwoe3g6IHRoaXMueCwgeTogdGhpcy55fSk7XHJcbiAgICBjdHguYXJjKGxvYy54LCBsb2MueSwgdGhpcy5yLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgaWYgKHRoaXMuYm9yZGVyICE9PSBcInJnYmEoMCwgMCwgMCwgMClcIikge1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmJvcmRlcjtcclxuICAgICAgICBjdHguYXJjKGxvYy54LCBsb2MueSwgdGhpcy5yLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG59O1xyXG5DaXJjbGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKG14LCBteSkge1xyXG4gICAgcmV0dXJuIChteCAtIHcybHgodGhpcy54KSkgKiogMiArIChteSAtIHcybHkodGhpcy55KSkgKiogMiA8IHRoaXMuciAqKiAyO1xyXG59O1xyXG5DaXJjbGUucHJvdG90eXBlLmluQ29ybmVyID0gZnVuY3Rpb24gKG14LCBteSwgY29ybmVyKSB7XHJcbiAgICBzd2l0Y2ggKGNvcm5lcikge1xyXG4gICAgICAgIGNhc2UgJ25lJzpcclxuICAgICAgICAgICAgcmV0dXJuIHcybHgodGhpcy54ICsgdGhpcy53IC0gMykgPD0gbXggJiYgbXggPD0gdzJseCh0aGlzLnggKyB0aGlzLncgKyAzKSAmJiB3Mmx5KHRoaXMueSAtIDMpIDw9IG15ICYmIG15IDw9IHcybHkodGhpcy55ICsgMyk7XHJcbiAgICAgICAgY2FzZSAnbncnOlxyXG4gICAgICAgICAgICByZXR1cm4gdzJseCh0aGlzLnggLSAzKSA8PSBteCAmJiBteCA8PSB3Mmx4KHRoaXMueCArIDMpICYmIHcybHkodGhpcy55IC0gMykgPD0gbXkgJiYgbXkgPD0gdzJseSh0aGlzLnkgKyAzKTtcclxuICAgICAgICBjYXNlICdzdyc6XHJcbiAgICAgICAgICAgIHJldHVybiB3Mmx4KHRoaXMueCAtIDMpIDw9IG14ICYmIG14IDw9IHcybHgodGhpcy54ICsgMykgJiYgdzJseSh0aGlzLnkgKyB0aGlzLmggLSAzKSA8PSBteSAmJiBteSA8PSB3Mmx5KHRoaXMueSArIHRoaXMuaCArIDMpO1xyXG4gICAgICAgIGNhc2UgJ3NlJzpcclxuICAgICAgICAgICAgcmV0dXJuIHcybHgodGhpcy54ICsgdGhpcy53IC0gMykgPD0gbXggJiYgbXggPD0gdzJseCh0aGlzLnggKyB0aGlzLncgKyAzKSAmJiB3Mmx5KHRoaXMueSArIHRoaXMuaCAtIDMpIDw9IG15ICYmIG15IDw9IHcybHkodGhpcy55ICsgdGhpcy5oICsgMyk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5DaXJjbGUucHJvdG90eXBlLmdldENvcm5lciA9IGZ1bmN0aW9uIChteCwgbXkpIHtcclxuICAgIGlmICh0aGlzLmluQ29ybmVyKG14LCBteSwgXCJuZVwiKSlcclxuICAgICAgICByZXR1cm4gXCJuZVwiO1xyXG4gICAgZWxzZSBpZiAodGhpcy5pbkNvcm5lcihteCwgbXksIFwibndcIikpXHJcbiAgICAgICAgcmV0dXJuIFwibndcIjtcclxuICAgIGVsc2UgaWYgKHRoaXMuaW5Db3JuZXIobXgsIG15LCBcInNlXCIpKVxyXG4gICAgICAgIHJldHVybiBcInNlXCI7XHJcbiAgICBlbHNlIGlmICh0aGlzLmluQ29ybmVyKG14LCBteSwgXCJzd1wiKSlcclxuICAgICAgICByZXR1cm4gXCJzd1wiO1xyXG59O1xyXG5DaXJjbGUucHJvdG90eXBlLmNlbnRlciA9IGZ1bmN0aW9uIChjZW50ZXJQb2ludCkge1xyXG4gICAgaWYgKGNlbnRlclBvaW50ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgcmV0dXJuIHt4OiB0aGlzLngsIHk6IHRoaXMueX07XHJcbiAgICB0aGlzLnggPSBjZW50ZXJQb2ludC54O1xyXG4gICAgdGhpcy55ID0gY2VudGVyUG9pbnQueTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIExpbmUoeDEsIHkxLCB4MiwgeTIsIHV1aWQpIHtcclxuICAgIFNoYXBlLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnR5cGUgPSBcImxpbmVcIjtcclxuICAgIHRoaXMueDEgPSB4MTtcclxuICAgIHRoaXMueTEgPSB5MTtcclxuICAgIHRoaXMueDIgPSB4MjtcclxuICAgIHRoaXMueTIgPSB5MjtcclxuICAgIHRoaXMudXVpZCA9IHV1aWQgfHwgdXVpZHY0KCk7XHJcbn1cclxuXHJcbkxpbmUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTaGFwZS5wcm90b3R5cGUpO1xyXG5MaW5lLnByb3RvdHlwZS5nZXRCb3VuZGluZ0JveCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBuZXcgQm91bmRpbmdSZWN0KFxyXG4gICAgICAgIE1hdGgubWluKHRoaXMueDEsIHRoaXMueDIpLFxyXG4gICAgICAgIE1hdGgubWluKHRoaXMueTEsIHRoaXMueTIpLFxyXG4gICAgICAgIE1hdGguYWJzKHRoaXMueDEgLSB0aGlzLngyKSxcclxuICAgICAgICBNYXRoLmFicyh0aGlzLnkxIC0gdGhpcy55MilcclxuICAgICk7XHJcbn07XHJcbkxpbmUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoY3R4KSB7XHJcbiAgICBTaGFwZS5wcm90b3R5cGUuZHJhdy5jYWxsKHRoaXMsIGN0eCk7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubW92ZVRvKHcybHgodGhpcy54MSksIHcybHkodGhpcy55MSkpO1xyXG4gICAgY3R4LmxpbmVUbyh3Mmx4KHRoaXMueDIpLCB3Mmx5KHRoaXMueTIpKTtcclxuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwwLDAsIDAuNSknO1xyXG4gICAgY3R4LmxpbmVXaWR0aCA9IDM7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBUZXh0KHgsIHksIHRleHQsIGZvbnQsIGFuZ2xlLCB1dWlkKSB7XHJcbiAgICBTaGFwZS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLmZvbnQgPSBmb250O1xyXG4gICAgdGhpcy5hbmdsZSA9IGFuZ2xlIHx8IDA7XHJcbiAgICB0aGlzLnV1aWQgPSB1dWlkIHx8IHV1aWR2NCgpO1xyXG59XHJcblxyXG5UZXh0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU2hhcGUucHJvdG90eXBlKTtcclxuVGV4dC5wcm90b3R5cGUuZ2V0Qm91bmRpbmdCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gbmV3IEJvdW5kaW5nUmVjdCh0aGlzLngsIHRoaXMueSwgNSwgNSk7IC8vIFRvZG86IGZpeCB0aGlzIGJvdW5kaW5nIGJveFxyXG59O1xyXG5UZXh0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgU2hhcGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzLCBjdHgpO1xyXG4gICAgY3R4LmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LnRyYW5zbGF0ZSh3Mmx4KHRoaXMueCksIHcybHkodGhpcy55KSk7XHJcbiAgICBjdHgucm90YXRlKHRoaXMuYW5nbGUpO1xyXG4gICAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICBjdHguZmlsbFRleHQodGhpcy50ZXh0LCAwLCAtNSk7XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gQXNzZXQoaW1nLCB4LCB5LCB3LCBoLCB1dWlkKSB7XHJcbiAgICBTaGFwZS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy50eXBlID0gXCJhc3NldFwiO1xyXG4gICAgdGhpcy51dWlkID0gdXVpZCB8fCB1dWlkdjQoKTtcclxuICAgIHRoaXMuaW1nID0gaW1nO1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLncgPSB3O1xyXG4gICAgdGhpcy5oID0gaDtcclxufVxyXG5cclxuQXNzZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZWN0LnByb3RvdHlwZSk7XHJcbkFzc2V0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKGN0eCkge1xyXG4gICAgU2hhcGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzLCBjdHgpO1xyXG4gICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltZywgdzJseCh0aGlzLngpLCB3Mmx5KHRoaXMueSksIHRoaXMudyAqIHosIHRoaXMuaCAqIHopO1xyXG59O1xyXG5cclxuLy8gKioqKiBzcGVjaWZpYyBMYXllciBTdGF0ZSBNYW5hZ2VtZW50XHJcblxyXG5mdW5jdGlvbiBMYXllclN0YXRlKGNhbnZhcywgbmFtZSkge1xyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcclxuICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpIHtcclxuICAgICAgICB0aGlzLnN0eWxlUGFkZGluZ0xlZnQgPSBwYXJzZUludChkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGNhbnZhcywgbnVsbClbJ3BhZGRpbmdMZWZ0J10sIDEwKSB8fCAwO1xyXG4gICAgICAgIHRoaXMuc3R5bGVQYWRkaW5nVG9wID0gcGFyc2VJbnQoZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMsIG51bGwpWydwYWRkaW5nVG9wJ10sIDEwKSB8fCAwO1xyXG4gICAgICAgIHRoaXMuc3R5bGVCb3JkZXJMZWZ0ID0gcGFyc2VJbnQoZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMsIG51bGwpWydib3JkZXJMZWZ0V2lkdGgnXSwgMTApIHx8IDA7XHJcbiAgICAgICAgdGhpcy5zdHlsZUJvcmRlclRvcCA9IHBhcnNlSW50KGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoY2FudmFzLCBudWxsKVsnYm9yZGVyVG9wV2lkdGgnXSwgMTApIHx8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZTtcclxuICAgIHRoaXMuaHRtbFRvcCA9IGh0bWwub2Zmc2V0VG9wO1xyXG4gICAgdGhpcy5odG1sTGVmdCA9IGh0bWwub2Zmc2V0TGVmdDtcclxuXHJcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXM7XHJcblxyXG4gICAgLy8gV2hlbiBzZXQgdG8gZmFsc2UsIHRoZSBsYXllciB3aWxsIGJlIHJlZHJhd24gb24gdGhlIG5leHQgdGlja1xyXG4gICAgdGhpcy52YWxpZCA9IGZhbHNlO1xyXG4gICAgLy8gVGhlIGNvbGxlY3Rpb24gb2Ygc2hhcGVzIHRoYXQgdGhpcyBsYXllciBjb250YWlucy5cclxuICAgIC8vIFRoZXNlIGFyZSBvcmRlcmVkIG9uIGEgZGVwdGggYmFzaXMuXHJcbiAgICB0aGlzLnNoYXBlcyA9IG5ldyBPcmRlcmVkTWFwKCk7XHJcblxyXG4gICAgLy8gU3RhdGUgdmFyaWFibGVzXHJcbiAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlc2l6aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnBhbm5pbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuc2VsZWN0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgLy8gVGhpcyBpcyBhIGhlbHBlciB0byBpZGVudGlmeSB3aGljaCBjb3JuZXIgb3IgbW9yZSBzcGVjaWZpY2FsbHkgd2hpY2ggcmVzaXplIGRpcmVjdGlvbiBpcyBiZWluZyB1c2VkLlxyXG4gICAgdGhpcy5yZXNpemVkaXIgPSAnJztcclxuXHJcbiAgICAvLyBUaGlzIGlzIGEgcmVmZXJlbmNlIHRvIGFuIG9wdGlvbmFsIHJlY3Rhbmd1bGFyIG9iamVjdCB0aGF0IGlzIHVzZWQgdG8gc2VsZWN0IG11bHRpcGxlIHRva2Vuc1xyXG4gICAgdGhpcy5zZWxlY3Rpb25IZWxwZXIgPSBudWxsO1xyXG4gICAgdGhpcy5zZWxlY3Rpb25TdGFydFBvaW50ID0gbnVsbDtcclxuXHJcbiAgICAvLyBDb2xsZWN0aW9uIG9mIHNoYXBlcyB0aGF0IGFyZSBjdXJyZW50bHkgc2VsZWN0ZWRcclxuICAgIHRoaXMuc2VsZWN0aW9uID0gW107XHJcblxyXG4gICAgLy8gQmVjYXVzZSB3ZSBuZXZlciBkcmFnIGZyb20gdGhlIGFzc2V0J3MgKDAsIDApIGNvb3JkIGFuZCB3YW50IGEgc21vb3RoZXIgZHJhZyBleHBlcmllbmNlXHJcbiAgICAvLyB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBhY3R1YWwgb2Zmc2V0IHdpdGhpbiB0aGUgYXNzZXQuXHJcbiAgICB0aGlzLmRyYWdvZmZ4ID0gMDtcclxuICAgIHRoaXMuZHJhZ29mZnkgPSAwO1xyXG5cclxuICAgIC8vIEV4dHJhIHNlbGVjdGlvbiBoaWdobGlnaHRpbmcgc2V0dGluZ3NcclxuICAgIHRoaXMuc2VsZWN0aW9uQ29sb3IgPSAnI0NDMDAwMCc7XHJcbiAgICB0aGlzLnNlbGVjdGlvbldpZHRoID0gMjtcclxufVxyXG5cclxuTGF5ZXJTdGF0ZS5wcm90b3R5cGUuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uIChza2lwTGlnaHRVcGRhdGUpIHtcclxuICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgIHNraXBMaWdodFVwZGF0ZSA9IHNraXBMaWdodFVwZGF0ZSB8fCBmYWxzZTtcclxuICAgIGlmKCFza2lwTGlnaHRVcGRhdGUgJiYgdGhpcy5uYW1lICE9PSBcImZvd1wiKSB7XHJcbiAgICAgICAgY29uc3QgZm93ID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKFwiZm93XCIpO1xyXG4gICAgICAgIGlmIChmb3cgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgZm93LmludmFsaWRhdGUodHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyU3RhdGUucHJvdG90eXBlLmFkZFNoYXBlID0gZnVuY3Rpb24gKHNoYXBlLCBzeW5jLCB0ZW1wb3JhcnkpIHtcclxuICAgIGlmIChzeW5jID09PSB1bmRlZmluZWQpIHN5bmMgPSBmYWxzZTtcclxuICAgIGlmICh0ZW1wb3JhcnkgPT09IHVuZGVmaW5lZCkgdGVtcG9yYXJ5ID0gZmFsc2U7XHJcbiAgICBzaGFwZS5sYXllciA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpO1xyXG4gICAgc2hhcGUuY2hlY2tMaWdodFNvdXJjZXMoKTtcclxuICAgIHNoYXBlLnNldE1vdmVtZW50QmxvY2soc2hhcGUubW92ZW1lbnRPYnN0cnVjdGlvbik7XHJcbiAgICBpZiAoc3luYykgc29ja2V0LmVtaXQoXCJhZGQgc2hhcGVcIiwge3NoYXBlOiBzaGFwZS5hc0RpY3QoKSwgdGVtcG9yYXJ5OiB0ZW1wb3Jhcnl9KTtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLnNldChzaGFwZS51dWlkLCBzaGFwZSk7XHJcbiAgICB0aGlzLmludmFsaWRhdGUoIXN5bmMpO1xyXG59O1xyXG5MYXllclN0YXRlLnByb3RvdHlwZS5zZXRTaGFwZXMgPSBmdW5jdGlvbiAoc2hhcGVzKSB7XHJcbiAgICBjb25zdCB0ID0gW107XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHNoYXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaGFwZSkge1xyXG4gICAgICAgIGNvbnN0IHNoID0gY3JlYXRlU2hhcGVGcm9tRGljdChzaGFwZSwgc2VsZik7XHJcbiAgICAgICAgc2gubGF5ZXIgPSBzZWxmLm5hbWU7XHJcbiAgICAgICAgc2guY2hlY2tMaWdodFNvdXJjZXMoKTtcclxuICAgICAgICBzaC5zZXRNb3ZlbWVudEJsb2NrKHNoYXBlLm1vdmVtZW50T2JzdHJ1Y3Rpb24pO1xyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLnNldChzaGFwZS51dWlkLCBzaCk7XHJcbiAgICAgICAgdC5wdXNoKHNoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsgLy8gVE9ETzogRml4IGtlZXBpbmcgc2VsZWN0aW9uIG9uIHRob3NlIGl0ZW1zIHRoYXQgYXJlIG5vdCBtb3ZlZC5cclxuICAgIHRoaXMuc2hhcGVzLmRhdGEgPSB0O1xyXG4gICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbn07XHJcbkxheWVyU3RhdGUucHJvdG90eXBlLnJlbW92ZVNoYXBlID0gZnVuY3Rpb24gKHNoYXBlLCBzeW5jLCB0ZW1wb3JhcnkpIHtcclxuICAgIGlmIChzeW5jID09PSB1bmRlZmluZWQpIHN5bmMgPSBmYWxzZTtcclxuICAgIGlmICh0ZW1wb3JhcnkgPT09IHVuZGVmaW5lZCkgdGVtcG9yYXJ5ID0gZmFsc2U7XHJcbiAgICBzaGFwZS5vblJlbW92ZSgpO1xyXG4gICAgdGhpcy5zaGFwZXMucmVtb3ZlKHNoYXBlKTtcclxuICAgIGlmIChzeW5jKSBzb2NrZXQuZW1pdChcInJlbW92ZSBzaGFwZVwiLCB7c2hhcGU6IHNoYXBlLCB0ZW1wb3Jhcnk6IHRlbXBvcmFyeX0pO1xyXG4gICAgY29uc3QgbHNfaSA9IGdhbWVNYW5hZ2VyLmxpZ2h0c291cmNlcy5maW5kSW5kZXgobHMgPT4gbHMuc2hhcGUgPT09IHNoYXBlLnV1aWQpO1xyXG4gICAgY29uc3QgbGJfaSA9IGdhbWVNYW5hZ2VyLmxpZ2h0YmxvY2tlcnMuZmluZEluZGV4KGxzID0+IGxzID09PSBzaGFwZS51dWlkKTtcclxuICAgIGNvbnN0IG1iX2kgPSBnYW1lTWFuYWdlci5tb3ZlbWVudGJsb2NrZXJzLmZpbmRJbmRleChscyA9PiBscyA9PT0gc2hhcGUudXVpZCk7XHJcbiAgICBpZiAobHNfaSA+PSAwKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxpZ2h0c291cmNlcy5zcGxpY2UobHNfaSwgMSk7XHJcbiAgICBpZiAobGJfaSA+PSAwKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxpZ2h0YmxvY2tlcnMuc3BsaWNlKGxiX2ksIDEpO1xyXG4gICAgaWYgKG1iX2kgPj0gMClcclxuICAgICAgICBnYW1lTWFuYWdlci5tb3ZlbWVudGJsb2NrZXJzLnNwbGljZShtYl9pLCAxKTtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLmRlbGV0ZShzaGFwZS51dWlkKTtcclxuICAgIGlmICh0aGlzLnNlbGVjdGlvbiA9PT0gc2hhcGUpIHRoaXMuc2VsZWN0aW9uID0gbnVsbDtcclxuICAgIHRoaXMuaW52YWxpZGF0ZSghc3luYyk7XHJcbn07XHJcbkxheWVyU3RhdGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxufTtcclxuTGF5ZXJTdGF0ZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChkb0NsZWFyKSB7XHJcbiAgICBpZiAoYm9hcmRfaW5pdGlhbGlzZWQgJiYgIXRoaXMudmFsaWQpIHtcclxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcclxuICAgICAgICBkb0NsZWFyID0gZG9DbGVhciA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGRvQ2xlYXI7XHJcblxyXG4gICAgICAgIGlmIChkb0NsZWFyKVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5zaGFwZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzaGFwZSkge1xyXG4gICAgICAgICAgICBpZiAodzJseChzaGFwZS54KSA+IHN0YXRlLndpZHRoIHx8IHcybHkoc2hhcGUueSkgPiBzdGF0ZS5oZWlnaHQgfHxcclxuICAgICAgICAgICAgICAgIHcybHgoc2hhcGUueCArIHNoYXBlLncpIDwgMCB8fCB3Mmx5KHNoYXBlLnkgKyBzaGFwZS5oKSA8IDApIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHN0YXRlLm5hbWUgPT09ICdmb3cnICYmIHNoYXBlLnZpc2lvbk9ic3RydWN0aW9uICYmIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpLm5hbWUgIT09IHN0YXRlLm5hbWUpIHJldHVybjtcclxuICAgICAgICAgICAgc2hhcGUuZHJhdyhjdHgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5zZWxlY3Rpb25Db2xvcjtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5zZWxlY3Rpb25Db2xvcjtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaXMuc2VsZWN0aW9uV2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHogPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuem9vbUZhY3RvcjtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoc2VsKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh3Mmx4KHNlbC54KSwgdzJseShzZWwueSksIHNlbC53ICogeiwgc2VsLmggKiB6KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0b3ByaWdodFxyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHcybHgoc2VsLnggKyBzZWwudyAtIDMpLCB3Mmx5KHNlbC55IC0gMyksIDYgKiB6LCA2ICogeik7XHJcbiAgICAgICAgICAgICAgICAvLyB0b3BsZWZ0XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QodzJseChzZWwueCAtIDMpLCB3Mmx5KHNlbC55IC0gMyksIDYgKiB6LCA2ICogeik7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RyaWdodFxyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHcybHgoc2VsLnggKyBzZWwudyAtIDMpLCB3Mmx5KHNlbC55ICsgc2VsLmggLSAzKSwgNiAqIHosIDYgKiB6KTtcclxuICAgICAgICAgICAgICAgIC8vIGJvdGxlZnRcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh3Mmx4KHNlbC54IC0gMyksIHcybHkoc2VsLnkgKyBzZWwuaCAtIDMpLCA2ICogeiwgNiAqIHopXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52YWxpZCA9IHRydWU7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyU3RhdGUucHJvdG90eXBlLmdldE1vdXNlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGxldCBlbGVtZW50ID0gdGhpcy5jYW52YXMsIG9mZnNldFggPSAwLCBvZmZzZXRZID0gMCwgbXgsIG15O1xyXG5cclxuICAgIC8vIENvbXB1dGUgdGhlIHRvdGFsIG9mZnNldFxyXG4gICAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIG9mZnNldFggKz0gZWxlbWVudC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICBvZmZzZXRZICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgIH0gd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgcGFkZGluZyBhbmQgYm9yZGVyIHN0eWxlIHdpZHRocyB0byBvZmZzZXRcclxuICAgIC8vIEFsc28gYWRkIHRoZSA8aHRtbD4gb2Zmc2V0cyBpbiBjYXNlIHRoZXJlJ3MgYSBwb3NpdGlvbjpmaXhlZCBiYXJcclxuICAgIG9mZnNldFggKz0gdGhpcy5zdHlsZVBhZGRpbmdMZWZ0ICsgdGhpcy5zdHlsZUJvcmRlckxlZnQgKyB0aGlzLmh0bWxMZWZ0O1xyXG4gICAgb2Zmc2V0WSArPSB0aGlzLnN0eWxlUGFkZGluZ1RvcCArIHRoaXMuc3R5bGVCb3JkZXJUb3AgKyB0aGlzLmh0bWxUb3A7XHJcblxyXG4gICAgbXggPSBlLnBhZ2VYIC0gb2Zmc2V0WDtcclxuICAgIG15ID0gZS5wYWdlWSAtIG9mZnNldFk7XHJcblxyXG4gICAgcmV0dXJuIHt4OiBteCwgeTogbXl9O1xyXG59O1xyXG5MYXllclN0YXRlLnByb3RvdHlwZS5tb3ZlU2hhcGVPcmRlciA9IGZ1bmN0aW9uIChzaGFwZSwgZGVzdGluYXRpb25JbmRleCwgc3luYykge1xyXG4gICAgaWYgKHRoaXMuc2hhcGVzLm1vdmVUbyhzaGFwZSwgZGVzdGluYXRpb25JbmRleCkpIHtcclxuICAgICAgICBpZiAoc3luYykgc29ja2V0LmVtaXQoXCJtb3ZlU2hhcGVPcmRlclwiLCB7c2hhcGU6IHNoYXBlLmFzRGljdCgpLCBpbmRleDogZGVzdGluYXRpb25JbmRleH0pO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSh0cnVlKTtcclxuICAgIH1cclxufTtcclxuTGF5ZXJTdGF0ZS5wcm90b3R5cGUub25TaGFwZU1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmludmFsaWRhdGUoKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEdyaWRMYXllclN0YXRlKGNhbnZhcywgbmFtZSkge1xyXG4gICAgTGF5ZXJTdGF0ZS5jYWxsKHRoaXMsIGNhbnZhcywgbmFtZSk7XHJcbn1cclxuXHJcbkdyaWRMYXllclN0YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTGF5ZXJTdGF0ZS5wcm90b3R5cGUpO1xyXG5HcmlkTGF5ZXJTdGF0ZS5wcm90b3R5cGUuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5kcmF3R3JpZCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gRk9XTGF5ZXJTdGF0ZShjYW52YXMsIG5hbWUpIHtcclxuICAgIExheWVyU3RhdGUuY2FsbCh0aGlzLCBjYW52YXMsIG5hbWUpO1xyXG59XHJcblxyXG5GT1dMYXllclN0YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTGF5ZXJTdGF0ZS5wcm90b3R5cGUpO1xyXG5GT1dMYXllclN0YXRlLnByb3RvdHlwZS5hZGRTaGFwZSA9IGZ1bmN0aW9uIChzaGFwZSwgc3luYywgdGVtcG9yYXJ5KSB7XHJcbiAgICBzaGFwZS5maWxsID0gZm93Q29sb3VyLnNwZWN0cnVtKFwiZ2V0XCIpLnRvUmdiU3RyaW5nKCk7XHJcbiAgICBMYXllclN0YXRlLnByb3RvdHlwZS5hZGRTaGFwZS5jYWxsKHRoaXMsIHNoYXBlLCBzeW5jLCB0ZW1wb3JhcnkpO1xyXG59O1xyXG5GT1dMYXllclN0YXRlLnByb3RvdHlwZS5zZXRTaGFwZXMgPSBmdW5jdGlvbiAoc2hhcGVzKSB7XHJcbiAgICBjb25zdCBjID0gZm93Q29sb3VyLnNwZWN0cnVtKFwiZ2V0XCIpLnRvUmdiU3RyaW5nKCk7XHJcbiAgICBzaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcclxuICAgICAgICBzaGFwZS5maWxsID0gYztcclxuICAgIH0pO1xyXG4gICAgTGF5ZXJTdGF0ZS5wcm90b3R5cGUuc2V0U2hhcGVzLmNhbGwodGhpcywgc2hhcGVzKTtcclxufTtcclxuRk9XTGF5ZXJTdGF0ZS5wcm90b3R5cGUub25TaGFwZU1vdmUgPSBmdW5jdGlvbiAoc2hhcGUpIHtcclxuICAgIHNoYXBlLmZpbGwgPSBmb3dDb2xvdXIuc3BlY3RydW0oXCJnZXRcIikudG9SZ2JTdHJpbmcoKTtcclxuICAgIExheWVyU3RhdGUucHJvdG90eXBlLm9uU2hhcGVNb3ZlLmNhbGwodGhpcywgc2hhcGUpO1xyXG59O1xyXG5GT1dMYXllclN0YXRlLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGJvYXJkX2luaXRpYWxpc2VkICYmICF0aGlzLnZhbGlkKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICAgICAgY29uc3Qgb3JpZ19vcCA9IGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb247XHJcbiAgICAgICAgaWYgKGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5mdWxsRk9XKXtcclxuICAgICAgICAgICAgY29uc3Qgb2dhbHBoYSA9IHRoaXMuY3R4Lmdsb2JhbEFscGhhO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImNvcHlcIjtcclxuICAgICAgICAgICAgaWYgKGdhbWVNYW5hZ2VyLklTX0RNKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZm93T3BhY2l0eTtcclxuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gZm93Q29sb3VyLnNwZWN0cnVtKFwiZ2V0XCIpLnRvUmdiU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IG9nYWxwaGE7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IG9yaWdfb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2FtZU1hbmFnZXIuSVNfRE0pXHJcbiAgICAgICAgICAgIExheWVyU3RhdGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzLCAhZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmZ1bGxGT1cpO1xyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoXCJ0b2tlbnNcIikuc2hhcGVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoc2gpIHtcclxuICAgICAgICAgICAgaWYgKCFzaC5vd25lZEJ5KCkpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgYmIgPSBzaC5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICBjb25zdCBsY2VudGVyID0gdzJsKHNoLmNlbnRlcigpKTtcclxuICAgICAgICAgICAgY29uc3QgYWxtID0gMC44ICogdzJseihiYi53KTtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHguYXJjKGxjZW50ZXIueCwgbGNlbnRlci55LCBhbG0sIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGxjZW50ZXIueCwgbGNlbnRlci55LCBhbG0vMiwgbGNlbnRlci54LCBsY2VudGVyLnksIGFsbSk7XHJcbiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLCAwLCAwLCAxKScpO1xyXG4gICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMCwgMCwgMCwgMCknKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xyXG4gICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcclxuICAgICAgICBnYW1lTWFuYWdlci5saWdodHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAobHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2ggPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuVVVJRE1hcC5nZXQobHMuc2hhcGUpO1xyXG4gICAgICAgICAgICBjb25zdCBhdXJhID0gc2guYXVyYXMuZmluZChhID0+IGEudXVpZCA9PT0gbHMuYXVyYSk7XHJcbiAgICAgICAgICAgIGlmIChhdXJhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT2xkIGxpZ2h0c291cmNlIHN0aWxsIGxpbmdlcmluZyBpbiB0aGUgZ2FtZU1hbmFnZXIgbGlzdFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhdXJhX2xlbmd0aCA9IGdldFVuaXREaXN0YW5jZShhdXJhLnZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gc2guY2VudGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxjZW50ZXIgPSB3MmwoY2VudGVyKTtcclxuICAgICAgICAgICAgY29uc3QgYmJveCA9IG5ldyBDaXJjbGUoY2VudGVyLngsIGNlbnRlci55LCBhdXJhX2xlbmd0aCkuZ2V0Qm91bmRpbmdCb3goKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGZpcnN0IGNvbGxlY3QgYWxsIGxpZ2h0YmxvY2tlcnMgdGhhdCBhcmUgaW5zaWRlL2Nyb3NzIG91ciBhdXJhXHJcbiAgICAgICAgICAgIC8vIFRoaXMgdG8gcHJldmVudCBhcyBtYW55IHJheSBjYWxjdWxhdGlvbnMgYXMgcG9zc2libGVcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxfbGlnaHRibG9ja2VycyA9IFtdO1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlci5saWdodGJsb2NrZXJzLmZvckVhY2goZnVuY3Rpb24gKGxiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGIgPT09IHNoLnV1aWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxiX3NoID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLlVVSURNYXAuZ2V0KGxiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxiX2JiID0gbGJfc2guZ2V0Qm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYl9iYi5pbnRlcnNlY3RzV2l0aChiYm94KSlcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbF9saWdodGJsb2NrZXJzLnB1c2gobGJfYmIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhcmNfc3RhcnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FzdCByYXlzIGluIGV2ZXJ5IGRlZ3JlZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBhbmdsZSA9IDA7IGFuZ2xlIDwgMiAqIE1hdGguUEk7IGFuZ2xlICs9ICgxLzE4MCkgKiBNYXRoLlBJKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBoaXQgd2l0aCBvYnN0cnVjdGlvblxyXG4gICAgICAgICAgICAgICAgbGV0IGhpdCA9IHtpbnRlcnNlY3Q6IG51bGwsIGRpc3RhbmNlOiBJbmZpbml0eX07XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hhcGVfaGl0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGxvY2FsX2xpZ2h0YmxvY2tlcnMuZm9yRWFjaChmdW5jdGlvbiAobGJfYmIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBsYl9iYi5nZXRJbnRlcnNlY3RXaXRoTGluZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBjZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogY2VudGVyLnggKyBhdXJhX2xlbmd0aCAqIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGNlbnRlci55ICsgYXVyYV9sZW5ndGggKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW50ZXJzZWN0ICE9PSBudWxsICYmIHJlc3VsdC5kaXN0YW5jZSA8IGhpdC5kaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXQgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlX2hpdCA9IGxiX2JiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBubyBoaXQsIGNoZWNrIGlmIHdlIGNvbWUgZnJvbSBhIHByZXZpb3VzIGhpdCBzbyB0aGF0IHdlIGNhbiBnbyBiYWNrIHRvIHRoZSBhcmNcclxuICAgICAgICAgICAgICAgIGlmIChoaXQuaW50ZXJzZWN0ID09PSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJjX3N0YXJ0ID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyY19zdGFydCA9IGFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdzJseChjZW50ZXIueCArIGF1cmFfbGVuZ3RoICogTWF0aC5jb3MoYW5nbGUpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcybHkoY2VudGVyLnkgKyBhdXJhX2xlbmd0aCAqIE1hdGguc2luKGFuZ2xlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBoaXQgLCBmaXJzdCBmaW5pc2ggYW55IG9uZ29pbmcgYXJjLCB0aGVuIG1vdmUgdG8gdGhlIGludGVyc2VjdGlvbiBwb2ludFxyXG4gICAgICAgICAgICAgICAgaWYgKGFyY19zdGFydCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHguYXJjKGxjZW50ZXIueCwgbGNlbnRlci55LCB3MmxyKGF1cmEudmFsdWUpLCBhcmNfc3RhcnQsIGFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICBhcmNfc3RhcnQgPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBleHRyYVggPSAoc2hhcGVfaGl0LncvNCkgKiBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXh0cmFZID0gKHNoYXBlX2hpdC5oLzQpICogTWF0aC5zaW4oYW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKCFzaGFwZV9oaXQuY29udGFpbnMoaGl0LmludGVyc2VjdC54ICsgZXh0cmFYLCBoaXQuaW50ZXJzZWN0LnkgKyBleHRyYVksIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGV4dHJhWCA9IDA7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZXh0cmFZID0gMDtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8odzJseChoaXQuaW50ZXJzZWN0LnggKyBleHRyYVgpLCB3Mmx5KGhpdC5pbnRlcnNlY3QueSArIGV4dHJhWSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcmNfc3RhcnQgIT09IC0xKVxyXG4gICAgICAgICAgICAgICAgY3R4LmFyYyhsY2VudGVyLngsIGxjZW50ZXIueSwgdzJscihhdXJhLnZhbHVlKSwgYXJjX3N0YXJ0LCAyKk1hdGguUEkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxtID0gdzJscihhdXJhLnZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQobGNlbnRlci54LCBsY2VudGVyLnksIGFsbS8yLCBsY2VudGVyLngsIGxjZW50ZXIueSwgYWxtKTtcclxuICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDAsIDAsIDAsIDEpJyk7XHJcbiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgwLCAwLCAwLCAwKScpO1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XHJcbiAgICAgICAgICAgIC8vIGN0eC5maWxsU3R5bGUgPSBcInJnYmEoMCwgMCwgMCwgMSlcIjtcclxuICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZ2FtZU1hbmFnZXIuSVNfRE0pXHJcbiAgICAgICAgICAgIExheWVyU3RhdGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzLCAhZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmZ1bGxGT1cpO1xyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBvcmlnX29wO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gKioqKiBNYW5hZ2VyIGZvciB3b3JraW5nIHdpdGggbXVsdGlwbGUgbGF5ZXJzXHJcblxyXG5mdW5jdGlvbiBMYXllck1hbmFnZXIoKSB7XHJcbiAgICB0aGlzLmxheWVycyA9IFtdO1xyXG4gICAgdGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICB0aGlzLnNlbGVjdGVkTGF5ZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuVVVJRE1hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICB0aGlzLmdyaWRTaXplID0gNTA7XHJcbiAgICB0aGlzLnVuaXRTaXplID0gNTtcclxuICAgIHRoaXMudXNlR3JpZCA9IHRydWU7XHJcbiAgICB0aGlzLmZ1bGxGT1cgPSBmYWxzZTtcclxuICAgIHRoaXMuZm93T3BhY2l0eSA9IDAuMztcclxuXHJcbiAgICB0aGlzLnpvb21GYWN0b3IgPSAxO1xyXG4gICAgdGhpcy5wYW5YID0gMDtcclxuICAgIHRoaXMucGFuWSA9IDA7XHJcblxyXG4gICAgLy8gUmVmcmVzaCBpbnRlcnZhbCBhbmQgcmVkcmF3IHNldHRlci5cclxuICAgIHRoaXMuaW50ZXJ2YWwgPSAzMDtcclxuICAgIGNvbnN0IGxtID0gdGhpcztcclxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKGxldCBpPWxtLmxheWVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBsbS5sYXllcnNbaV0uZHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIHRoaXMuaW50ZXJ2YWwpO1xyXG59XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBpZiAoXCJ1bml0U2l6ZVwiIGluIG9wdGlvbnMpXHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldFVuaXRTaXplKG9wdGlvbnMudW5pdFNpemUpO1xyXG4gICAgaWYgKFwidXNlR3JpZFwiIGluIG9wdGlvbnMpXHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldFVzZUdyaWQob3B0aW9ucy51c2VHcmlkKTtcclxuICAgIGlmIChcImZ1bGxGT1dcIiBpbiBvcHRpb25zKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5zZXRGdWxsRk9XKG9wdGlvbnMuZnVsbEZPVyk7XHJcbiAgICBpZiAoJ2Zvd09wYWNpdHknIGluIG9wdGlvbnMpXHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldEZPV09wYWNpdHkob3B0aW9ucy5mb3dPcGFjaXR5KTtcclxuICAgIGlmIChcImZvd0NvbG91clwiIGluIG9wdGlvbnMpXHJcbiAgICAgICAgZm93Q29sb3VyLnNwZWN0cnVtKFwic2V0XCIsIG9wdGlvbnMuZm93Q29sb3VyKTtcclxufTtcclxuTGF5ZXJNYW5hZ2VyLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCkge1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmxheWVyc1tpXS5jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIubGF5ZXJzW2ldLndpZHRoID0gd2lkdGg7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5sYXllcnNbaV0uY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmxheWVyc1tpXS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgIHRoaXMubGF5ZXJzLnB1c2gobGF5ZXIpO1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRMYXllciA9PT0gbnVsbCAmJiBsYXllci5zZWxlY3RhYmxlKSB0aGlzLnNlbGVjdGVkTGF5ZXIgPSBsYXllci5uYW1lO1xyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLmdldExheWVyID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgIG5hbWUgPSAodHlwZW9mIG5hbWUgPT09ICd1bmRlZmluZWQnKSA/IHRoaXMuc2VsZWN0ZWRMYXllciA6IG5hbWU7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGF5ZXJzW2ldLm5hbWUgPT09IG5hbWUpIHJldHVybiB0aGlzLmxheWVyc1tpXTtcclxuICAgIH1cclxufTtcclxuTGF5ZXJNYW5hZ2VyLnByb3RvdHlwZS5zZXRMYXllciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcclxuICAgIGNvbnN0IGxtID0gdGhpcztcclxuICAgIHRoaXMubGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgaWYgKCFsYXllci5zZWxlY3RhYmxlKSByZXR1cm47XHJcbiAgICAgICAgaWYgKGZvdW5kKSBsYXllci5jdHguZ2xvYmFsQWxwaGEgPSAwLjM7XHJcbiAgICAgICAgZWxzZSBsYXllci5jdHguZ2xvYmFsQWxwaGEgPSAxLjA7XHJcblxyXG4gICAgICAgIGlmIChuYW1lID09PSBsYXllci5uYW1lKSB7XHJcbiAgICAgICAgICAgIGxtLnNlbGVjdGVkTGF5ZXIgPSBuYW1lO1xyXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXllci5zZWxlY3Rpb24gPSBbXTtcclxuICAgICAgICBsYXllci5pbnZhbGlkYXRlKHRydWUpO1xyXG4gICAgfSk7XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuZ2V0R3JpZExheWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0TGF5ZXIoXCJncmlkXCIpO1xyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLmRyYXdHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldEdyaWRMYXllcigpO1xyXG4gICAgY29uc3QgY3R4ID0gbGF5ZXIuY3R4O1xyXG4gICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgY29uc3QgcGFuWCA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5YO1xyXG4gICAgY29uc3QgcGFuWSA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5ZO1xyXG4gICAgbGF5ZXIuY2xlYXIoKTtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxheWVyLndpZHRoOyBpICs9IHRoaXMuZ3JpZFNpemUgKiB6KSB7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyhpICsgKHBhblggJSB0aGlzLmdyaWRTaXplKSAqIHosIDApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oaSArIChwYW5YICUgdGhpcy5ncmlkU2l6ZSkgKiB6LCBsYXllci5oZWlnaHQpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8oMCwgaSArIChwYW5ZICUgdGhpcy5ncmlkU2l6ZSkgKiB6KTtcclxuICAgICAgICBjdHgubGluZVRvKGxheWVyLndpZHRoLCBpICsgKHBhblkgJSB0aGlzLmdyaWRTaXplKSAqIHopO1xyXG4gICAgfVxyXG5cclxuICAgIGN0eC5zdHJva2VTdHlsZSA9IGdyaWRDb2xvdXIuc3BlY3RydW0oXCJnZXRcIikudG9SZ2JTdHJpbmcoKTtcclxuICAgIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgbGF5ZXIudmFsaWQgPSB0cnVlO1xyXG4gICAgY29uc3QgZm93bCA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihcImZvd1wiKTtcclxuICAgIGlmIChmb3dsICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgZm93bC5pbnZhbGlkYXRlKCk7XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuc2V0R3JpZFNpemUgPSBmdW5jdGlvbiAoZ3JpZFNpemUpIHtcclxuICAgIGlmIChncmlkU2l6ZSAhPT0gdGhpcy5ncmlkU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSBncmlkU2l6ZTtcclxuICAgICAgICB0aGlzLmRyYXdHcmlkKCk7XHJcbiAgICAgICAgJCgnI2dyaWRTaXplSW5wdXQnKS52YWwoZ3JpZFNpemUpO1xyXG4gICAgfVxyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLnNldFVuaXRTaXplID0gZnVuY3Rpb24gKHVuaXRTaXplKSB7XHJcbiAgICBpZiAodW5pdFNpemUgIT09IHRoaXMudW5pdFNpemUpIHtcclxuICAgICAgICB0aGlzLnVuaXRTaXplID0gdW5pdFNpemU7XHJcbiAgICAgICAgdGhpcy5kcmF3R3JpZCgpO1xyXG4gICAgICAgICQoJyN1bml0U2l6ZUlucHV0JykudmFsKHVuaXRTaXplKTtcclxuICAgIH1cclxufTtcclxuTGF5ZXJNYW5hZ2VyLnByb3RvdHlwZS5zZXRVc2VHcmlkID0gZnVuY3Rpb24gKHVzZUdyaWQpIHtcclxuICAgIGlmICh1c2VHcmlkICE9PSB0aGlzLnVzZUdyaWQpIHtcclxuICAgICAgICB0aGlzLnVzZUdyaWQgPSB1c2VHcmlkO1xyXG4gICAgICAgIGlmICh1c2VHcmlkKVxyXG4gICAgICAgICAgICAgJCgnI2dyaWQtbGF5ZXInKS5zaG93KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAkKCcjZ3JpZC1sYXllcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcjdXNlR3JpZElucHV0JykucHJvcChcImNoZWNrZWRcIiwgdXNlR3JpZCk7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuc2V0RnVsbEZPVyA9IGZ1bmN0aW9uIChmdWxsRk9XKSB7XHJcbiAgICBpZiAoZnVsbEZPVyAhPT0gdGhpcy5mdWxsRk9XKSB7XHJcbiAgICAgICAgdGhpcy5mdWxsRk9XID0gZnVsbEZPVztcclxuICAgICAgICBjb25zdCBmb3dsID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKFwiZm93XCIpO1xyXG4gICAgICAgIGlmIChmb3dsICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGZvd2wuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICQoJyN1c2VGT1dJbnB1dCcpLnByb3AoXCJjaGVja2VkXCIsIGZ1bGxGT1cpO1xyXG4gICAgfVxyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLnNldEZPV09wYWNpdHkgPSBmdW5jdGlvbiAoZm93T3BhY2l0eSkge1xyXG4gICAgdGhpcy5mb3dPcGFjaXR5ID0gZm93T3BhY2l0eTtcclxuICAgIGNvbnN0IGZvd2wgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoXCJmb3dcIik7XHJcbiAgICBpZiAoZm93bCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIGZvd2wuaW52YWxpZGF0ZSgpO1xyXG4gICAgJCgnI2Zvd09wYWNpdHknKS52YWwoZm93T3BhY2l0eSk7XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAobGV0IGkgPSB0aGlzLmxheWVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHRoaXMubGF5ZXJzW2ldLmludmFsaWRhdGUodHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUub25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKTtcclxuICAgIGNvbnN0IG1vdXNlID0gbGF5ZXIuZ2V0TW91c2UoZSk7XHJcbiAgICBjb25zdCBteCA9IG1vdXNlLng7XHJcbiAgICBjb25zdCBteSA9IG1vdXNlLnk7XHJcblxyXG4gICAgaWYgKHRvb2xzW2dhbWVNYW5hZ2VyLnNlbGVjdGVkVG9vbF0ubmFtZSA9PT0gJ3NlbGVjdCcpIHtcclxuICAgICAgICBsZXQgaGl0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhlIHNlbGVjdGlvblN0YWNrIGFsbG93cyBmb3IgbG93d2VyIHBvc2l0aW9uZWQgb2JqZWN0cyB0aGF0IGFyZSBzZWxlY3RlZCB0byBoYXZlIHByZWNlZGVuY2UgZHVyaW5nIG92ZXJsYXAuXHJcbiAgICAgICAgbGV0IHNlbGVjdGlvblN0YWNrO1xyXG4gICAgICAgIGlmICghbGF5ZXIuc2VsZWN0aW9uLmxlbmd0aClcclxuICAgICAgICAgICAgc2VsZWN0aW9uU3RhY2sgPSBsYXllci5zaGFwZXMuZGF0YTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHNlbGVjdGlvblN0YWNrID0gbGF5ZXIuc2hhcGVzLmRhdGEuY29uY2F0KGxheWVyLnNlbGVjdGlvbik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNlbGVjdGlvblN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2VsZWN0aW9uU3RhY2tbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGNvcm4gPSBzaGFwZS5nZXRDb3JuZXIobXgsIG15KTtcclxuICAgICAgICAgICAgaWYgKGNvcm4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZS5vd25lZEJ5KCkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uID0gW3NoYXBlXTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLm9uU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBsYXllci5yZXNpemluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBsYXllci5yZXNpemVkaXIgPSBjb3JuO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuaW52YWxpZGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25JbmZvKHNoYXBlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoYXBlLmNvbnRhaW5zKG14LCBteSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2hhcGUub3duZWRCeSgpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbCA9IHNoYXBlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLnNlbGVjdGlvbi5pbmRleE9mKHNlbCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uID0gW3NlbF07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLm9uU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5kcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBsYXllci5kcmFnb2ZmeCA9IG14IC0gc2VsLnggKiB6O1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuZHJhZ29mZnkgPSBteSAtIHNlbC55ICogejtcclxuICAgICAgICAgICAgICAgIGxheWVyLmRyYWdvcmlnID0gT2JqZWN0LmFzc2lnbih7fSwgc2VsKTtcclxuICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkluZm8oc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuaW52YWxpZGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFoaXQpIHtcclxuICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHNlbCkge1xyXG4gICAgICAgICAgICAgICAgc2VsLm9uU2VsZWN0aW9uTG9zcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uID0gW107XHJcbiAgICAgICAgICAgIGxheWVyLnNlbGVjdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGxheWVyLnNlbGVjdGlvblN0YXJ0UG9pbnQgPSBsMncobGF5ZXIuZ2V0TW91c2UoZSkpO1xyXG4gICAgICAgICAgICBsYXllci5zZWxlY3Rpb25IZWxwZXIgPSBuZXcgUmVjdChsYXllci5zZWxlY3Rpb25TdGFydFBvaW50LngsIGxheWVyLnNlbGVjdGlvblN0YXJ0UG9pbnQueSwgMCwgMCwgXCJyZ2JhKDAsMCwwLDApXCIsIFwiYmxhY2tcIik7XHJcbiAgICAgICAgICAgIGxheWVyLnNlbGVjdGlvbkhlbHBlci5vd25lcnMucHVzaChnYW1lTWFuYWdlci51c2VybmFtZSk7XHJcbiAgICAgICAgICAgIGxheWVyLmFkZFNoYXBlKGxheWVyLnNlbGVjdGlvbkhlbHBlciwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgbGF5ZXIuaW52YWxpZGF0ZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRvb2xzW2dhbWVNYW5hZ2VyLnNlbGVjdGVkVG9vbF0ubmFtZSA9PT0gJ3BhbicpIHtcclxuICAgICAgICBsYXllci5wYW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICBsYXllci5kcmFnb2ZmeCA9IG14O1xyXG4gICAgICAgIGxheWVyLmRyYWdvZmZ5ID0gbXk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IGxheWVyID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKCk7XHJcbiAgICBjb25zdCBtb3VzZSA9IGxheWVyLmdldE1vdXNlKGUpO1xyXG4gICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgaWYgKGxheWVyLnNlbGVjdGluZykge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0UG9pbnQgPT09IG51bGwpIHJldHVybjtcclxuICAgICAgICAvLyBDdXJyZW50bHkgZHJhdyBvbiBhY3RpdmUgbGF5ZXJcclxuICAgICAgICBjb25zdCBlbmRQb2ludCA9IGwydyhsYXllci5nZXRNb3VzZShlKSk7XHJcblxyXG4gICAgICAgIGxheWVyLnNlbGVjdGlvbkhlbHBlci53ID0gTWF0aC5hYnMoZW5kUG9pbnQueCAtIGxheWVyLnNlbGVjdGlvblN0YXJ0UG9pbnQueCk7XHJcbiAgICAgICAgbGF5ZXIuc2VsZWN0aW9uSGVscGVyLmggPSBNYXRoLmFicyhlbmRQb2ludC55IC0gbGF5ZXIuc2VsZWN0aW9uU3RhcnRQb2ludC55KTtcclxuICAgICAgICBsYXllci5zZWxlY3Rpb25IZWxwZXIueCA9IE1hdGgubWluKGxheWVyLnNlbGVjdGlvblN0YXJ0UG9pbnQueCwgZW5kUG9pbnQueCk7XHJcbiAgICAgICAgbGF5ZXIuc2VsZWN0aW9uSGVscGVyLnkgPSBNYXRoLm1pbihsYXllci5zZWxlY3Rpb25TdGFydFBvaW50LnksIGVuZFBvaW50LnkpO1xyXG4gICAgICAgIGxheWVyLmludmFsaWRhdGUodHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGxheWVyLnBhbm5pbmcpIHtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIucGFuWCArPSBNYXRoLnJvdW5kKChtb3VzZS54IC0gbGF5ZXIuZHJhZ29mZngpIC8geik7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnBhblkgKz0gTWF0aC5yb3VuZCgobW91c2UueSAtIGxheWVyLmRyYWdvZmZ5KSAvIHopO1xyXG4gICAgICAgIGxheWVyLmRyYWdvZmZ4ID0gbW91c2UueDtcclxuICAgICAgICBsYXllci5kcmFnb2ZmeSA9IG1vdXNlLnk7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmludmFsaWRhdGUoKTtcclxuICAgIH0gZWxzZSBpZiAobGF5ZXIuc2VsZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IG9nWCA9IGxheWVyLnNlbGVjdGlvbltsYXllci5zZWxlY3Rpb24ubGVuZ3RoIC0gMV0ueCAqIHo7XHJcbiAgICAgICAgY29uc3Qgb2dZID0gbGF5ZXIuc2VsZWN0aW9uW2xheWVyLnNlbGVjdGlvbi5sZW5ndGggLSAxXS55ICogejtcclxuICAgICAgICBsYXllci5zZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoc2VsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gbW91c2UueCAtIChvZ1ggKyBsYXllci5kcmFnb2ZmeCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gbW91c2UueSAtIChvZ1kgKyBsYXllci5kcmFnb2ZmeSk7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgc2VsLnggKz0gZHgvejtcclxuICAgICAgICAgICAgICAgIHNlbC55ICs9IGR5L3o7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIubmFtZSAhPT0gJ2ZvdycpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHVzZSB0aGUgYWJvdmUgdXBkYXRlZCB2YWx1ZXMgZm9yIHRoZSBib3VuZGluZyBib3ggY2hlY2tcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgYm91bmRpbmcgYm94ZXMgb3ZlcmxhcCB0byBzdG9wIGNsb3NlIC8gcHJlY2lzZSBtb3ZlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmJveCA9IHNlbC5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrZXJzID0gZ2FtZU1hbmFnZXIubW92ZW1lbnRibG9ja2Vycy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1iID0+IG1iICE9PSBzZWwudXVpZCAmJiBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuVVVJRE1hcC5nZXQobWIpLmdldEJvdW5kaW5nQm94KCkuaW50ZXJzZWN0c1dpdGgoYmJveCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja2Vycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgYSBsaW5lIGZyb20gc3RhcnQgdG8gZW5kIHBvc2l0aW9uIGFuZCBzZWUgZm9yIGFueSBpbnRlcnNlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzdG9wcyBzdWRkZW4gbGVhcHMgb3ZlciB3YWxscyEgY2hlZWt5IGJ1Z2dlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IHtzdGFydDoge3g6IG9nWCAvIHosIHk6IG9nWSAvIHp9LCBlbmQ6IHt4OiBzZWwueCwgeTogc2VsLnl9fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tlZCA9IGdhbWVNYW5hZ2VyLm1vdmVtZW50YmxvY2tlcnMuc29tZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1iID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLmdldChtYikuZ2V0Qm91bmRpbmdCb3goKS5nZXRJbnRlcnNlY3RXaXRoTGluZShsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWIgIT09IHNlbC51dWlkICYmIGludGVyLmludGVyc2VjdCAhPT0gbnVsbCAmJiBpbnRlci5kaXN0YW5jZSA+IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbC54IC09IGR4IC8gejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsLnkgLT0gZHkgLyB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbCAhPT0gbGF5ZXIuc2VsZWN0aW9uSGVscGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJzaGFwZU1vdmVcIiwge3NoYXBlOiBzZWwuYXNEaWN0KCksIHRlbXBvcmFyeTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkluZm8oc2VsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxheWVyLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsYXllci5yZXNpemluZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLnJlc2l6ZWRpciA9PT0gJ253Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC53ID0gdzJseChzZWwueCkgKyBzZWwudyAqIHogLSBtb3VzZS54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC5oID0gdzJseShzZWwueSkgKyBzZWwuaCAqIHogLSBtb3VzZS55O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC54ID0gbDJ3eChtb3VzZS54KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWwueSA9IGwyd3kobW91c2UueSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxheWVyLnJlc2l6ZWRpciA9PT0gJ25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC53ID0gbW91c2UueCAtIHcybHgoc2VsLngpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC5oID0gdzJseShzZWwueSkgKyBzZWwuaCAqIHogLSBtb3VzZS55O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC55ID0gbDJ3eShtb3VzZS55KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXIucmVzaXplZGlyID09PSAnc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLncgPSBtb3VzZS54IC0gdzJseChzZWwueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLmggPSBtb3VzZS55IC0gdzJseShzZWwueSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxheWVyLnJlc2l6ZWRpciA9PT0gJ3N3Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC53ID0gdzJseChzZWwueCkgKyBzZWwudyAqIHogLSBtb3VzZS54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC5oID0gbW91c2UueSAtIHcybHkoc2VsLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbC54ID0gbDJ3eChtb3VzZS54KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbC53IC89IHo7XHJcbiAgICAgICAgICAgICAgICBzZWwuaCAvPSB6O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbCAhPT0gbGF5ZXIuc2VsZWN0aW9uSGVscGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJzaGFwZU1vdmVcIiwge3NoYXBlOiBzZWwuYXNEaWN0KCksIHRlbXBvcmFyeTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkluZm8oc2VsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxheWVyLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWwuaW5Db3JuZXIobW91c2UueCwgbW91c2UueSwgXCJud1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJudy1yZXNpemVcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsLmluQ29ybmVyKG1vdXNlLngsIG1vdXNlLnksIFwibmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwibmUtcmVzaXplXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbC5pbkNvcm5lcihtb3VzZS54LCBtb3VzZS55LCBcInNlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcInNlLXJlc2l6ZVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWwuaW5Db3JuZXIobW91c2UueCwgbW91c2UueSwgXCJzd1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJzdy1yZXNpemVcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgfVxyXG59O1xyXG5MYXllck1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpO1xyXG4gICAgaWYgKGxheWVyLnNlbGVjdGluZykge1xyXG4gICAgICAgIGlmIChsYXllci5zZWxlY3Rpb25TdGFydFBvaW50ID09PSBudWxsKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxheWVyLnNoYXBlcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZSA9PT0gbGF5ZXIuc2VsZWN0aW9uSGVscGVyKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBzaGFwZS5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICBpZiAoIXNoYXBlLm93bmVkQnkoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuc2VsZWN0aW9uSGVscGVyLnggPD0gYmJveC54ICsgYmJveC53ICYmXHJcbiAgICAgICAgICAgICAgICBsYXllci5zZWxlY3Rpb25IZWxwZXIueCArIGxheWVyLnNlbGVjdGlvbkhlbHBlci53ID49IGJib3gueCAmJlxyXG4gICAgICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uSGVscGVyLnkgPD0gYmJveC55ICsgYmJveC5oICYmXHJcbiAgICAgICAgICAgICAgICBsYXllci5zZWxlY3Rpb25IZWxwZXIueSArIGxheWVyLnNlbGVjdGlvbkhlbHBlci5oID49IGJib3gueSkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFB1c2ggdGhlIHNlbGVjdGlvbiBoZWxwZXIgYXMgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgc2VsZWN0aW9uXHJcbiAgICAgICAgLy8gVGhpcyBtYWtlcyBzdXJlIHRoYXQgaXQgd2lsbCBiZSB0aGUgZmlyc3Qgb25lIHRvIGJlIGhpdCBpbiB0aGUgaGl0IGRldGVjdGlvbiBvbk1vdXNlRG93blxyXG4gICAgICAgIGlmIChsYXllci5zZWxlY3Rpb24ubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgbGF5ZXIuc2VsZWN0aW9uLnB1c2gobGF5ZXIuc2VsZWN0aW9uSGVscGVyKTtcclxuXHJcbiAgICAgICAgbGF5ZXIucmVtb3ZlU2hhcGUobGF5ZXIuc2VsZWN0aW9uSGVscGVyLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIGxheWVyLnNlbGVjdGlvblN0YXJ0UG9pbnQgPSBudWxsO1xyXG4gICAgICAgIGxheWVyLmludmFsaWRhdGUodHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGxheWVyLnBhbm5pbmcpIHtcclxuICAgICAgICBzb2NrZXQuZW1pdChcInNldCBjbGllbnRPcHRpb25zXCIsIHtcclxuICAgICAgICAgICAgcGFuWDogZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnBhblgsXHJcbiAgICAgICAgICAgIHBhblk6IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5ZXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGxheWVyLnNlbGVjdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICBsYXllci5zZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoc2VsKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci51c2VHcmlkICYmICFlLmFsdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdzID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdyaWRTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdXNlID0ge3g6IHNlbC54ICsgc2VsLncgLyAyLCB5OiBzZWwueSArIHNlbC5oIC8gMn07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXggPSBtb3VzZS54O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gbW91c2UueTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlbC53IC8gZ3MpICUgMiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwueCA9IE1hdGgucm91bmQobXggLyBncykgKiBncyAtIHNlbC53IC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwueCA9IChNYXRoLnJvdW5kKChteCArIChncyAvIDIpKSAvIGdzKSAtICgxIC8gMikpICogZ3MgLSBzZWwudyAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc2VsLmggLyBncykgJSAyID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbC55ID0gTWF0aC5yb3VuZChteSAvIGdzKSAqIGdzIC0gc2VsLmggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbC55ID0gKE1hdGgucm91bmQoKG15ICsgKGdzIC8gMikpIC8gZ3MpIC0gKDEgLyAyKSkgKiBncyAtIHNlbC5oIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWwub25Nb3VzZVVwKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZHJhZ29yaWcueCAhPT0gc2VsLnggfHwgbGF5ZXIuZHJhZ29yaWcueSAhPT0gc2VsLnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsICE9PSBsYXllci5zZWxlY3Rpb25IZWxwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJzaGFwZU1vdmVcIiwge3NoYXBlOiBzZWwuYXNEaWN0KCksIHRlbXBvcmFyeTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uSW5mbyhzZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsYXllci5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxheWVyLnJlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsLncgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLnggKz0gc2VsLnc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLncgPSBNYXRoLmFicyhzZWwudyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsLmggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLnkgKz0gc2VsLmg7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLmggPSBNYXRoLmFicyhzZWwuaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnVzZUdyaWQgJiYgIWUuYWx0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3MgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ3JpZFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLnggPSBNYXRoLnJvdW5kKHNlbC54IC8gZ3MpICogZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLnkgPSBNYXRoLnJvdW5kKHNlbC55IC8gZ3MpICogZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsLncgPSBNYXRoLm1heChNYXRoLnJvdW5kKHNlbC53IC8gZ3MpICogZ3MsIGdzKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWwuaCA9IE1hdGgubWF4KE1hdGgucm91bmQoc2VsLmggLyBncykgKiBncywgZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbCAhPT0gbGF5ZXIuc2VsZWN0aW9uSGVscGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJzaGFwZU1vdmVcIiwge3NoYXBlOiBzZWwuYXNEaWN0KCksIHRlbXBvcmFyeTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25JbmZvKHNlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGxheWVyLmRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICBsYXllci5yZXNpemluZyA9IGZhbHNlO1xyXG4gICAgbGF5ZXIucGFubmluZyA9IGZhbHNlO1xyXG4gICAgbGF5ZXIuc2VsZWN0aW5nID0gZmFsc2U7XHJcbn07XHJcbkxheWVyTWFuYWdlci5wcm90b3R5cGUub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKTtcclxuICAgIGNvbnN0IG1vdXNlID0gbGF5ZXIuZ2V0TW91c2UoZSk7XHJcbiAgICBjb25zdCBteCA9IG1vdXNlLng7XHJcbiAgICBjb25zdCBteSA9IG1vdXNlLnk7XHJcbiAgICBsZXQgaGl0ID0gZmFsc2U7XHJcbiAgICBsYXllci5zaGFwZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzaGFwZSkge1xyXG4gICAgICAgIGlmICghaGl0ICYmIHNoYXBlLmNvbnRhaW5zKG14LCBteSkpIHtcclxuICAgICAgICAgICAgc2hhcGUuc2hvd0NvbnRleHRNZW51KG1vdXNlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIERyYXdUb29sKCkge1xyXG4gICAgdGhpcy5zdGFydFBvaW50ID0gbnVsbDtcclxuICAgIHRoaXMuZGV0YWlsRGl2ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmZpbGxDb2xvciA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgLz5cIik7XHJcbiAgICB0aGlzLmJvcmRlckNvbG9yID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyAvPlwiKTtcclxuICAgIHRoaXMuZGV0YWlsRGl2ID0gJChcIjxkaXY+XCIpXHJcbiAgICAgICAgLmFwcGVuZCgkKFwiPGRpdj5GaWxsPC9kaXY+XCIpKS5hcHBlbmQodGhpcy5maWxsQ29sb3IpXHJcbiAgICAgICAgLmFwcGVuZCgkKFwiPGRpdj5Cb3JkZXI8L2Rpdj5cIikpLmFwcGVuZCh0aGlzLmJvcmRlckNvbG9yKVxyXG4gICAgICAgIC5hcHBlbmQoJChcIjwvZGl2PlwiKSk7XHJcbiAgICAvLyB0aGlzLmRldGFpbERpdiA9ICQoXCI8ZGl2PlwiKVxyXG4gICAgLy8gICAgIC5hcHBlbmQoJChcIjxkaXY+XCIpLmFwcGVuZCgkKFwiPGRpdj5GaWxsPC9kaXY+XCIpKS5hcHBlbmQodGhpcy5maWxsQ29sb3IpLmFwcGVuZCgkKFwiPC9kaXY+XCIpKSlcclxuICAgIC8vICAgICAuYXBwZW5kKCQoXCI8ZGl2PlwiKS5hcHBlbmQoJChcIjxkaXY+Qm9yZGVyPC9kaXY+XCIpKS5hcHBlbmQodGhpcy5ib3JkZXJDb2xvcikuYXBwZW5kKFwiPC9kaXY+XCIpKVxyXG4gICAgLy8gICAgIC5hcHBlbmQoJChcIjwvZGl2PlwiKSk7XHJcbiAgICB0aGlzLmZpbGxDb2xvci5zcGVjdHJ1bSh7XHJcbiAgICAgICAgc2hvd0lucHV0OiB0cnVlLFxyXG4gICAgICAgIGFsbG93RW1wdHk6IHRydWUsXHJcbiAgICAgICAgc2hvd0FscGhhOiB0cnVlLFxyXG4gICAgICAgIGNvbG9yOiBcInJlZFwiXHJcbiAgICB9KTtcclxuICAgIHRoaXMuYm9yZGVyQ29sb3Iuc3BlY3RydW0oe1xyXG4gICAgICAgIHNob3dJbnB1dDogdHJ1ZSxcclxuICAgICAgICBhbGxvd0VtcHR5OiB0cnVlLFxyXG4gICAgICAgIHNob3dBbHBoYTogdHJ1ZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbkRyYXdUb29sLnByb3RvdHlwZS5vbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAvLyBDdXJyZW50bHkgZHJhdyBvbiBhY3RpdmUgbGF5ZXJcclxuICAgIGNvbnN0IGxheWVyID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKCk7XHJcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBsMncobGF5ZXIuZ2V0TW91c2UoZSkpO1xyXG4gICAgY29uc3QgZmlsbENvbG9yID0gdGhpcy5maWxsQ29sb3Iuc3BlY3RydW0oXCJnZXRcIik7XHJcbiAgICBjb25zdCBmaWxsID0gZmlsbENvbG9yID09PSBudWxsID8gdGlueWNvbG9yKFwidHJhbnNwYXJlbnRcIikgOiBmaWxsQ29sb3I7XHJcbiAgICBjb25zdCBib3JkZXJDb2xvciA9IHRoaXMuYm9yZGVyQ29sb3Iuc3BlY3RydW0oXCJnZXRcIik7XHJcbiAgICBjb25zdCBib3JkZXIgPSBib3JkZXJDb2xvciA9PT0gbnVsbCA/IHRpbnljb2xvcihcInRyYW5zcGFyZW50XCIpIDogYm9yZGVyQ29sb3I7XHJcbiAgICB0aGlzLnJlY3QgPSBuZXcgUmVjdCh0aGlzLnN0YXJ0UG9pbnQueCwgdGhpcy5zdGFydFBvaW50LnksIDAsIDAsIGZpbGwudG9SZ2JTdHJpbmcoKSwgYm9yZGVyLnRvUmdiU3RyaW5nKCkpO1xyXG4gICAgdGhpcy5yZWN0Lm93bmVycy5wdXNoKGdhbWVNYW5hZ2VyLnVzZXJuYW1lKTtcclxuICAgIGlmIChsYXllci5uYW1lID09PSAnZm93Jykge1xyXG4gICAgICAgIHRoaXMucmVjdC52aXNpb25PYnN0cnVjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWN0Lm1vdmVtZW50T2JzdHJ1Y3Rpb24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZ2FtZU1hbmFnZXIubGlnaHRibG9ja2Vycy5wdXNoKHRoaXMucmVjdC51dWlkKTtcclxuICAgIGxheWVyLmFkZFNoYXBlKHRoaXMucmVjdCwgdHJ1ZSwgZmFsc2UpO1xyXG59O1xyXG5EcmF3VG9vbC5wcm90b3R5cGUub25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKHRoaXMuc3RhcnRQb2ludCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgLy8gQ3VycmVudGx5IGRyYXcgb24gYWN0aXZlIGxheWVyXHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpO1xyXG4gICAgY29uc3QgZW5kUG9pbnQgPSBsMncobGF5ZXIuZ2V0TW91c2UoZSkpO1xyXG5cclxuICAgIHRoaXMucmVjdC53ID0gTWF0aC5hYnMoZW5kUG9pbnQueCAtIHRoaXMuc3RhcnRQb2ludC54KTtcclxuICAgIHRoaXMucmVjdC5oID0gTWF0aC5hYnMoZW5kUG9pbnQueSAtIHRoaXMuc3RhcnRQb2ludC55KTtcclxuICAgIHRoaXMucmVjdC54ID0gTWF0aC5taW4odGhpcy5zdGFydFBvaW50LngsIGVuZFBvaW50LngpO1xyXG4gICAgdGhpcy5yZWN0LnkgPSBNYXRoLm1pbih0aGlzLnN0YXJ0UG9pbnQueSwgZW5kUG9pbnQueSk7XHJcbiAgICBzb2NrZXQuZW1pdChcInNoYXBlTW92ZVwiLCB7c2hhcGU6IHRoaXMucmVjdC5hc0RpY3QoKSwgdGVtcG9yYXJ5OiBmYWxzZX0pO1xyXG4gICAgbGF5ZXIuaW52YWxpZGF0ZSgpO1xyXG59O1xyXG5EcmF3VG9vbC5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhcnRQb2ludCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgdGhpcy5zdGFydFBvaW50ID0gbnVsbDtcclxuICAgIHRoaXMucmVjdCA9IG51bGw7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBSdWxlclRvb2woKSB7XHJcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBudWxsO1xyXG59XHJcblxyXG5SdWxlclRvb2wucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIC8vIEN1cnJlbnRseSBkcmF3IG9uIGFjdGl2ZSBsYXllclxyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoXCJkcmF3XCIpO1xyXG4gICAgdGhpcy5zdGFydFBvaW50ID0gbDJ3KGxheWVyLmdldE1vdXNlKGUpKTtcclxuICAgIHRoaXMucnVsZXIgPSBuZXcgTGluZSh0aGlzLnN0YXJ0UG9pbnQueCwgdGhpcy5zdGFydFBvaW50LnksIHRoaXMuc3RhcnRQb2ludC54LCB0aGlzLnN0YXJ0UG9pbnQueSk7XHJcbiAgICB0aGlzLnRleHQgPSBuZXcgVGV4dCh0aGlzLnN0YXJ0UG9pbnQueCwgdGhpcy5zdGFydFBvaW50LnksIFwiXCIsIFwiMjBweCBzZXJpZlwiKTtcclxuICAgIHRoaXMucnVsZXIub3duZXJzLnB1c2goZ2FtZU1hbmFnZXIudXNlcm5hbWUpO1xyXG4gICAgdGhpcy50ZXh0Lm93bmVycy5wdXNoKGdhbWVNYW5hZ2VyLnVzZXJuYW1lKTtcclxuICAgIGxheWVyLmFkZFNoYXBlKHRoaXMucnVsZXIsIHRydWUsIHRydWUpO1xyXG4gICAgbGF5ZXIuYWRkU2hhcGUodGhpcy50ZXh0LCB0cnVlLCB0cnVlKTtcclxufTtcclxuUnVsZXJUb29sLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAodGhpcy5zdGFydFBvaW50ID09PSBudWxsKSByZXR1cm47XHJcbiAgICAvLyBDdXJyZW50bHkgZHJhdyBvbiBhY3RpdmUgbGF5ZXJcclxuICAgIGNvbnN0IGxheWVyID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKFwiZHJhd1wiKTtcclxuICAgIGNvbnN0IGVuZFBvaW50ID0gbDJ3KGxheWVyLmdldE1vdXNlKGUpKTtcclxuXHJcbiAgICB0aGlzLnJ1bGVyLngyID0gZW5kUG9pbnQueDtcclxuICAgIHRoaXMucnVsZXIueTIgPSBlbmRQb2ludC55O1xyXG4gICAgc29ja2V0LmVtaXQoXCJzaGFwZU1vdmVcIiwge3NoYXBlOiB0aGlzLnJ1bGVyLmFzRGljdCgpLCB0ZW1wb3Jhcnk6IHRydWV9KTtcclxuXHJcbiAgICBjb25zdCBkaWZmc2lnbiA9IE1hdGguc2lnbihlbmRQb2ludC54IC0gdGhpcy5zdGFydFBvaW50LngpICogTWF0aC5zaWduKGVuZFBvaW50LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSk7XHJcbiAgICBjb25zdCB4ZGlmZiA9IE1hdGguYWJzKGVuZFBvaW50LnggLSB0aGlzLnN0YXJ0UG9pbnQueCk7XHJcbiAgICBjb25zdCB5ZGlmZiA9IE1hdGguYWJzKGVuZFBvaW50LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSk7XHJcbiAgICBjb25zdCBsYWJlbCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KCh4ZGlmZikgKiogMiArICh5ZGlmZikgKiogMikgKiBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIudW5pdFNpemUgLyBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ3JpZFNpemUpICsgXCIgZnRcIjtcclxuICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIoZGlmZnNpZ24gKiB5ZGlmZiwgeGRpZmYpO1xyXG4gICAgY29uc3QgeG1pZCA9IE1hdGgubWluKHRoaXMuc3RhcnRQb2ludC54LCBlbmRQb2ludC54KSArIHhkaWZmIC8gMjtcclxuICAgIGNvbnN0IHltaWQgPSBNYXRoLm1pbih0aGlzLnN0YXJ0UG9pbnQueSwgZW5kUG9pbnQueSkgKyB5ZGlmZiAvIDI7XHJcbiAgICB0aGlzLnRleHQueCA9IHhtaWQ7XHJcbiAgICB0aGlzLnRleHQueSA9IHltaWQ7XHJcbiAgICB0aGlzLnRleHQudGV4dCA9IGxhYmVsO1xyXG4gICAgdGhpcy50ZXh0LmFuZ2xlID0gYW5nbGU7XHJcbiAgICBzb2NrZXQuZW1pdChcInNoYXBlTW92ZVwiLCB7c2hhcGU6IHRoaXMudGV4dC5hc0RpY3QoKSwgdGVtcG9yYXJ5OiB0cnVlfSk7XHJcbiAgICBsYXllci5pbnZhbGlkYXRlKHRydWUpO1xyXG59O1xyXG5SdWxlclRvb2wucHJvdG90eXBlLm9uTW91c2VVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnN0YXJ0UG9pbnQgPT09IG51bGwpIHJldHVybjtcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihcImRyYXdcIik7XHJcbiAgICBsYXllci5yZW1vdmVTaGFwZSh0aGlzLnJ1bGVyLCB0cnVlLCB0cnVlKTtcclxuICAgIGxheWVyLnJlbW92ZVNoYXBlKHRoaXMudGV4dCwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICB0aGlzLnJ1bGVyID0gbnVsbDtcclxuICAgIHRoaXMudGV4dCA9IG51bGw7XHJcbiAgICBsYXllci5pbnZhbGlkYXRlKHRydWUpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gRk9XVG9vbCgpIHtcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XHJcbiAgICB0aGlzLmRldGFpbERpdiA9ICQoXCI8ZGl2PlwiKVxyXG4gICAgICAgIC5hcHBlbmQoJChcIjxkaXY+UmV2ZWFsPC9kaXY+PGxhYmVsIGNsYXNzPSdzd2l0Y2gnPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J2Zvdy1yZXZlYWwnPjxzcGFuIGNsYXNzPSdzbGlkZXIgcm91bmQnPjwvc3Bhbj48L2xhYmVsPlwiKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8L2Rpdj5cIikpO1xyXG59XHJcblxyXG5GT1dUb29sLnByb3RvdHlwZS5vbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihcImZvd1wiKTtcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IGwydyhsYXllci5nZXRNb3VzZShlKSk7XHJcbiAgICB0aGlzLnJlY3QgPSBuZXcgUmVjdCh0aGlzLnN0YXJ0UG9pbnQueCwgdGhpcy5zdGFydFBvaW50LnksIDAsIDAsIGZvd0NvbG91ci5zcGVjdHJ1bShcImdldFwiKS50b1JnYlN0cmluZygpKTtcclxuICAgIGxheWVyLmFkZFNoYXBlKHRoaXMucmVjdCwgdHJ1ZSwgZmFsc2UpO1xyXG5cclxuICAgIGlmICgkKFwiI2Zvdy1yZXZlYWxcIikucHJvcChcImNoZWNrZWRcIikpXHJcbiAgICAgICAgdGhpcy5yZWN0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCI7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5yZWN0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcclxufTtcclxuRk9XVG9vbC5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhcnRQb2ludCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgdGhpcy5zdGFydFBvaW50ID0gbnVsbDtcclxuICAgIHRoaXMucmVjdCA9IG51bGw7XHJcbn07XHJcbkZPV1Rvb2wucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmICh0aGlzLnN0YXJ0UG9pbnQgPT09IG51bGwpIHJldHVybjtcclxuICAgIC8vIEN1cnJlbnRseSBkcmF3IG9uIGFjdGl2ZSBsYXllclxyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoXCJmb3dcIik7XHJcbiAgICBjb25zdCBlbmRQb2ludCA9IGwydyhsYXllci5nZXRNb3VzZShlKSk7XHJcblxyXG4gICAgdGhpcy5yZWN0LncgPSBNYXRoLmFicyhlbmRQb2ludC54IC0gdGhpcy5zdGFydFBvaW50LngpO1xyXG4gICAgdGhpcy5yZWN0LmggPSBNYXRoLmFicyhlbmRQb2ludC55IC0gdGhpcy5zdGFydFBvaW50LnkpO1xyXG4gICAgdGhpcy5yZWN0LnggPSBNYXRoLm1pbih0aGlzLnN0YXJ0UG9pbnQueCwgZW5kUG9pbnQueCk7XHJcbiAgICB0aGlzLnJlY3QueSA9IE1hdGgubWluKHRoaXMuc3RhcnRQb2ludC55LCBlbmRQb2ludC55KTtcclxuXHJcbiAgICBzb2NrZXQuZW1pdChcInNoYXBlTW92ZVwiLCB7c2hhcGU6IHRoaXMucmVjdC5hc0RpY3QoKSwgdGVtcG9yYXJ5OiBmYWxzZX0pO1xyXG4gICAgbGF5ZXIuaW52YWxpZGF0ZSgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gTWFwVG9vbCgpIHtcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XHJcbiAgICB0aGlzLnhDb3VudCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgdmFsdWU9JzMnPlwiKTtcclxuICAgIHRoaXMueUNvdW50ID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyB2YWx1ZT0nMyc+XCIpO1xyXG4gICAgdGhpcy5kZXRhaWxEaXYgPSAkKFwiPGRpdj5cIilcclxuICAgICAgICAuYXBwZW5kKCQoXCI8ZGl2PiNYPC9kaXY+XCIpKS5hcHBlbmQodGhpcy54Q291bnQpXHJcbiAgICAgICAgLmFwcGVuZCgkKFwiPGRpdj4jWTwvZGl2PlwiKSkuYXBwZW5kKHRoaXMueUNvdW50KVxyXG4gICAgICAgIC5hcHBlbmQoJChcIjwvZGl2PlwiKSk7XHJcbn1cclxuXHJcbk1hcFRvb2wucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IGxheWVyID0gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdldExheWVyKCk7XHJcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBsMncobGF5ZXIuZ2V0TW91c2UoZSkpO1xyXG4gICAgdGhpcy5yZWN0ID0gbmV3IFJlY3QodGhpcy5zdGFydFBvaW50LngsIHRoaXMuc3RhcnRQb2ludC55LCAwLCAwLCBcInJnYmEoMCwwLDAsMClcIiwgXCJibGFja1wiKTtcclxuICAgIGxheWVyLmFkZFNoYXBlKHRoaXMucmVjdCwgZmFsc2UsIGZhbHNlKTtcclxufTtcclxuTWFwVG9vbC5wcm90b3R5cGUub25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKHRoaXMuc3RhcnRQb2ludCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgLy8gQ3VycmVudGx5IGRyYXcgb24gYWN0aXZlIGxheWVyXHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpO1xyXG4gICAgY29uc3QgZW5kUG9pbnQgPSBsMncobGF5ZXIuZ2V0TW91c2UoZSkpO1xyXG5cclxuICAgIHRoaXMucmVjdC53ID0gTWF0aC5hYnMoZW5kUG9pbnQueCAtIHRoaXMuc3RhcnRQb2ludC54KTtcclxuICAgIHRoaXMucmVjdC5oID0gTWF0aC5hYnMoZW5kUG9pbnQueSAtIHRoaXMuc3RhcnRQb2ludC55KTtcclxuICAgIHRoaXMucmVjdC54ID0gTWF0aC5taW4odGhpcy5zdGFydFBvaW50LngsIGVuZFBvaW50LngpO1xyXG4gICAgdGhpcy5yZWN0LnkgPSBNYXRoLm1pbih0aGlzLnN0YXJ0UG9pbnQueSwgZW5kUG9pbnQueSk7XHJcbiAgICAvLyBzb2NrZXQuZW1pdChcInNoYXBlTW92ZVwiLCB7c2hhcGU6IHRoaXMucmVjdC5hc0RpY3QoKSwgdGVtcG9yYXJ5OiBmYWxzZX0pO1xyXG4gICAgbGF5ZXIuaW52YWxpZGF0ZSgpO1xyXG59O1xyXG5NYXBUb29sLnByb3RvdHlwZS5vbk1vdXNlVXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5zdGFydFBvaW50ID09PSBudWxsKSByZXR1cm47XHJcbiAgICBjb25zdCBsYXllciA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpO1xyXG4gICAgaWYgKGxheWVyLnNlbGVjdGlvbi5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICBsYXllci5yZW1vdmVTaGFwZSh0aGlzLnJlY3QsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHcgPSB0aGlzLnJlY3QudztcclxuICAgIGNvbnN0IGggPSB0aGlzLnJlY3QuaDtcclxuICAgIGxheWVyLnNlbGVjdGlvblswXS53ICo9IHRoaXMueENvdW50LnZhbCgpICogZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdyaWRTaXplIC8gdztcclxuICAgIGxheWVyLnNlbGVjdGlvblswXS5oICo9IHRoaXMueUNvdW50LnZhbCgpICogZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdyaWRTaXplIC8gaDtcclxuICAgIGxheWVyLnJlbW92ZVNoYXBlKHRoaXMucmVjdCwgZmFsc2UsIGZhbHNlKTtcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XHJcbiAgICB0aGlzLnJlY3QgPSBudWxsO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEdhbWVNYW5hZ2VyKCkge1xyXG4gICAgdGhpcy5sYXllck1hbmFnZXIgPSBuZXcgTGF5ZXJNYW5hZ2VyKCk7XHJcbiAgICB0aGlzLnNlbGVjdGVkVG9vbCA9IDA7XHJcbiAgICB0aGlzLnJ1bGVyVG9vbCA9IG5ldyBSdWxlclRvb2woKTtcclxuICAgIHRoaXMuZHJhd1Rvb2wgPSBuZXcgRHJhd1Rvb2woKTtcclxuICAgIHRoaXMuZm93VG9vbCA9IG5ldyBGT1dUb29sKCk7XHJcbiAgICB0aGlzLm1hcFRvb2wgPSBuZXcgTWFwVG9vbCgpO1xyXG5cclxuICAgIHRoaXMubGlnaHRzb3VyY2VzID0gW107XHJcbiAgICB0aGlzLmxpZ2h0YmxvY2tlcnMgPSBbXTtcclxuICAgIHRoaXMubW92ZW1lbnRibG9ja2VycyA9IFtdO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhdGl2ZVRyYWNrZXIgPSBuZXcgSW5pdGlhdGl2ZVRyYWNrZXIoKTtcclxufVxyXG5HYW1lTWFuYWdlci5wcm90b3R5cGUuc2V0Q2xpZW50T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBpZiAoXCJncmlkQ29sb3VyXCIgaW4gb3B0aW9ucylcclxuICAgICAgICBncmlkQ29sb3VyLnNwZWN0cnVtKFwic2V0XCIsIG9wdGlvbnMuZ3JpZENvbG91cik7XHJcbiAgICBpZiAoXCJmb3dDb2xvdXJcIiBpbiBvcHRpb25zKXtcclxuICAgICAgICBmb3dDb2xvdXIuc3BlY3RydW0oXCJzZXRcIiwgb3B0aW9ucy5mb3dDb2xvdXIpO1xyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5pbnZhbGlkYXRlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoXCJwYW5YXCIgaW4gb3B0aW9ucylcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIucGFuWCA9IG9wdGlvbnMucGFuWDtcclxuICAgIGlmIChcInBhbllcIiBpbiBvcHRpb25zKVxyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5ZID0gb3B0aW9ucy5wYW5ZO1xyXG4gICAgaWYgKFwiem9vbUZhY3RvclwiIGluIG9wdGlvbnMpIHtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuem9vbUZhY3RvciA9IG9wdGlvbnMuem9vbUZhY3RvcjtcclxuICAgICAgICAkKFwiI3pvb21lclwiKS5zbGlkZXIoe3ZhbHVlOiAxL29wdGlvbnMuem9vbUZhY3Rvcn0pO1xyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRHcmlkTGF5ZXIoKS5pbnZhbGlkYXRlKCk7XHJcbiAgICB9XHJcbn07XHJcbkdhbWVNYW5hZ2VyLnByb3RvdHlwZS5zZXR1cFRvb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdG9vbHNlbGVjdERpdiA9ICQoXCIjdG9vbHNlbGVjdFwiKS5maW5kKFwidWxcIik7XHJcbiAgICB0b29scy5mb3JFYWNoKGZ1bmN0aW9uICh0b29sKSB7XHJcbiAgICAgICAgaWYgKCF0b29sLnBsYXllclRvb2wgJiYgIWdhbWVNYW5hZ2VyLklTX0RNKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZXh0cmEgPSB0b29sLmRlZmF1bHRTZWxlY3QgPyBcIiBjbGFzcz0ndG9vbC1zZWxlY3RlZCdcIiA6IFwiXCI7XHJcbiAgICAgICAgY29uc3QgdG9vbExpID0gJChcIjxsaSBpZD0ndG9vbC1cIiArIHRvb2wubmFtZSArIFwiJ1wiICsgZXh0cmEgKyBcIj48YSBocmVmPScjJz5cIiArIHRvb2wubmFtZSArIFwiPC9hPjwvbGk+XCIpO1xyXG4gICAgICAgIHRvb2xzZWxlY3REaXYuYXBwZW5kKHRvb2xMaSk7XHJcbiAgICAgICAgaWYgKHRvb2wuaGFzRGV0YWlsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IHRvb2wuZnVuYy5kZXRhaWxEaXY7XHJcbiAgICAgICAgICAgICQoJyN0b29sZGV0YWlsJykuYXBwZW5kKGRpdik7XHJcbiAgICAgICAgICAgIGRpdi5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvb2xMaS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0b29scy5pbmRleE9mKHRvb2wpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IGdhbWVNYW5hZ2VyLnNlbGVjdGVkVG9vbCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnRvb2wtc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcyhcInRvb2wtc2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwidG9vbC1zZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIGdhbWVNYW5hZ2VyLnNlbGVjdGVkVG9vbCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gJCgnI3Rvb2xkZXRhaWwnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b29sLmhhc0RldGFpbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN0b29sZGV0YWlsJykuY2hpbGRyZW4oKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbC5mdW5jLmRldGFpbERpdi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxubGV0IGdhbWVNYW5hZ2VyID0gbmV3IEdhbWVNYW5hZ2VyKCk7XHJcblxyXG5cclxuLy8gKioqKiBTRVRVUCBVSSAqKioqXHJcbmNvbnN0IHRvb2xzID0gW1xyXG4gICAge25hbWU6IFwic2VsZWN0XCIsIHBsYXllclRvb2w6IHRydWUsIGRlZmF1bHRTZWxlY3Q6IHRydWUsIGhhc0RldGFpbDogZmFsc2UsIGZ1bmM6IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlcn0sXHJcbiAgICB7bmFtZTogXCJwYW5cIiwgcGxheWVyVG9vbDogdHJ1ZSwgZGVmYXVsdFNlbGVjdDogZmFsc2UsIGhhc0RldGFpbDogZmFsc2UsIGZ1bmM6IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlcn0sXHJcbiAgICB7bmFtZTogXCJkcmF3XCIsIHBsYXllclRvb2w6IHRydWUsIGRlZmF1bHRTZWxlY3Q6IGZhbHNlLCBoYXNEZXRhaWw6IHRydWUsIGZ1bmM6IGdhbWVNYW5hZ2VyLmRyYXdUb29sfSxcclxuICAgIHtuYW1lOiBcInJ1bGVyXCIsIHBsYXllclRvb2w6IHRydWUsIGRlZmF1bHRTZWxlY3Q6IGZhbHNlLCBoYXNEZXRhaWw6IGZhbHNlLCBmdW5jOiBnYW1lTWFuYWdlci5ydWxlclRvb2x9LFxyXG4gICAge25hbWU6IFwiZm93XCIsIHBsYXllclRvb2w6IGZhbHNlLCBkZWZhdWx0U2VsZWN0OiBmYWxzZSwgaGFzRGV0YWlsOiB0cnVlLCBmdW5jOiBnYW1lTWFuYWdlci5mb3dUb29sfSxcclxuICAgIHtuYW1lOiBcIm1hcFwiLCBwbGF5ZXJUb29sOiBmYWxzZSwgZGVmYXVsdFNlbGVjdDogZmFsc2UsIGhhc0RldGFpbDogdHJ1ZSwgZnVuYzogZ2FtZU1hbmFnZXIubWFwVG9vbH0sXHJcbl07XHJcblxyXG5jb25zdCBncmlkQ29sb3VyID0gJChcIiNncmlkQ29sb3VyXCIpO1xyXG5ncmlkQ29sb3VyLnNwZWN0cnVtKHtcclxuICAgIHNob3dJbnB1dDogdHJ1ZSxcclxuICAgIGFsbG93RW1wdHk6IHRydWUsXHJcbiAgICBzaG93QWxwaGE6IHRydWUsXHJcbiAgICBjb2xvcjogXCJyZ2JhKDI1NSwwLDAsIDAuNSlcIixcclxuICAgIG1vdmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZHJhd0dyaWQoKVxyXG4gICAgfSxcclxuICAgIGNoYW5nZTogZnVuY3Rpb24gKGNvbG91cikge1xyXG4gICAgICAgIHNvY2tldC5lbWl0KFwic2V0IGNsaWVudE9wdGlvbnNcIiwgeydncmlkQ29sb3VyJzogY29sb3VyLnRvUmdiU3RyaW5nKCl9KTtcclxuICAgIH1cclxufSk7XHJcbmNvbnN0IGZvd0NvbG91ciA9ICQoXCIjZm93Q29sb3VyXCIpO1xyXG5mb3dDb2xvdXIuc3BlY3RydW0oe1xyXG4gICAgc2hvd0lucHV0OiB0cnVlLFxyXG4gICAgY29sb3I6IFwicmdiKDgyLCA4MSwgODEpXCIsXHJcbiAgICBtb3ZlOiBmdW5jdGlvbiAoY29sb3VyKSB7XHJcbiAgICAgICAgY29uc3QgbCA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihcImZvd1wiKTtcclxuICAgICAgICBpZiAobCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGwuc2hhcGVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcclxuICAgICAgICAgICAgICAgIHNoYXBlLmZpbGwgPSBjb2xvdXIudG9SZ2JTdHJpbmcoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGwuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjaGFuZ2U6IGZ1bmN0aW9uIChjb2xvdXIpIHtcclxuICAgICAgICBzb2NrZXQuZW1pdChcInNldCBjbGllbnRPcHRpb25zXCIsIHsnZm93Q29sb3VyJzogY29sb3VyLnRvUmdiU3RyaW5nKCl9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBwcmV2ZW50IGRvdWJsZSBjbGlja2luZyB0ZXh0IHNlbGVjdGlvblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZSkge1xyXG4gICAgaWYgKCFib2FyZF9pbml0aWFsaXNlZCkgcmV0dXJuO1xyXG4gICAgaWYgKChlLmJ1dHRvbiAhPT0gMCAmJiBlLmJ1dHRvbiAhPT0gMSkgfHwgZS50YXJnZXQudGFnTmFtZSAhPT0gJ0NBTlZBUycpIHJldHVybjtcclxuICAgICRtZW51LmhpZGUoKTtcclxuICAgIHRvb2xzW2dhbWVNYW5hZ2VyLnNlbGVjdGVkVG9vbF0uZnVuYy5vbk1vdXNlRG93bihlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Qb2ludGVyTW92ZShlKSB7XHJcbiAgICBpZiAoIWJvYXJkX2luaXRpYWxpc2VkKSByZXR1cm47XHJcbiAgICBpZiAoKGUuYnV0dG9uICE9PSAwICYmIGUuYnV0dG9uICE9PSAxKSB8fCBlLnRhcmdldC50YWdOYW1lICE9PSAnQ0FOVkFTJykgcmV0dXJuO1xyXG4gICAgdG9vbHNbZ2FtZU1hbmFnZXIuc2VsZWN0ZWRUb29sXS5mdW5jLm9uTW91c2VNb3ZlKGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBvaW50ZXJVcChlKSB7XHJcbiAgICBpZiAoIWJvYXJkX2luaXRpYWxpc2VkKSByZXR1cm47XHJcbiAgICBpZiAoKGUuYnV0dG9uICE9PSAwICYmIGUuYnV0dG9uICE9PSAxKSB8fCBlLnRhcmdldC50YWdOYW1lICE9PSAnQ0FOVkFTJykgcmV0dXJuO1xyXG4gICAgdG9vbHNbZ2FtZU1hbmFnZXIuc2VsZWN0ZWRUb29sXS5mdW5jLm9uTW91c2VVcChlKTtcclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Qb2ludGVyRG93bik7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25Qb2ludGVyVXApO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmICghYm9hcmRfaW5pdGlhbGlzZWQpIHJldHVybjtcclxuICAgIGlmIChlLmJ1dHRvbiAhPT0gMiB8fCBlLnRhcmdldC50YWdOYW1lICE9PSAnQ0FOVkFTJykgcmV0dXJuO1xyXG4gICAgdG9vbHNbZ2FtZU1hbmFnZXIuc2VsZWN0ZWRUb29sXS5mdW5jLm9uQ29udGV4dE1lbnUoZSk7XHJcbn0pO1xyXG5cclxuJChcIiN6b29tZXJcIikuc2xpZGVyKHtcclxuICAgIG9yaWVudGF0aW9uOiBcInZlcnRpY2FsXCIsXHJcbiAgICBtaW46IDAuNSxcclxuICAgIG1heDogNS4wLFxyXG4gICAgc3RlcDogMC4xLFxyXG4gICAgdmFsdWU6IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yLFxyXG4gICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICBjb25zdCBvcmlnWiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgICAgIGNvbnN0IG5ld1ogPSAxIC8gdWkudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgb3JpZ1ggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIG9yaWdaO1xyXG4gICAgICAgIGNvbnN0IG5ld1ggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIG5ld1o7XHJcbiAgICAgICAgY29uc3Qgb3JpZ1kgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyBvcmlnWjtcclxuICAgICAgICBjb25zdCBuZXdZID0gd2luZG93LmlubmVySGVpZ2h0IC8gbmV3WjtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuem9vbUZhY3RvciA9IG5ld1o7XHJcbiAgICAgICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnBhblggLT0gKG9yaWdYIC0gbmV3WCkgLyAyO1xyXG4gICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5ZIC09IChvcmlnWSAtIG5ld1kpIC8gMjtcclxuICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIHNvY2tldC5lbWl0KFwic2V0IGNsaWVudE9wdGlvbnNcIiwge3pvb21GYWN0b3I6IG5ld1osIHBhblg6IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5YLCBwYW5ZOiBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIucGFuWX0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0ICRtZW51ID0gJCgnI2NvbnRleHRNZW51Jyk7XHJcbiRtZW51LmhpZGUoKTtcclxuXHJcbmNvbnN0IHNlbGVjdGlvbkluZm8gPSB7XHJcbiAgICB4OiAkKCcjc2VsZWN0aW9uSW5mb1gnKSxcclxuICAgIHk6ICQoJyNzZWxlY3Rpb25JbmZvWScpLFxyXG4gICAgdzogJCgnI3NlbGVjdGlvbkluZm9XJyksXHJcbiAgICBoOiAkKCcjc2VsZWN0aW9uSW5mb0gnKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc2V0U2VsZWN0aW9uSW5mbyhzaGFwZSkge1xyXG4gICAgc2VsZWN0aW9uSW5mby54LnZhbChzaGFwZS54KTtcclxuICAgIHNlbGVjdGlvbkluZm8ueS52YWwoc2hhcGUueSk7XHJcbiAgICBzZWxlY3Rpb25JbmZvLncudmFsKHNoYXBlLncpO1xyXG4gICAgc2VsZWN0aW9uSW5mby5oLnZhbChzaGFwZS5oKTtcclxufVxyXG5cclxuY29uc3Qgc2hhcGVTZWxlY3Rpb25EaWFsb2cgPSAkKFwiI3NoYXBlc2VsZWN0aW9uZGlhbG9nXCIpLmRpYWxvZyh7XHJcbiAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICB3aWR0aDogJ2F1dG8nXHJcbn0pO1xyXG5cclxuY29uc3QgaW5pdGlhdGl2ZURpYWxvZyA9ICQoXCIjaW5pdGlhdGl2ZWRpYWxvZ1wiKS5kaWFsb2coe1xyXG4gICAgYXV0b09wZW46IGZhbHNlLFxyXG4gICAgd2lkdGg6ICcxNjBweCdcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDb250ZXh0TWVudShtZW51LCBzaGFwZSkge1xyXG4gICAgY29uc3QgYWN0aW9uID0gbWVudS5kYXRhKFwiYWN0aW9uXCIpO1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIoKTtcclxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSAnbW92ZVRvRnJvbnQnOlxyXG4gICAgICAgICAgICBsYXllci5tb3ZlU2hhcGVPcmRlcihzaGFwZSwgbGF5ZXIuc2hhcGVzLmRhdGEubGVuZ3RoIC0gMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21vdmVUb0JhY2snOlxyXG4gICAgICAgICAgICBsYXllci5tb3ZlU2hhcGVPcmRlcihzaGFwZSwgMCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3NldExheWVyJzpcclxuICAgICAgICAgICAgbGF5ZXIucmVtb3ZlU2hhcGUoc2hhcGUsIHRydWUpO1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuZ2V0TGF5ZXIobWVudS5kYXRhKFwibGF5ZXJcIikpLmFkZFNoYXBlKHNoYXBlLCB0cnVlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnYWRkSW5pdGlhdGl2ZSc6XHJcbiAgICAgICAgICAgIGdhbWVNYW5hZ2VyLmluaXRpYXRpdmVUcmFja2VyLmFkZEluaXRpYXRpdmUoXHJcbiAgICAgICAgICAgICAgICB7dXVpZDogc2hhcGUudXVpZCwgdmlzaWJsZTogIWdhbWVNYW5hZ2VyLklTX0RNLCBncm91cDogZmFsc2UsIHNyYzogc2hhcGUuc3JjLCBvd25lcnM6IHNoYXBlLm93bmVyc30sIHRydWUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgICRtZW51LmhpZGUoKTtcclxufVxyXG5cclxuY29uc3Qgc2V0dGluZ3NfbWVudSA9ICQoXCIjbWVudVwiKTtcclxuY29uc3QgbG9jYXRpb25zX21lbnUgPSAkKFwiI2xvY2F0aW9ucy1tZW51XCIpO1xyXG5jb25zdCBsYXllcl9tZW51ID0gJChcIiNsYXllcnNlbGVjdFwiKTtcclxuJChcIiNzZWxlY3Rpb24tbWVudVwiKS5oaWRlKCk7XHJcblxyXG4kKCcjcm0tc2V0dGluZ3MnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIG9yZGVyIG9mIGFuaW1hdGlvbiBpcyBpbXBvcnRhbnQsIGl0IG90aGVyd2lzZSB3aWxsIHNvbWV0aW1lcyBzaG93IGEgc21hbGwgZ2FwIGJldHdlZW4gdGhlIHR3byBvYmplY3RzXHJcbiAgICBpZiAoc2V0dGluZ3NfbWVudS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgJCgnI3JhZGlhbG1lbnUnKS5hbmltYXRlKHtsZWZ0OiBcIi09MjAwcHhcIn0pO1xyXG4gICAgICAgIHNldHRpbmdzX21lbnUuYW5pbWF0ZSh7d2lkdGg6ICd0b2dnbGUnfSk7XHJcbiAgICAgICAgbG9jYXRpb25zX21lbnUuYW5pbWF0ZSh7bGVmdDogXCItPTIwMHB4XCIsIHdpZHRoOiBcIis9MjAwcHhcIn0pO1xyXG4gICAgICAgIGxheWVyX21lbnUuYW5pbWF0ZSh7bGVmdDogXCItPTIwMHB4XCJ9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0dGluZ3NfbWVudS5hbmltYXRlKHt3aWR0aDogJ3RvZ2dsZSd9KTtcclxuICAgICAgICAkKCcjcmFkaWFsbWVudScpLmFuaW1hdGUoe2xlZnQ6IFwiKz0yMDBweFwifSk7XHJcbiAgICAgICAgbG9jYXRpb25zX21lbnUuYW5pbWF0ZSh7bGVmdDogXCIrPTIwMHB4XCIsIHdpZHRoOiBcIi09MjAwcHhcIn0pO1xyXG4gICAgICAgIGxheWVyX21lbnUuYW5pbWF0ZSh7bGVmdDogXCIrPTIwMHB4XCJ9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4kKCcjcm0tbG9jYXRpb25zJykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBvcmRlciBvZiBhbmltYXRpb24gaXMgaW1wb3J0YW50LCBpdCBvdGhlcndpc2Ugd2lsbCBzb21ldGltZXMgc2hvdyBhIHNtYWxsIGdhcCBiZXR3ZWVuIHRoZSB0d28gb2JqZWN0c1xyXG4gICAgaWYgKGxvY2F0aW9uc19tZW51LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAkKCcjcmFkaWFsbWVudScpLmFuaW1hdGUoe3RvcDogXCItPTEwMHB4XCJ9KTtcclxuICAgICAgICBsb2NhdGlvbnNfbWVudS5hbmltYXRlKHtoZWlnaHQ6ICd0b2dnbGUnfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvY2F0aW9uc19tZW51LmFuaW1hdGUoe2hlaWdodDogJ3RvZ2dsZSd9KTtcclxuICAgICAgICAkKCcjcmFkaWFsbWVudScpLmFuaW1hdGUoe3RvcDogXCIrPTEwMHB4XCJ9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG53aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0V2lkdGgod2luZG93LmlubmVyV2lkdGgpO1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldEhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmludmFsaWRhdGUoKTtcclxufTtcclxuXHJcbiQoJ2JvZHknKS5rZXl1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgJiYgZS50YXJnZXQudGFnTmFtZSAhPT0gXCJJTlBVVFwiKSB7XHJcbiAgICAgICAgY29uc3QgbCA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcigpO1xyXG4gICAgICAgIGwuc2VsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHNlbCkge1xyXG4gICAgICAgICAgICBsLnJlbW92ZVNoYXBlKHNlbCwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlci5pbml0aWF0aXZlVHJhY2tlci5yZW1vdmVJbml0aWF0aXZlKHNlbC51dWlkLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4kKFwiI2dyaWRTaXplSW5wdXRcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IGdzID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldEdyaWRTaXplKGdzKTtcclxuICAgIHNvY2tldC5lbWl0KFwic2V0IGdyaWRzaXplXCIsIGdzKTtcclxufSk7XHJcblxyXG4kKFwiI3VuaXRTaXplSW5wdXRcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IHVzID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnNldFVuaXRTaXplKHVzKTtcclxuICAgIHNvY2tldC5lbWl0KFwic2V0IGxvY2F0aW9uT3B0aW9uc1wiLCB7J3VuaXRTaXplJzogdXN9KTtcclxufSk7XHJcbiQoXCIjdXNlR3JpZElucHV0XCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjb25zdCB1ZyA9IGUudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0VXNlR3JpZCh1Zyk7XHJcbiAgICBzb2NrZXQuZW1pdChcInNldCBsb2NhdGlvbk9wdGlvbnNcIiwgeyd1c2VHcmlkJzogdWd9KTtcclxufSk7XHJcbiQoXCIjdXNlRk9XSW5wdXRcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnN0IHVmID0gZS50YXJnZXQuY2hlY2tlZDtcclxuICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5zZXRGdWxsRk9XKHVmKTtcclxuICAgIHNvY2tldC5lbWl0KFwic2V0IGxvY2F0aW9uT3B0aW9uc1wiLCB7J2Z1bGxGT1cnOiB1Zn0pO1xyXG59KTtcclxuJChcIiNmb3dPcGFjaXR5XCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBsZXQgZm8gPSBwYXJzZUZsb2F0KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgIGlmIChpc05hTihmbykpIHtcclxuICAgICAgICAkKFwiI2Zvd09wYWNpdHlcIikudmFsKGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5mb3dPcGFjaXR5KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZm8gPCAwKSBmbyA9IDA7XHJcbiAgICBpZiAoZm8gPiAxKSBmbyA9IDE7XHJcbiAgICBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuc2V0Rk9XT3BhY2l0eShmbyk7XHJcbiAgICBzb2NrZXQuZW1pdChcInNldCBsb2NhdGlvbk9wdGlvbnNcIiwgeydmb3dPcGFjaXR5JzogZm99KTtcclxufSk7XHJcblxyXG4vLyAqKioqIFVUSUxTICoqKipcclxuXHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9jcmVhdGUtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuZnVuY3Rpb24gdXVpZHY0KCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWxwaFNvcnQoYSwgYikge1xyXG4gICAgaWYgKGEudG9Mb3dlckNhc2UoKSA8IGIudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHcybChvYmopIHtcclxuICAgIGNvbnN0IHogPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIuem9vbUZhY3RvcjtcclxuICAgIGNvbnN0IHBhblggPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIucGFuWDtcclxuICAgIGNvbnN0IHBhblkgPSBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIucGFuWTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogKG9iai54ICsgcGFuWCkgKiB6LFxyXG4gICAgICAgIHk6IChvYmoueSArIHBhblkpICogelxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB3Mmx4KHgpIHtcclxuICAgIHJldHVybiB3Mmwoe3g6IHgsIHk6IDB9KS54O1xyXG59XHJcblxyXG5mdW5jdGlvbiB3Mmx5KHkpIHtcclxuICAgIHJldHVybiB3Mmwoe3g6IDAsIHk6IHl9KS55O1xyXG59XHJcblxyXG5mdW5jdGlvbiB3Mmx6KHopIHtcclxuICAgIHJldHVybiB6ICogZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLnpvb21GYWN0b3I7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFVuaXREaXN0YW5jZShyKSB7XHJcbiAgICByZXR1cm4gKHIgLyBnYW1lTWFuYWdlci5sYXllck1hbmFnZXIudW5pdFNpemUpICogZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLmdyaWRTaXplO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3MmxyKHIpIHtcclxuICAgIHJldHVybiB3Mmx6KGdldFVuaXREaXN0YW5jZShyKSlcclxufVxyXG5cclxuZnVuY3Rpb24gbDJ3KG9iaikge1xyXG4gICAgY29uc3QgeiA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci56b29tRmFjdG9yO1xyXG4gICAgY29uc3QgcGFuWCA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5YO1xyXG4gICAgY29uc3QgcGFuWSA9IGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5wYW5ZO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiAob2JqLnggLyB6KSAtIHBhblgsXHJcbiAgICAgICAgeTogKG9iai55IC8geikgLSBwYW5ZXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGwyd3goeCkge1xyXG4gICAgcmV0dXJuIGwydyh7eDogeCwgeTogMH0pLng7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGwyd3koeSkge1xyXG4gICAgcmV0dXJuIGwydyh7eDogMCwgeTogeX0pLnk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE9yZGVyZWRNYXAoKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBbXTtcclxufVxyXG5cclxuT3JkZXJlZE1hcC5wcm90b3R5cGUgPSBbXTtcclxuT3JkZXJlZE1hcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICB0aGlzLmRhdGEucHVzaChlbGVtZW50KTtcclxufTtcclxuT3JkZXJlZE1hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuZGF0YS5zcGxpY2UodGhpcy5kYXRhLmluZGV4T2YoZWxlbWVudCksIDEpO1xyXG59O1xyXG5PcmRlcmVkTWFwLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlbGVtZW50KTtcclxufTtcclxuT3JkZXJlZE1hcC5wcm90b3R5cGUubW92ZVRvID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlkeCkge1xyXG4gICAgY29uc3Qgb2xkSWR4ID0gdGhpcy5pbmRleE9mKGVsZW1lbnQpO1xyXG4gICAgaWYgKG9sZElkeCA9PT0gaWR4KSByZXR1cm4gZmFsc2U7XHJcbiAgICB0aGlzLmRhdGEuc3BsaWNlKG9sZElkeCwgMSk7XHJcbiAgICB0aGlzLmRhdGEuc3BsaWNlKGlkeCwgMCwgZWxlbWVudCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEluaXRpYXRpdmVUcmFja2VyKCkge1xyXG4gICAgdGhpcy5kYXRhID0gW107XHJcbn1cclxuSW5pdGlhdGl2ZVRyYWNrZXIucHJvdG90eXBlLmFkZEluaXRpYXRpdmUgPSBmdW5jdGlvbiAoZGF0YSwgc3luYykge1xyXG4gICAgLy8gT3BlbiB0aGUgaW5pdGlhdGl2ZSB0cmFja2VyIGlmIGl0IGlzIG5vdCBjdXJyZW50bHkgb3Blbi5cclxuICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwIHx8ICFpbml0aWF0aXZlRGlhbG9nLmRpYWxvZyhcImlzT3BlblwiKSlcclxuICAgICAgICBpbml0aWF0aXZlRGlhbG9nLmRpYWxvZyhcIm9wZW5cIik7XHJcbiAgICAvLyBJZiBubyBpbml0aWF0aXZlIGdpdmVuLCBhc3N1bWUgaXQgMFxyXG4gICAgaWYgKGRhdGEuaW5pdGlhdGl2ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIGRhdGEuaW5pdGlhdGl2ZSA9IDA7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgc2hhcGUgaXMgYWxyZWFkeSBiZWluZyB0cmFja2VkXHJcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC51dWlkID09PSBkYXRhLnV1aWQpO1xyXG4gICAgaWYgKGV4aXN0aW5nICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oZXhpc3RpbmcsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMucmVkcmF3KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKGRhdGEpO1xyXG4gICAgICAgIHRoaXMucmVkcmF3KCk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3luYylcclxuICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZUluaXRpYXRpdmVcIiwgZGF0YSk7XHJcbn07XHJcbkluaXRpYXRpdmVUcmFja2VyLnByb3RvdHlwZS5yZW1vdmVJbml0aWF0aXZlID0gZnVuY3Rpb24gKHV1aWQsIHN5bmMsIHNraXBHcm91cENoZWNrKSB7XHJcbiAgICBza2lwR3JvdXBDaGVjayA9IHNraXBHcm91cENoZWNrIHx8IGZhbHNlO1xyXG4gICAgY29uc3QgZCA9IHRoaXMuZGF0YS5maW5kSW5kZXgoZCA9PiBkLnV1aWQgPT09IHV1aWQpO1xyXG4gICAgaWYgKGQgPj0gMCkge1xyXG4gICAgICAgIGlmICghc2tpcEdyb3VwQ2hlY2sgJiYgdGhpcy5kYXRhW2RdLmdyb3VwKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kYXRhLnNwbGljZShkLCAxKTtcclxuICAgICAgICB0aGlzLnJlZHJhdygpO1xyXG4gICAgICAgIGlmIChzeW5jKVxyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZUluaXRpYXRpdmVcIiwge3V1aWQ6IHV1aWR9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwICYmIGluaXRpYXRpdmVEaWFsb2cuZGlhbG9nKFwiaXNPcGVuXCIpKVxyXG4gICAgICAgIGluaXRpYXRpdmVEaWFsb2cuZGlhbG9nKFwiY2xvc2VcIik7XHJcbn07XHJcbkluaXRpYXRpdmVUcmFja2VyLnByb3RvdHlwZS5yZWRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpbml0aWF0aXZlRGlhbG9nLmVtcHR5KCk7XHJcblxyXG4gICAgdGhpcy5kYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYi5pbml0aWF0aXZlIC0gYS5pbml0aWF0aXZlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YS5vd25lcnMgPT09IHVuZGVmaW5lZCkgZGF0YS5vd25lcnMgPSBbXTtcclxuICAgICAgICBjb25zdCBpbWcgPSBkYXRhLnNyYyA9PT0gdW5kZWZpbmVkID8gJycgOiAkKGA8aW1nIHNyYz1cIiR7ZGF0YS5zcmN9XCIgd2lkdGg9XCIzMHB4XCIgZGF0YS11dWlkPVwiJHtkYXRhLnV1aWR9XCI+YCk7XHJcbiAgICAgICAgLy8gY29uc3QgbmFtZSA9ICQoYDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwibmFtZVwiIGRhdGEtdXVpZD1cIiR7c2gudXVpZH1cIiB2YWx1ZT1cIiR7c2gubmFtZX1cIiBkaXNhYmxlZD0nZGlzYWJsZWQnIHN0eWxlPVwiZ3JpZC1jb2x1bW4tc3RhcnQ6IG5hbWVcIj5gKTtcclxuICAgICAgICBjb25zdCB2YWwgPSAkKGA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cInZhbHVlXCIgZGF0YS11dWlkPVwiJHtkYXRhLnV1aWR9XCIgdmFsdWU9XCIke2RhdGEuaW5pdGlhdGl2ZX1cIiBzdHlsZT1cImdyaWQtY29sdW1uLXN0YXJ0OiB2YWx1ZVwiPmApO1xyXG4gICAgICAgIGNvbnN0IHZpc2libGUgPSAkKGA8ZGl2IGRhdGEtdXVpZD1cIiR7ZGF0YS51dWlkfVwiPjxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT48L2Rpdj5gKTtcclxuICAgICAgICBjb25zdCBncm91cCA9ICQoYDxkaXYgZGF0YS11dWlkPVwiJHtkYXRhLnV1aWR9XCI+PGkgY2xhc3M9XCJmYXMgZmEtdXNlcnNcIj48L2k+PC9kaXY+YCk7XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gJChgPGRpdiBzdHlsZT1cImdyaWQtY29sdW1uLXN0YXJ0OiByZW1vdmVcIiBkYXRhLXV1aWQ9XCIke2RhdGEudXVpZH1cIj48aSBjbGFzcz1cImZhcyBmYS10cmFzaC1hbHRcIj48L2k+PC9kaXY+YCk7XHJcblxyXG4gICAgICAgIHZpc2libGUuY3NzKFwib3BhY2l0eVwiLCBkYXRhLnZpc2libGUgPyBcIjEuMFwiIDogXCIwLjNcIik7XHJcbiAgICAgICAgZ3JvdXAuY3NzKFwib3BhY2l0eVwiLCBkYXRhLmdyb3VwID8gXCIxLjBcIiA6IFwiMC4zXCIpO1xyXG4gICAgICAgIGlmICghZGF0YS5vd25lcnMuaW5jbHVkZXMoZ2FtZU1hbmFnZXIudXNlcm5hbWUpICYmICFnYW1lTWFuYWdlci5JU19ETSkge1xyXG4gICAgICAgICAgICB2YWwucHJvcChcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgIHJlbW92ZS5jc3MoXCJvcGFjaXR5XCIsIFwiMC4zXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdGlhdGl2ZURpYWxvZy5hcHBlbmQoaW1nKS5hcHBlbmQodmFsKS5hcHBlbmQodmlzaWJsZSkuYXBwZW5kKGdyb3VwKS5hcHBlbmQocmVtb3ZlKTtcclxuXHJcbiAgICAgICAgdmFsLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zdCBkID0gc2VsZi5kYXRhLmZpbmQoZCA9PiBkLnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgZC5pbml0aWF0aXZlID0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSkgfHwgMDtcclxuICAgICAgICAgICAgc2VsZi5hZGRJbml0aWF0aXZlKGQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2aXNpYmxlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gc2VsZi5kYXRhLmZpbmQoZCA9PiBkLnV1aWQgPT09ICQodGhpcykuZGF0YSgndXVpZCcpKTtcclxuICAgICAgICAgICAgICAgIGlmKCFkLm93bmVycy5pbmNsdWRlcyhnYW1lTWFuYWdlci51c2VybmFtZSkgJiYgIWdhbWVNYW5hZ2VyLklTX0RNKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGQudmlzaWJsZSA9ICFkLnZpc2libGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZC52aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwib3BhY2l0eVwiLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwib3BhY2l0eVwiLCAwLjMpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJ1cGRhdGVJbml0aWF0aXZlXCIsIGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZ3JvdXAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBzZWxmLmRhdGEuZmluZChkID0+IGQudXVpZCA9PT0gJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgICAgICAgICAgaWYoIWQub3duZXJzLmluY2x1ZGVzKGdhbWVNYW5hZ2VyLnVzZXJuYW1lKSAmJiAhZ2FtZU1hbmFnZXIuSVNfRE0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgZC5ncm91cCA9ICFkLmdyb3VwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQuZ3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJvcGFjaXR5XCIsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJvcGFjaXR5XCIsIDAuMyk7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInVwZGF0ZUluaXRpYXRpdmVcIiwgZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZW1vdmUub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHV1aWQgPSAkKHRoaXMpLmRhdGEoJ3V1aWQnKTtcclxuICAgICAgICAgICAgY29uc3QgZCA9IHNlbGYuZGF0YS5maW5kKGQgPT4gZC51dWlkID09PSB1dWlkKTtcclxuICAgICAgICAgICAgaWYoIWQub3duZXJzLmluY2x1ZGVzKGdhbWVNYW5hZ2VyLnVzZXJuYW1lKSAmJiAhZ2FtZU1hbmFnZXIuSVNfRE0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICQoYFtkYXRhLXV1aWQ9JHt1dWlkfV1gKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgc2VsZi5yZW1vdmVJbml0aWF0aXZlKHV1aWQsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTaGFwZUZyb21EaWN0KHNoYXBlLCBkdW1teSkge1xyXG4gICAgaWYgKGR1bW15ID09PSB1bmRlZmluZWQpIGR1bW15ID0gZmFsc2U7XHJcbiAgICBpZiAoIWR1bW15ICYmIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5VVUlETWFwLmhhcyhzaGFwZS51dWlkKSlcclxuICAgICAgICByZXR1cm4gZ2FtZU1hbmFnZXIubGF5ZXJNYW5hZ2VyLlVVSURNYXAuZ2V0KHNoYXBlLnV1aWQpO1xyXG5cclxuICAgIGxldCBzaDtcclxuXHJcbiAgICBpZiAoc2hhcGUudHlwZSA9PT0gJ3JlY3QnKSBzaCA9IE9iamVjdC5hc3NpZ24obmV3IFJlY3QoKSwgc2hhcGUpO1xyXG4gICAgaWYgKHNoYXBlLnR5cGUgPT09ICdjaXJjbGUnKSBzaCA9IE9iamVjdC5hc3NpZ24obmV3IENpcmNsZSgpLCBzaGFwZSk7XHJcbiAgICBpZiAoc2hhcGUudHlwZSA9PT0gJ2xpbmUnKSBzaCA9IE9iamVjdC5hc3NpZ24obmV3IExpbmUoKSwgc2hhcGUpO1xyXG4gICAgaWYgKHNoYXBlLnR5cGUgPT09ICd0ZXh0Jykgc2ggPSBPYmplY3QuYXNzaWduKG5ldyBUZXh0KCksIHNoYXBlKTtcclxuICAgIGlmIChzaGFwZS50eXBlID09PSAnYXNzZXQnKSB7XHJcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKHNoYXBlLncsIHNoYXBlLmgpO1xyXG4gICAgICAgIGltZy5zcmMgPSBzaGFwZS5zcmM7XHJcbiAgICAgICAgc2ggPSBPYmplY3QuYXNzaWduKG5ldyBBc3NldCgpLCBzaGFwZSk7XHJcbiAgICAgICAgc2guaW1nID0gaW1nO1xyXG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGdhbWVNYW5hZ2VyLmxheWVyTWFuYWdlci5nZXRMYXllcihzaGFwZS5sYXllcikuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2g7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvaW50SW5MaW5lKHAsIGwxLCBsMikge1xyXG4gICAgcmV0dXJuIHAueCA+PSBNYXRoLm1pbihsMS54LCBsMi54KSAtIDAuMDAwMDAxICYmXHJcbiAgICAgICAgcC54IDw9IE1hdGgubWF4KGwxLngsIGwyLngpICsgMC4wMDAwMDEgJiZcclxuICAgICAgICBwLnkgPj0gTWF0aC5taW4obDEueSwgbDIueSkgLSAwLjAwMDAwMSAmJlxyXG4gICAgICAgIHAueSA8PSBNYXRoLm1heChsMS55LCBsMi55KSArIDAuMDAwMDAxO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwb2ludEluTGluZXMocCwgczEsIGUxLCBzMiwgZTIpIHtcclxuICAgIHJldHVybiBwb2ludEluTGluZShwLCBzMSwgZTEpICYmIHBvaW50SW5MaW5lKHAsIHMyLCBlMik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExpbmVzSW50ZXJzZWN0UG9pbnQoczEsIGUxLCBzMiwgZTIpe1xyXG4gICAgLy8gY29uc3QgczEgPSBNYXRoLm1pbihTMSwgKVxyXG4gICAgY29uc3QgQTEgPSBlMS55LXMxLnk7XHJcbiAgICBjb25zdCBCMSA9IHMxLngtZTEueDtcclxuICAgIGNvbnN0IEEyID0gZTIueS1zMi55O1xyXG4gICAgY29uc3QgQjIgPSBzMi54LWUyLng7XHJcblxyXG4gICAgLy8gR2V0IGRlbHRhIGFuZCBjaGVjayBpZiB0aGUgbGluZXMgYXJlIHBhcmFsbGVsXHJcbiAgICBjb25zdCBkZWx0YSA9IEExKkIyIC0gQTIqQjE7XHJcbiAgICBpZihkZWx0YSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IEMyID0gQTIqczIueCtCMipzMi55O1xyXG4gICAgY29uc3QgQzEgPSBBMSpzMS54K0IxKnMxLnk7XHJcbiAgICAvL2ludmVydCBkZWx0YSB0byBtYWtlIGRpdmlzaW9uIGNoZWFwZXJcclxuICAgIGNvbnN0IGludmRlbHRhID0gMS9kZWx0YTtcclxuXHJcbiAgICBjb25zdCBpbnRlcnNlY3QgPSB7eDogKEIyKkMxIC0gQjEqQzIpKmludmRlbHRhLCB5OiAoQTEqQzIgLSBBMipDMSkqaW52ZGVsdGF9O1xyXG4gICAgaWYgKCFwb2ludEluTGluZXMoaW50ZXJzZWN0LCBzMSwgZTEsIHMyLCBlMikpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gaW50ZXJzZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQb2ludERpc3RhbmNlKHAxLCBwMikge1xyXG4gICAgY29uc3QgYSA9IHAxLnggLSBwMi54O1xyXG4gICAgY29uc3QgYiA9IHAxLnkgLSBwMi55O1xyXG4gICAgcmV0dXJuIE1hdGguc3FydCggYSphICsgYipiICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVNYW5hZ2VyOyJdLCJzb3VyY2VSb290IjoiIn0=